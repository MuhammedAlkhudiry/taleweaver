(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(75));t.MoveTo=o.default;var i=r(n(76));t.MoveHeadTo=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.operations=[],this.operations=[]}return e.prototype.addOperation=function(e){this.operations.push(e)},e.prototype.getOperations=function(){return this.operations},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.operations=[],this.operations=[],this.leftAnchor=null}return e.prototype.addOperation=function(e){this.operations.push(e)},e.prototype.getOperations=function(){return this.operations},e.prototype.setLeftAnchor=function(e){this.leftAnchor=e},e.prototype.getLeftAnchor=function(){return this.leftAnchor},e}();t.default=r},,,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(72)),s=o(n(45)),a=o(n(8)),u=function(e){function t(t){var n=e.call(this)||this;return n.version=0,n.width=t,n.children=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){if(void 0===this.height){var e=0;this.getChildren().forEach(function(t){var n=t.getHeight();n>e&&(e=n)}),this.height=e}return this.height},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Line box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){e.getHeight();this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Line box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Line box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(){this.selectableSize=void 0},t.prototype.splitAt=function(e){if(e>this.children.length)throw new Error("Error cleaving LineFlowBox, offset "+e+" is out of range.");var n=this.children.splice(e);this.selectableSize=void 0,this.height=void 0;var r=new t(this.width);return n.forEach(function(e,t){r.insertChild(e,t)}),r},t.prototype.resolvePosition=function(e,t){var n=this;return new a.default(this,t,e,function(e){for(var r=0,o=0,i=n.children.length;o<i;o++){var s=n.children[o],a=s.getSelectableSize();if(r+a>t)return s.resolvePosition(e,t-r);r+=a}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e){for(var t=0,n=0,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getWidth();if(e>=n&&e<=n+s){t+=i.resolveViewportPositionToSelectableOffset(e-n);break}t+=i.getSelectableSize(),n+=s}return t===this.selectableSize?t-1:t},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],o=0,s=0,a=function(i,a){var f=u.children[i],l=f.getWidth(),d=f.getSelectableSize(),c=Math.max(e-o,0),h=Math.min(t-o,d);c<=d&&h>=0&&(c!==h||h!==d)&&f.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(e){r.push({left:s+e.left,right:n.getWidth()-s-l+e.right,top:0,bottom:0,width:e.width,height:n.getHeight()})});o+=f.getSelectableSize(),s+=l},u=this,f=0,l=this.children.length;f<l&&o<=t;f++)a(f);return i.default(r),r},t}(s.default);t.default=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(8)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.breakable=!0,n}return r(t,e),t.prototype.isBreakable=function(){return this.breakable},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Atomic box has no parent set.");return this.parent},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Atomic box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Atomic box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.resolvePosition=function(e,t){return new i.default(this,t,e)},t}(o(n(14)).default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(7)),i=r(n(9)),s=r(n(6)),a=function(){function e(e,t,n,r){this.layoutNode=e,this.selectableOffset=t,this.parent=n||null,this.level=n?n.getLevel()+1:0,this.child=r?r(this):null}return e.prototype.getLayoutNode=function(){return this.layoutNode},e.prototype.getSelectableOffset=function(){return this.selectableOffset},e.prototype.getLevel=function(){return this.level},e.prototype.getParent=function(){return this.parent},e.prototype.getChild=function(){return this.child},e.prototype.getAtomicBoxLevel=function(){return this.child?this.child.getAtomicBoxLevel():this},e.prototype.getLineFlowBoxLevel=function(){if(this.layoutNode instanceof s.default)return this;if(this.layoutNode instanceof o.default||this.layoutNode instanceof i.default){var e=this.getParent();if(!e)throw new Error("No parent.");return e.getLineFlowBoxLevel()}var t=this.getChild();if(!t)throw new Error("No child.");return t.getLineFlowBoxLevel()},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(8)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.children=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){if(void 0===this.width){var e=0;this.getChildren().forEach(function(t){e+=t.getWidth()}),this.width=e}return this.width},t.prototype.getWidthWithoutTrailingWhitespace=function(){if(void 0===this.widthWithoutTrailingWhitespace){var e=this.children[this.children.length-1];this.widthWithoutTrailingWhitespace=this.getWidth()-e.getWidth()+e.getWidthWithoutTrailingWhitespace()}return this.widthWithoutTrailingWhitespace},t.prototype.getHeight=function(){if(void 0===this.height){var e=0;this.getChildren().forEach(function(t){var n=t.getHeight();n>e&&(e=n)}),this.height=e}return this.height},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Inline box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this),this.width=void 0,this.height=void 0,this.widthWithoutTrailingWhitespace=void 0},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1),this.width=void 0,this.height=void 0,this.widthWithoutTrailingWhitespace=void 0},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Inline box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Inline box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(e){this.selectableSize=void 0,this.width=void 0,this.height=void 0,this.widthWithoutTrailingWhitespace=void 0},t.prototype.resolvePosition=function(e,t){var n=this;return new i.default(this,t,e,function(e){for(var r=0,o=0,i=n.children.length;o<i;o++){var s=n.children[o],a=s.getSelectableSize();if(r+a>t)return s.resolvePosition(e,t-r);r+=a}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e){for(var t=0,n=0,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getWidth();if(e>=n&&e<=n+s){t+=i.resolveViewportPositionToSelectableOffset(e-n);break}t+=i.getSelectableSize(),n+=s}return t},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],o=0,i=0,s=function(s,u){var f=a.children[s],l=f.getWidth(),d=f.getSelectableSize(),c=Math.max(e-o,0),h=Math.min(t-o,d);c<=d&&h>=0&&f.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(e){r.push({left:i+e.left,right:n.getWidth()-i-l+e.right,top:0,bottom:0,width:e.width,height:n.getHeight()})});o+=f.getSelectableSize(),i+=l},a=this,u=0,f=this.children.length;u<f&&o<=t;u++)s(u);return r},t}(o(n(14)).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e}return e.prototype.getID=function(){return this.id},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize)throw new Error("View node has not yet been initialized with selectable size.");return this.selectableSize},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.type=e,this.attributes=t}return e.prototype.getType=function(){return this.type},e.prototype.getAttributes=function(){return this.attributes},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e}return e.prototype.getID=function(){return this.id},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(44)),s=o(n(29)),a=function(e){function t(t){var n=e.call(this,t+"-"+s.default())||this;return n.renderNodeID=t,n}return r(t,e),t.prototype.getRenderNodeID=function(){return this.renderNodeID},t}(i.default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(8)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.width=0,n.children=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.getParent().getInnerWidth()},t.prototype.getHeight=function(){if(void 0===this.height){var e=0;this.children.forEach(function(t){e+=t.getHeight()}),this.height=e}return this.height},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Block box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Block box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Block box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(e){this.height=void 0,this.selectableSize=void 0},t.prototype.resolvePosition=function(e,t){var n=this;return new i.default(this,t,e,function(e){for(var r=0,o=0,i=n.children.length;o<i;o++){var s=n.children[o],a=s.getSelectableSize();if(r+a>t)return s.resolvePosition(e,t-r);r+=a}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t}(o(n(14)).default);t.default=s},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.size=2,this.selectableSize=0,this.version=0}return e.prototype.setID=function(e){this.id=e},e.prototype.getID=function(){return this.id},e.prototype.getSize=function(){return this.size},e.prototype.getSelectableSize=function(){return this.selectableSize},e.prototype.setVersion=function(e){this.version=e},e.prototype.getVersion=function(){return this.version},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n.children=[],n}return r(t,e),t.prototype.getParent=function(){return this.parent},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.onStateUpdated=function(e){},t}(o(n(22)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n.content="",n}return r(t,e),t.prototype.getParent=function(){return this.parent},t.prototype.setContent=function(e){this.content=e},t.prototype.getContent=function(){return this.content},t.prototype.onStateUpdated=function(e,t){this.content=t},t}(o(n(22)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.syncNodes=function(e,t){if(!this.updateNode(t,e))return!1;for(var n=this.getSrcNodeChildren(e),r=this.getDstNodeChildren(t),o=0,i=0,s=n.length;i<s;i++){var a=n[i],u=this.findSrcNodeInDstNodes(a,r);if(u<o){var f=this.insertNode(t,a,o);r.splice(o,0,f),this.syncNodes(a,f),o++}else{for(var l=o;l<u;l++){var d=r[o];this.deleteNode(t,d),r.splice(o,1)}var c=r[o];this.syncNodes(a,c),o++}}for(i=o,s=r.length;i<s;i++){c=r[o];this.deleteNode(t,c),r.splice(o,1)}},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this,t)||this;return r.version=0,r.parent=n,r.children=[],r}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getParent=function(){return this.parent},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.onModelUpdated=function(e){this.selectableSize=void 0,this.modelSize=void 0},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.getModelSize=function(){if(void 0===this.modelSize){var e=2;this.children.forEach(function(t){e+=t.getModelSize()}),this.modelSize=e}return this.modelSize},t.prototype.convertSelectableOffsetToModelOffset=function(e){for(var t=0,n=1,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getSelectableSize();if(t+s>e)return n+i.convertSelectableOffsetToModelOffset(e-t);t+=s,n+=i.getModelSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(o(n(13)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this,t)||this;return r.version=0,r.parent=n,r.children=[],r}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.getParent=function(){return this.parent},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.onModelUpdated=function(e){this.selectableSize=void 0,this.modelSize=void 0},t.prototype.getModelSize=function(){if(void 0===this.modelSize){var e=2;this.children.forEach(function(t){e+=t.getModelSize()}),this.modelSize=e}return this.modelSize},t.prototype.convertSelectableOffsetToModelOffset=function(e){for(var t=0,n=1,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getSelectableSize();if(t+s>e)return n+i.convertSelectableOffsetToModelOffset(e-t);t+=s,n+=i.getModelSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(o(n(13)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(8)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.width=0,n.height=0,n.padding=0,n.children=[],n.onUpdatedSubscribers=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getPadding=function(){return this.padding},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(e){this.width=e.getWidth(),this.height=e.getHeight(),this.padding=e.getPadding(),this.selectableSize=void 0},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t.prototype.resolvePosition=function(e){var t=this;return new i.default(this,e,void 0,function(n){for(var r=0,o=0,i=t.children.length;o<i;o++){var s=t.children[o],a=s.getSelectableSize();if(r+a>e)return s.resolvePosition(n,e-r);r+=a}throw new Error("Selectable offset "+e+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e,t,n){if(e>=this.children.length)throw new Error("Page offset "+e+" is out of range.");for(var r=0,o=0;o<e;o++)r+=this.children[o].getSelectableSize();return r+this.children[e].resolveViewportPositionToSelectableOffset(t,n)},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){var n=[];this.children.forEach(function(){n.push([])});for(var r=0,o=function(o,s){var a=i.children[o],u=a.getSelectableSize(),f=Math.max(e-r,0),l=Math.min(t-r,u);f<=u&&l>=0&&a.resolveSelectableOffsetRangeToViewportBoundingRects(f,l).forEach(function(e){n[o].push({left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height})});r+=a.getSelectableSize()},i=this,s=0,a=this.children.length;s<a&&r<=t;s++)o(s);return n},t}(o(n(14)).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Math.random().toString(36).substring(2)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(8)),s=function(e){function t(t,n,r){var o=e.call(this)||this;return o.version=0,o.width=t,o.height=n,o.padding=r,o.children=[],o}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getInnerWidth=function(){return this.width-this.padding-this.padding},t.prototype.getInnerHeight=function(){return this.height-this.padding-this.padding},t.prototype.getPadding=function(){return this.padding},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Page flow box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Page flow box is not found in parent.");return t>0?e[t-1]:null},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Page flow box is not found in parent.");return t<e.length-1?e[t+1]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(){this.selectableSize=void 0},t.prototype.splitAt=function(e){if(e>this.children.length)throw new Error("Error cleaving PageFlowBox, offset "+e+" is out of range.");var n=this.children.splice(e);this.selectableSize=void 0;var r=new t(this.width,this.height,this.padding);return n.forEach(function(e,t){r.insertChild(e,t)}),r},t.prototype.resolvePosition=function(e,t){var n=this;return new i.default(this,t,e,function(e){for(var r=0,o=0,i=n.children.length;o<i;o++){var s=n.children[o],a=s.getSelectableSize();if(r+a>t)return s.resolvePosition(e,t-r);r+=a}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e,t){for(var n=0,r=0,o=Math.min(Math.max(e-this.padding,0),this.width-this.padding),i=Math.min(Math.max(t-this.padding,0),this.height-this.padding),s=0,a=this.children.length;s<a;s++){var u=this.children[s],f=u.getHeight();if(i>=r&&i<=r+f){n+=u.resolveViewportPositionToSelectableOffset(o,i-r);break}n+=u.getSelectableSize(),r+=f}if(n===this.getSelectableSize()){var l=this.children[this.children.length-1];n-=l.getSelectableSize(),n+=l.resolveViewportPositionToSelectableOffset(o,l.getHeight())}return n},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],o=0,i=0,s=function(s,u){var f=a.children[s],l=f.getHeight(),d=f.getSelectableSize(),c=Math.max(e-o,0),h=Math.min(t-o,d);c<=d&&h>=0&&f.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(e){r.push({left:e.left+n.padding,right:e.right+n.padding,top:i+e.top+n.padding,bottom:n.height-i-l+e.bottom+n.padding,width:e.width,height:e.height})});o+=f.getSelectableSize(),i+=l},a=this,u=0,f=this.children.length;u<f&&o<=t;u++)s(u);return r},t}(o(n(45)).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=[]),this.key=e,this.modifierKeys=t}return e.prototype.getCode=function(){var e=this.modifierKeys.map(function(e){return e.getCode()}).sort(),t=this.key.getCode();return e.concat([t]).join("-")},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(47)),i=new o.default("Alt");t.AltKey=i;var s=new o.default("Ctrl");t.CtrlKey=s;var a=new o.default("Meta");t.MetaKey=a;var u=new o.default("Shift");t.ShiftKey=u},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(49)),i=new o.default("A");t.AKey=i;var s=new o.default("B");t.BKey=s;var a=new o.default("C");t.CKey=a;var u=new o.default("D");t.DKey=u;var f=new o.default("E");t.EKey=f;var l=new o.default("F");t.FKey=l;var d=new o.default("G");t.GKey=d;var c=new o.default("H");t.HKey=c;var h=new o.default("I");t.IKey=h;var p=new o.default("J");t.JKey=p;var g=new o.default("K");t.KKey=g;var v=new o.default("L");t.LKey=v;var y=new o.default("M");t.MKey=y;var _=new o.default("N");t.NKey=_;var w=new o.default("O");t.OKey=w;var b=new o.default("P");t.PKey=b;var O=new o.default("Q");t.QKey=O;var m=new o.default("R");t.RKey=m;var C=new o.default("S");t.SKey=C;var S=new o.default("T");t.TKey=S;var M=new o.default("U");t.UKey=M;var P=new o.default("V");t.VKey=P;var x=new o.default("W");t.WKey=x;var E=new o.default("X");t.XKey=E;var N=new o.default("Y");t.YKey=N;var T=new o.default("Z");t.ZKey=T;var D=new o.default("Num1");t.Num1Key=D;var j=new o.default("Num2");t.Num2Key=j;var K=new o.default("Num3");t.Num3Key=K;var B=new o.default("Num4");t.Num4Key=B;var A=new o.default("Num5");t.Num5Key=A;var z=new o.default("Num6");t.Num6Key=z;var V=new o.default("Num7");t.Num7Key=V;var k=new o.default("Num8");t.Num8Key=k;var L=new o.default("Num9");t.Num9Key=L;var R=new o.default("Num0");t.Num0Key=R;var H=new o.default("Dash");t.DashKey=H;var I=new o.default("Equal");t.EqualKey=I;var U=new o.default("Space");t.SpaceKey=U;var W=new o.default("ArrowLeft");t.ArrowLeftKey=W;var F=new o.default("ArrowRight");t.ArrowRightKey=F;var $=new o.default("ArrowUp");t.ArrowUpKey=$;var J=new o.default("ArrowDown");t.ArrowDownKey=J;var X=new o.default("Backspace");t.BackspaceKey=X;var Y=new o.default("Delete");t.DeleteKey=Y;var Z=new o.default("Enter");t.EnterKey=Z},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(66));t.Editor=i.default;var s=r(n(108));t.Config=s.default;var a=r(n(2));t.StateTransformation=a.default;var u=o(n(46));t.stateOperations=u;var f=r(n(11));t.OpenTagToken=f.default;var l=r(n(12));t.CloseTagToken=l.default;var d=r(n(3));t.CursorTransformation=d.default;var c=o(n(1));t.cursorOperations=c;var h=r(n(28));t.DocBox=h.default;var p=r(n(30));t.PageFlowBox=p.default;var g=r(n(15));t.BlockBox=g.default;var v=r(n(6));t.LineFlowBox=v.default;var y=r(n(9));t.InlineBox=y.default;var _=r(n(7));t.AtomicBox=_.default;var w=r(n(49));t.Key=w.default;var b=r(n(47));t.ModifierKey=b.default;var O=r(n(31));t.KeySignature=O.default;var m=o(n(33));t.keys=m;var C=o(n(32));t.modifierKeys=C;var S=r(n(120));t.Extension=S.default;var M=r(n(29));t.generateID=M.default},,,,,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this)||this;return r.at=t,r.tokens=n,r}return r(t,e),t.prototype.getOffsetAdjustment=function(){return{at:this.at,delta:this.tokens.length}},t.prototype.adjustOffsetBy=function(e){this.at>=e.at&&(this.at+=e.delta)},t.prototype.getAt=function(){return this.at},t.prototype.getTokens=function(){return this.tokens},t}(o(n(40)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this)||this;return r.from=t,r.to=n,r}return r(t,e),t.prototype.getOffsetAdjustment=function(){return{at:this.to,delta:this.from-this.to}},t.prototype.adjustOffsetBy=function(e){this.from>=e.at&&(this.from+=e.delta),this.to>=e.at&&(this.to+=e.delta)},t.prototype.getFrom=function(){return this.from},t.prototype.getTo=function(){return this.to},t}(o(n(40)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=e.call(this)||this;return t.children=[],t.onUpdatedSubscribers=[],t}return r(t,e),t.prototype.getType=function(){return"Doc"},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getWidth=function(){return 816},t.prototype.getHeight=function(){return 1056},t.prototype.getPadding=function(){return 40},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t}(o(n(22)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.width=0,n.height=0,n.padding=0,n.children=[],n.onUpdatedSubscribers=[],n}return r(t,e),t.prototype.getType=function(){return"DocRenderNode"},t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getPadding=function(){return this.padding},t.prototype.getInnerWidth=function(){return this.width-this.padding-this.padding},t.prototype.getInnerHeight=function(){return this.height-this.padding-this.padding},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.getModelSize=function(){if(void 0===this.modelSize){var e=2;this.children.forEach(function(t){e+=t.getModelSize()}),this.modelSize=e}return this.modelSize},t.prototype.convertSelectableOffsetToModelOffset=function(e){for(var t=0,n=1,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getSelectableSize();if(t+s>e)return n+i.convertSelectableOffsetToModelOffset(e-t);t+=s,n+=i.getModelSize()}throw new Error("Selectable offset "+e+" is out of range.")},t.prototype.onModelUpdated=function(e){this.id=e.getID(),this.width=e.getWidth(),this.height=e.getHeight(),this.padding=e.getPadding(),this.selectableSize=void 0,this.modelSize=void 0},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t}(o(n(13)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e}return e.prototype.getID=function(){return this.id},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(44)),s=o(n(29)),a=function(e){function t(){return e.call(this,s.default())||this}return r(t,e),t}(i.default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(39));t.Insert=o.default;var i=r(n(41));t.Delete=i.default},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o(n(48)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.code=e}return e.prototype.getCode=function(){return this.code},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o(n(48)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(78));t.moveTo=o.default;var i=r(n(79));t.moveHeadTo=i.default;var s=r(n(80));t.moveLeft=s.default;var a=r(n(81));t.moveRight=a.default;var u=r(n(82));t.moveHeadLeft=u.default;var f=r(n(83));t.moveHeadRight=f.default;var l=r(n(84));t.moveLeftByWord=l.default;var d=r(n(85));t.moveRightByWord=d.default;var c=r(n(86));t.moveHeadLeftByWord=c.default;var h=r(n(87));t.moveHeadRightByWord=h.default;var p=r(n(88));t.moveToLeftOfLine=p.default;var g=r(n(89));t.moveToRightOfLine=g.default;var v=r(n(90));t.moveHeadToLeftOfLine=v.default;var y=r(n(91));t.moveHeadToRightOfLine=y.default;var _=r(n(92));t.moveToLineAbove=_.default;var w=r(n(93));t.moveToLineBelow=w.default;var b=r(n(94));t.moveHeadToLineAbove=b.default;var O=r(n(95));t.moveHeadToLineBelow=O.default;var m=r(n(96));t.moveToLeftOfDoc=m.default;var C=r(n(97));t.moveToRightOfDoc=C.default;var S=r(n(98));t.moveHeadToLeftOfDoc=S.default;var M=r(n(99));t.moveHeadToRightOfDoc=M.default;var P=r(n(100));t.selectAll=P.default},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n}return r(t,e),t.prototype.resolveSelectableOffsetToNodeOffset=function(e){for(var t=0,n=0,r=this.children.length;n<r;n++){var o=this.children[n];if(t+o.getSelectableSize()>e)return o.resolveSelectableOffsetToNodeOffset(e-t);t+=o.getSelectableSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(o(n(10)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o(n(10)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n,r,o){var i=e.call(this,t,n)||this;return i.content=r,i.breakable=o,i}return r(t,e),t.prototype.getType=function(){return"TextAtomicRenderNode"},t.prototype.getSelectableSize=function(){return this.content.length},t.prototype.getContent=function(){return this.content},t.prototype.getBreakable=function(){return this.breakable},t}(o(n(114)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(7)),s=o(n(117)),a={fontFamily:"Arial",fontSize:18,fontWeight:400,lineHeight:36,letterSpacing:0},u=function(e){function t(t){var n=e.call(this,t)||this;return n.content="",n}return r(t,e),t.prototype.getWidth=function(){if(void 0===this.width||void 0===this.height){var e=s.default(this.content,a);this.width=e.width,this.height=e.height}return this.width},t.prototype.getWidthWithoutTrailingWhitespace=function(){if(void 0===this.widthWithoutTrailingWhitespace)if(this.breakable){var e=s.default(this.content.substring(0,this.content.length-1),a);this.widthWithoutTrailingWhitespace=e.width}else this.widthWithoutTrailingWhitespace=this.getWidth();return this.widthWithoutTrailingWhitespace},t.prototype.getHeight=function(){if(void 0===this.width||void 0===this.height){var e=s.default(this.content,a);this.width=e.width,this.height=e.height}return this.height},t.prototype.getContent=function(){return this.content},t.prototype.getSelectableSize=function(){return this.content.length},t.prototype.onRenderUpdated=function(e){this.content=e.getContent(),this.breakable=e.getBreakable(),this.width=void 0,this.height=void 0},t.prototype.resolveViewportPositionToSelectableOffset=function(e){for(var t=0,n=0,r=this.content.length;n<r;n++){var o=s.default(this.content.substring(0,n),a).width;if(!(o<e))return e-t<o-e?n-1:n;t=o}return e-t<this.getWidth()-e?this.content.length-1:this.content.length},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){if(0===e&&t===this.getSelectableSize())return[{left:0,right:0,top:0,bottom:0,width:this.getWidth(),height:this.getHeight()}];var n=s.default(this.content.substring(0,e),a),r=s.default(this.content.substring(0,t),a);return[{left:n.width,right:this.getWidth()-r.width,top:0,bottom:0,width:r.width-n.width,height:this.getHeight()}]},t}(i.default);t.default=u},,,,function(e,t,n){e.exports=n(126)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(67)),i=r(n(69)),s=r(n(70)),a=r(n(71)),u=r(n(73)),f=r(n(105)),l=r(n(106)),d=r(n(107)),c=function(){function e(e,t){this.config=e,this.cursor=new d.default(this),this.tokenizer=new o.default(this.config,t),this.state=this.tokenizer.getState(),this.dispatcher=new f.default(this),this.parser=new i.default(this.config,this.state),this.renderEngine=new s.default(this.config,this.parser.getDoc()),this.layoutEngine=new a.default(this.config,this.renderEngine.getDocRenderNode()),this.presenter=new u.default(this),this.extensionProvider=new l.default(this)}return e.prototype.getConfig=function(){return this.config},e.prototype.getCursor=function(){return this.cursor},e.prototype.getState=function(){return this.state},e.prototype.getDispatcher=function(){return this.dispatcher},e.prototype.getDocViewNode=function(){return this.presenter.getDocViewNode()},e.prototype.getRenderEngine=function(){return this.renderEngine},e.prototype.getLayoutEngine=function(){return this.layoutEngine},e.prototype.getPresenter=function(){return this.presenter},e.prototype.mount=function(e){this.domWrapper=e,this.presenter.mount(e),this.extensionProvider.onMounted()},e.prototype.registerExtension=function(e){this.extensionProvider.registerExtension(e)},e.prototype.convertSelectableOffsetToModelOffset=function(e){return this.renderEngine.getDocRenderNode().convertSelectableOffsetToModelOffset(e)},e}();t.default=c},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,i=r(n(11)),s=r(n(12)),a=r(n(68));!function(e){e[e.NewToken=0]="NewToken",e[e.NewTag=1]="NewTag",e[e.Tag=2]="Tag",e[e.TagAttributes=3]="TagAttributes",e[e.TagAttributesString=4]="TagAttributesString",e[e.TagAttributesStringEscape=5]="TagAttributesStringEscape",e[e.CloseTag=6]="CloseTag"}(o||(o={}));var u=function(){function e(e,t){this.config=e,this.markup=t,this.tokenizerState=o.NewToken,this.state=new a.default,this.tokens=[],this.tagBuffer="",this.attributesBuffer="",this.ran=!1}return e.prototype.getState=function(){return this.ran||this.run(),this.state},e.prototype.run=function(){for(var e,t=this.markup,n=0,r=t.length;n<r;n++)switch(e=t[n],this.tokenizerState){case o.NewToken:if(/</.test(e)){this.newTag(e);break}this.appendChar(e);break;case o.NewTag:if(/A-Z/.test(e)){this.appendCharToTag(e);break}if(/\//.test(e)){this.closeTag(e);break}case o.Tag:if(/[A-Za-z]/.test(e)){this.appendCharToTag(e);break}if(/{/.test(e)){this.newAttributes(e);break}case o.TagAttributes:if(/"/.test(e)){this.newAttributesString(e);break}if(/>/.test(e)){this.endTag(e);break}this.appendCharToAttributes(e);break;case o.TagAttributesString:if(/"/.test(e)){this.endAttributesString(e);break}if(/\\/.test(e)){this.escapeNextAttributesStringChar(e);break}this.appendCharToAttributes(e);break;case o.TagAttributesStringEscape:this.appendCharToAttributes(e);break;case o.CloseTag:if(/>/.test(e)){this.endCloseTag(e);break}default:throw new Error("Unexpected character "+e+" at offset "+n+".")}this.state.setTokens(this.tokens),this.ran=!0},e.prototype.newTag=function(e){this.tokenizerState=o.NewTag},e.prototype.appendChar=function(e){this.tokens.push(e)},e.prototype.appendCharToTag=function(e){this.tagBuffer+=e,this.tokenizerState=o.Tag},e.prototype.newAttributes=function(e){this.attributesBuffer+=e,this.tokenizerState=o.TagAttributes},e.prototype.appendCharToAttributes=function(e){this.attributesBuffer+=e,this.tokenizerState===o.TagAttributesStringEscape&&(this.tokenizerState=o.TagAttributesString)},e.prototype.newAttributesString=function(e){this.attributesBuffer+=e,this.tokenizerState=o.TagAttributesString},e.prototype.endTag=function(e){var t;try{t=JSON.parse(this.attributesBuffer)}catch(r){throw new Error("Invalid attributes JSON: "+this.attributesBuffer+".")}if(!("id"in t))throw new Error("Missing id in attributes JSON: "+this.attributesBuffer+".");if(!this.tagBuffer)throw new Error("Open tag type cannot be empty.");var n=new i.default(this.tagBuffer,t);this.tokens.push(n),this.attributesBuffer="",this.tagBuffer="",this.tokenizerState=o.NewToken},e.prototype.endAttributesString=function(e){this.attributesBuffer+=e,this.tokenizerState=o.TagAttributes},e.prototype.escapeNextAttributesStringChar=function(e){this.tokenizerState=o.TagAttributesStringEscape},e.prototype.closeTag=function(e){this.tokenizerState=o.CloseTag},e.prototype.endCloseTag=function(e){var t=new s.default;this.tokens.push(t),this.tokenizerState=o.NewToken},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(11)),i=r(n(12)),s=r(n(39)),a=r(n(41)),u=function(){function e(){this.tokens=[],this.onUpdatedSubscribers=[]}return e.prototype.setTokens=function(e){this.tokens=e,this.onUpdated()},e.prototype.getTokens=function(){return this.tokens},e.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},e.prototype.applyTransformation=function(e){var t=this,n=e.getOperations();if(0!==n.length){var r=[];n.forEach(function(e){var n;if(r.forEach(function(t){return e.adjustOffsetBy(t)}),e instanceof s.default)(n=t.tokens).splice.apply(n,[e.getAt(),0].concat(e.getTokens()));else{if(!(e instanceof a.default))throw new Error("Unknown state transformation operation encountered.");for(t.tokens.splice(e.getFrom(),e.getTo()-e.getFrom());t.tokens[e.getFrom()-1]instanceof o.default&&t.tokens[e.getFrom()]instanceof i.default;)t.tokens.splice(e.getFrom()-1,2)}r.push(e.getOffsetAdjustment())}),this.onUpdated()}},e.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,s=o(n(11)),a=o(n(12)),u=o(n(42)),f=o(n(23)),l=o(n(24));!function(e){e[e.NewDoc=0]="NewDoc",e[e.NewNode=1]="NewNode",e[e.LeafNode=2]="LeafNode"}(i||(i={}));var d=function(){return function(){}}(),c=function(e){function t(t,n){var r=e.call(this)||this;return r.offset=t,r.child=n,r}return r(t,e),t.prototype.shiftOffset=function(e){this.offset+=e},t.prototype.getOffset=function(){return this.offset},t.prototype.getChild=function(){return this.child},t}(d),h=function(e){function t(t,n){var r=e.call(this)||this;return r.fromOffset=t,r.toOffset=n,r}return r(t,e),t.prototype.shiftOffset=function(e){this.fromOffset+=e,this.toOffset+=e},t.prototype.getFromOffset=function(){return this.fromOffset},t.prototype.getToOffset=function(){return this.toOffset},t}(d),p=function(){function e(e){if(this.node=e,this.invertedChildrenMap=new Map,e instanceof u.default||e instanceof f.default){this.children=e.getChildren();for(var t=void 0,n=0,r=this.children.length;n<r;n++)t=this.children[n],this.invertedChildrenMap.set(t.getID(),n)}else this.children=[];this.childIteratorOffset=0,this.operationsBuffer=[],this.operationsBufferFlushed=!1}return e.prototype.getNode=function(){return this.node},e.prototype.findChild=function(e){var t=this.invertedChildrenMap.get(e);return void 0===t?-1:t},e.prototype.getChildAt=function(e){if(e<this.childIteratorOffset)throw new Error("Cannot get child at offset "+e+", child iterator offset is already at "+this.childIteratorOffset+".");if(e<0||e>this.children.length-1)throw new Error("Child offset "+e+" is out of valid range 0-"+(this.children.length-1)+".");return this.children[e]},e.prototype.insertChild=function(e){if(this.operationsBufferFlushed)throw new Error("Cannot append more operations after flushing.");var t=new c(this.childIteratorOffset,e);this.operationsBuffer.push(t)},e.prototype.deleteChildrenTo=function(e){if(this.operationsBufferFlushed)throw new Error("Cannot append more child operations after flushing.");if(e<this.childIteratorOffset)throw new Error("Cannot delete children to offset "+e+", iterator offset is already at "+this.childIteratorOffset+".");if(e>this.childIteratorOffset){var t=new h(this.childIteratorOffset,e-1);this.operationsBuffer.push(t)}this.childIteratorOffset=e+1},e.prototype.deleteRemainingChildren=function(){if(this.operationsBufferFlushed)throw new Error("Cannot append more child operations after flushing.");if(this.childIteratorOffset<this.children.length){var e=new h(this.childIteratorOffset,this.children.length-1);this.operationsBuffer.push(e)}},e.prototype.flushOperationsBuffer=function(){var e;if(this.operationsBuffer.length>0){var t=this.node;if(!(t instanceof u.default||t instanceof f.default))throw new Error("Cannot flush operations for node "+t.getID()+", node has no children.");for(var n=void 0,r=0,o=this.operationsBuffer.length;r<o;r++){var i=void 0;if((n=this.operationsBuffer[r])instanceof c)t.insertChild(n.getChild(),n.getOffset()),i=1;else{if(!(n instanceof h))throw new Error("Unknown operation.");for(var s=t.getChildren().slice(n.getFromOffset(),n.getToOffset()+1),a=0,l=s.length;a<l;a++)t.deleteChild(s[a]);i=0-s.length}if(0!==i)for(a=r;a<o;a++)this.operationsBuffer[a].shiftOffset(i)}e=!0}else e=!1;return this.operationsBufferFlushed=!0,e},e}(),g=function(){function e(){this.elements=[]}return e.prototype.push=function(e){this.elements.push(e)},e.prototype.pop=function(){return this.elements.pop()},e.prototype.peek=function(){return this.elements[this.elements.length-1]},e}(),v=function(){function e(e,t){var n=this;this.config=e,this.state=t,this.parserState=i.NewDoc,this.doc=new u.default,this.stack=new g,this.contentBuffer="",this.ran=!1,this.version=0,this.state.subscribeOnUpdated(function(){n.parserState=i.NewDoc,n.run()})}return e.prototype.getDoc=function(){return this.ran||this.run(),this.doc},e.prototype.run=function(){for(var e,t=this.state.getTokens(),n=0,r=t.length;n<r;n++)switch(e=t[n],this.parserState){case i.NewDoc:if(e instanceof s.default&&"Doc"===e.getType()){this.newDoc(e);break}case i.NewNode:if(e instanceof s.default){this.newNode(e);break}if("string"===typeof e){this.appendToContent(e);break}if(e instanceof a.default){this.closeNode(e);break}this.appendToContent(e);break;case i.LeafNode:if("string"===typeof e){this.appendToContent(e);break}if(e instanceof a.default){this.closeNode(e);break}default:throw new Error("Unexpected token at offset "+n+".")}this.ran=!0,this.version++,this.doc.onUpdated()},e.prototype.newDoc=function(e){var t=this.doc,n=e.getAttributes();t.setID(n.id),this.stack.push(new p(t)),this.parserState=i.NewNode},e.prototype.newNode=function(e){var t=this.stack.peek();if(void 0===t)throw new Error("Unexpected end of doc encountered.");var n,r=t.findChild(e.getAttributes().id);r<0?((n=new(this.config.getNodeClass(e.getType()))(t.getNode())).setVersion(this.version),t.insertChild(n)):(n=t.getChildAt(r),t.deleteChildrenTo(r));var o=e.getAttributes();n.setID(o.id),this.stack.push(new p(n))},e.prototype.appendToContent=function(e){this.contentBuffer+=e,this.parserState=i.LeafNode},e.prototype.closeNode=function(e){var t=this.stack.pop();if(void 0===t)throw new Error("Unexpected end of doc encountered.");t.deleteRemainingChildren();var n=t.flushOperationsBuffer(),r=t.getNode();r instanceof l.default&&r.getContent()!==this.contentBuffer&&(r.setContent(this.contentBuffer),r.setVersion(this.version)),n&&r.setVersion(this.version),this.propagateVersionToAncestors(r),this.contentBuffer="",this.parserState=i.NewNode},e.prototype.propagateVersionToAncestors=function(e){for(var t,n=e;(n instanceof f.default||n instanceof l.default)&&!((t=n.getParent()).getVersion()>=n.getVersion());)t.setVersion(n.getVersion()),n=t},e}();t.default=v},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(25)),s=o(n(42)),a=o(n(23)),u=o(n(24)),f=o(n(43)),l=o(n(26)),d=o(n(27)),c=function(e){function t(t,n){var r=e.call(this)||this;return r.config=t,r.lastVersion=n,r}return r(t,e),t.prototype.getSrcNodeChildren=function(e){return e instanceof s.default?e.getChildren():e instanceof a.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){return e instanceof f.default?e.getChildren().slice():e instanceof l.default?e.getChildren().slice():[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getID()===n})},t.prototype.insertNode=function(e,t,n){if(e instanceof f.default&&t instanceof a.default){var r=new(this.config.getRenderNodeClass(t.getType()))(t.getID(),e);if(!(r instanceof l.default))throw new Error("Error inserting render node, expecting block render node.");return r.setVersion(t.getVersion()),e.insertChild(r,n),r}if(e instanceof l.default&&t instanceof u.default){var o=new(this.config.getRenderNodeClass(t.getType()))(t.getID(),e);if(!(o instanceof d.default))throw new Error("Error inserting render node, expecting inline render node.");return o.setVersion(t.getVersion()),e.insertChild(o,n),o}throw new Error("Error inserting render node, type mismatch.")},t.prototype.deleteNode=function(e,t){if(e instanceof f.default&&t instanceof l.default)e.deleteChild(t);else{if(!(e instanceof l.default&&t instanceof d.default))throw new Error("Error deleting render node, type mismatch.");e.deleteChild(t)}},t.prototype.updateNode=function(e,t){if(e instanceof f.default&&t instanceof s.default)return!(t.getVersion()<=this.lastVersion)&&(e.onModelUpdated(t),e.setVersion(t.getVersion()),!0);if(e instanceof l.default&&t instanceof a.default)return!(t.getVersion()<=this.lastVersion)&&(e.onModelUpdated(t),e.setVersion(t.getVersion()),!0);if(e instanceof d.default&&t instanceof u.default)return!(t.getVersion()<=this.lastVersion)&&(e.onModelUpdated(t),e.setVersion(t.getVersion()),!0);throw new Error("Error updating render node, type mismatch.")},t}(i.default),h=function(){function e(e,t){var n=this;this.config=e,this.doc=t,this.docRenderNode=new f.default(t.getID()),this.ran=!1,this.version=-1,this.doc.subscribeOnUpdated(function(){n.run()})}return e.prototype.getDocRenderNode=function(){return this.ran||this.run(),this.docRenderNode},e.prototype.run=function(){new c(this.config,this.version).syncNodes(this.doc,this.docRenderNode),this.ran=!0,this.version=this.doc.getVersion(),this.docRenderNode.onUpdated()},e.prototype.getNextVersion=function(){return this.docRenderNode.getVersion()+1},e}();t.default=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(25)),s=o(n(43)),a=o(n(26)),u=o(n(27)),f=o(n(28)),l=o(n(15)),d=o(n(9)),c=o(n(30)),h=o(n(6)),p=function(e){function t(t,n){var r=e.call(this)||this;return r.config=t,r.lastVersion=n,r.updatedPageFlowBoxes=[],r.updatedLineFlowBoxes=[],r}return r(t,e),t.prototype.getUpdatedPageFlowBoxes=function(){return Array.from(this.updatedPageFlowBoxes)},t.prototype.getUpdatedLineFlowBoxes=function(){return Array.from(this.updatedLineFlowBoxes)},t.prototype.getSrcNodeChildren=function(e){return e instanceof s.default?e.getChildren():e instanceof a.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){if(e instanceof f.default){var t=[];return e.getChildren().map(function(e){t.push.apply(t,e.getChildren())}),t}if(e instanceof l.default){var n=[];return e.getChildren().map(function(e){n.push.apply(n,e.getChildren())}),n}return[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getRenderNodeID()===n})},t.prototype.insertNode=function(e,t,n){if(e instanceof f.default&&t instanceof a.default){var r=new(this.config.getBoxClass(t.getType()))(t.getID());if(!(r instanceof l.default))throw new Error("Error inserting box, expecting block box.");r.setVersion(t.getVersion());for(var o=e.getChildren(),i=0,s=!1,p=0,g=o.length;p<g;p++){if(i+(v=o[p]).getChildren().length>=n){v.insertChild(r,n-i),this.updatedPageFlowBoxes.push(v),s=!0;break}i+=v.getChildren().length}if(!s){var v=new c.default(e.getWidth(),e.getHeight(),e.getPadding());e.insertChild(v,o.length),v.insertChild(r,0),this.updatedPageFlowBoxes.push(v)}return r}if(e instanceof l.default&&t instanceof u.default){var y=new(this.config.getBoxClass(t.getType()))(t.getID());if(!(y instanceof d.default))throw new Error("Error inserting box, expecting inline box.");y.setVersion(t.getVersion());var _=e.getChildren();for(i=0,s=!1,p=0,g=_.length;p<g;p++){if(i+(w=_[p]).getChildren().length>=n){w.insertChild(y,n-i),this.updatedLineFlowBoxes.push(w),s=!0;break}i+=w.getChildren().length}if(!s){var w=new h.default(e.getWidth());e.insertChild(w,_.length),w.insertChild(y,0),this.updatedLineFlowBoxes.push(w)}return y}throw new Error("Error inserting box, type mismatch.")},t.prototype.deleteNode=function(e,t){if(e instanceof f.default&&t instanceof l.default)for(var n=e.getChildren(),r=0,o=n.length;r<o;r++){var i=n[r];if(i.getChildren().indexOf(t)>=0){i.deleteChild(t),0===i.getChildren().length?e.deleteChild(i):this.updatedPageFlowBoxes.push(i);break}}else{if(!(e instanceof l.default&&t instanceof d.default))throw new Error("Error deleting box, type mismatch.");var s=e.getChildren();for(r=0,o=s.length;r<o;r++){var a=s[r];if(a.getChildren().indexOf(t)>=0){a.deleteChild(t),0===a.getChildren().length?e.deleteChild(a):this.updatedLineFlowBoxes.push(a);break}}}},t.prototype.updateNode=function(e,t){if(e instanceof f.default&&t instanceof s.default){if(t.getVersion()<=this.lastVersion)return!1;for(var n=void 0,r=0;r<e.getChildren().length;r++){for(var o=e.getChildren()[r],i=0;i<o.getChildren().length;i++){var c=o.getChildren()[i];n&&c.getRenderNodeID()===n.getRenderNodeID()&&(n.join(c),o.deleteChild(c),i--),n=c}0===o.getChildren().length?(e.deleteChild(o),r--):this.updatedPageFlowBoxes.push(o)}return e.onRenderUpdated(t),e.setVersion(t.getVersion()),!0}if(e instanceof l.default&&t instanceof a.default){if(t.getVersion()<=this.lastVersion)return!1;for(n=void 0,r=0;r<e.getChildren().length;r++){var h=e.getChildren()[r];for(i=0;i<h.getChildren().length;i++){var p=h.getChildren()[i];n&&p.getRenderNodeID()===n.getRenderNodeID()&&(n.join(p),h.deleteChild(p),i--),n=p}0===h.getChildren().length?(e.deleteChild(h),r--):this.updatedLineFlowBoxes.push(h)}return e.onRenderUpdated(t),e.setVersion(t.getVersion()),(g=e.getParent()).getVersion()<t.getVersion()&&g.setVersion(t.getVersion()),this.updatedPageFlowBoxes.push(g),!0}var g;if(e instanceof d.default&&t instanceof u.default)return!(t.getVersion()<=this.lastVersion)&&(e.onRenderUpdated(t),e.setVersion(t.getVersion()),(g=e.getParent()).getVersion()<t.getVersion()&&g.setVersion(t.getVersion()),this.updatedLineFlowBoxes.push(g),!0);throw new Error("Error updating box, type mismatch.")},t}(i.default),g=function(){function e(e,t){var n=this;this.config=e,this.docRenderNode=t,this.docBox=new f.default(t.getID()),this.docBox.onRenderUpdated(t),this.ran=!1,this.version=-1,this.docRenderNode.subscribeOnUpdated(function(){n.run()})}return e.prototype.getDocBox=function(){return this.ran||this.run(),this.docBox},e.prototype.run=function(){var e=this,t=new p(this.config,this.version);t.syncNodes(this.docRenderNode,this.docBox);var n=this.docRenderNode.getVersion(),r=t.getUpdatedLineFlowBoxes(),o=void 0;r.forEach(function(t){o&&o===t||(e.reflowLineFlowBox(t,n),o=t)});var i=t.getUpdatedPageFlowBoxes(),s=void 0;i.forEach(function(t){s&&s===t||(e.reflowPageFlowBox(t,n),s=t)}),this.ran=!0,this.version=n,this.docBox.onUpdated()},e.prototype.reflowLineFlowBox=function(e,t){e.onRenderUpdated(),e.setVersion(t);var n=e,r=n.getParent();if(!(r.getChildren().indexOf(n)<0))for(var o=n.getWidth(),i=0,s=0;;){for(var a=n.getChildren()[s];i+a.getWidthWithoutTrailingWhitespace()>o;)for(var u=0;u<a.getChildren().length;u++){var f=a.getChildren()[u];if(i+f.getWidthWithoutTrailingWhitespace()>o){var l=n.splitAt(s+1);n.setVersion(t),l.setVersion(t),r.insertChild(l,r.getChildren().indexOf(n)+1),n=l,s=0;var d=a.splitAt(u);a.setVersion(t),d.setVersion(t),n.insertChild(d,n.getChildren().indexOf(a)+1),a=d,u=0,i=0;break}i+=f.getWidth()}if(i+=a.getWidth(),++s===n.getChildren().length){var c=r.getChildren().indexOf(n)+1;if(c>=r.getChildren().length)break;var h=r.getChildren()[c];if(!(i+h.getChildren()[0].getChildren()[0].getWidth()<=n.getWidth()))break;h.getChildren().forEach(function(e){n.insertChild(e,n.getChildren().length),e.setVersion(t)}),r.deleteChild(h)}}},e.prototype.reflowPageFlowBox=function(e,t){var n=this;e.onRenderUpdated(),e.setVersion(t);var r=e,o=r.getParent();if(!(o.getChildren().indexOf(r)<0))for(var i=r.getInnerHeight(),s=0,a=0;;){for(var u=r.getChildren()[a];s+u.getHeight()>i;)for(var f=0;f<u.getChildren().length;f++){var l=u.getChildren()[f];if(s+l.getHeight()>i){var d=r.splitAt(a+1);r.setVersion(t),d.setVersion(t),o.insertChild(d,o.getChildren().indexOf(r)+1),r=d,a=0;var c=u.splitAt(f);u.setVersion(t),this.bumpVersionForBlockBoxAndDescendents(c,t),r.insertChild(c,r.getChildren().indexOf(u)+1),u=c,f=0,s=0;break}s+=l.getHeight()}if(s+=u.getHeight(),++a===r.getChildren().length){var h=o.getChildren().indexOf(r)+1;if(h>=o.getChildren().length)break;var p=o.getChildren()[h];if(!(s+p.getChildren()[0].getChildren()[0].getHeight()<=r.getInnerHeight()))break;p.getChildren().forEach(function(e){r.insertChild(e,r.getChildren().length),n.bumpVersionForBlockBoxAndDescendents(e,t)}),o.deleteChild(p)}}},e.prototype.bumpVersionForBlockBoxAndDescendents=function(e,t){e.setVersion(t),e.getChildren().forEach(function(e){e.setVersion(t),e.getChildren().forEach(function(e){e.setVersion(t)})})},e}();t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(0!==t){var r=e[t-1];n.top===r.top&&n.height===r.height&&n.left===r.left+r.width&&(r.width+=n.width,r.right=n.right,e.splice(t,1),t-=1)}}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(74)),s=o(n(28)),a=o(n(30)),u=o(n(15)),f=o(n(6)),l=o(n(9)),d=o(n(101)),c=o(n(51)),h=o(n(102)),p=o(n(103)),g=o(n(52)),v=o(n(104)),y=function(e){function t(t,n,r,o){var i=e.call(this)||this;return i.config=t,i.lastVersion=n,i.idMap=r,i.domObserver=o,i}return r(t,e),t.prototype.getSrcNodeChildren=function(e){return e instanceof s.default?e.getChildren():e instanceof a.default?e.getChildren():e instanceof u.default?e.getChildren():e instanceof f.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){return e instanceof d.default?e.getChildren().slice():e instanceof h.default?e.getChildren().slice():e instanceof c.default?e.getChildren().slice():e instanceof p.default?e.getChildren().slice():[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getID()===n})},t.prototype.insertNode=function(e,t,n){var r=this;if(e instanceof d.default&&t instanceof a.default){var o=new h.default(t.getID());return e.insertChild(o,n),this.idMap.set(t.getID(),[t,o]),setTimeout(function(){r.domObserver.connectPage(o)}),o}if(e instanceof h.default&&t instanceof u.default){var i=new(this.config.getViewNodeClass(t.getType()))(t.getID());if(!(i instanceof c.default))throw new Error("Error inserting view node, expected block view to be built from block box.");return e.insertChild(i,n),this.idMap.set(t.getID(),[t,i]),i}if(e instanceof c.default&&t instanceof f.default){var s=new p.default(t.getID());return e.insertChild(s,n),this.idMap.set(t.getID(),[t,s]),s}if(e instanceof p.default&&t instanceof l.default){var v=new(this.config.getViewNodeClass(t.getType()))(t.getID());if(!(v instanceof g.default))throw new Error("Error inserting view node, expected inline view to be built from inline box.");return e.insertChild(v,n),this.idMap.set(t.getID(),[t,v]),v}throw new Error("Error inserting view node, type mismatch.")},t.prototype.deleteNode=function(e,t){var n=this;if(e instanceof d.default&&t instanceof h.default)return e.deleteChild(t),this.idMap.delete(t.getID()),void setTimeout(function(){n.domObserver.disconnectPage(t)});if(e instanceof h.default&&t instanceof c.default)return e.deleteChild(t),void this.idMap.delete(t.getID());if(e instanceof c.default&&t instanceof p.default)return e.deleteChild(t),void this.idMap.delete(t.getID());if(e instanceof p.default&&t instanceof g.default)return e.deleteChild(t),void this.idMap.delete(t.getID());throw new Error("Error deleting view node, type mismatch.")},t.prototype.updateNode=function(e,t){if(e instanceof d.default&&t instanceof s.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof h.default&&t instanceof a.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof c.default&&t instanceof u.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof p.default&&t instanceof f.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof g.default&&t instanceof l.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);throw new Error("Error updating view node, type mismatch.")},t}(o(n(25)).default),_=function(){function e(e){var t=this;this.editor=e;var n=e.getLayoutEngine().getDocBox(),r=e.getCursor();this.docViewNode=new d.default(n.getID()),this.cursorView=new v.default(e),this.domObserver=new i.default(e),this.onMountedSubscribers=[],this.mounted=!1,this.version=-1,this.idMap=new Map,n.subscribeOnUpdated(function(){t.run()}),r.subscribeOnUpdated(function(){t.updateCursorView()})}return e.prototype.mount=function(e){this.mounted||(this.domWrapper=e,this.run(),e.appendChild(this.docViewNode.getDOMContainer()),this.mounted=!0,this.domObserver.connectDoc(this.docViewNode),this.onMountedSubscribers.forEach(function(e){return e()}))},e.prototype.getDocViewNode=function(){return this.docViewNode},e.prototype.subscribeOnMounted=function(e){this.onMountedSubscribers.push(e)},e.prototype.getPageDOMContentContainer=function(e){var t=this.docViewNode.getChildren();if(e<0||e>=t.length)throw new Error("Page offset "+e+" is out of range.");return t[e].getDOMContentContainer()},e.prototype.resolveDOMNodePosition=function(e,t){for(var n=e instanceof HTMLElement?e:e.parentElement;n;){var r=n.getAttribute("data-tw-id");if(r){var o=this.idMap.get(r);if(!o)return-1;var i=o[0],s=o[1];if(!(i instanceof l.default&&s instanceof g.default))return-1;for(var d=s.resolveSelectionOffset(t),c=i;c;)if(c instanceof l.default){for(var h=(p=c.getParent().getChildren()).indexOf(c);h>0;)d+=p[--h].getSelectableSize();c=c.getParent()}else if(c instanceof f.default){for(h=(p=c.getParent().getChildren()).indexOf(c);h>0;)d+=p[--h].getSelectableSize();c=c.getParent()}else if(c instanceof u.default){for(h=(p=c.getParent().getChildren()).indexOf(c);h>0;)d+=p[--h].getSelectableSize();c=c.getParent()}else{if(!(c instanceof a.default))break;var p;for(h=(p=c.getParent().getChildren()).indexOf(c);h>0;)d+=p[--h].getSelectableSize();c=c.getParent()}return d}n=n.parentElement}return-1},e.prototype.getViewNodeByID=function(e){var t=this.idMap.get(e);if(!t)throw new Error("View node "+e+" is not registered.");return t[1]},e.prototype.run=function(){new y(this.editor.getConfig(),this.version,this.idMap,this.domObserver).syncNodes(this.editor.getLayoutEngine().getDocBox(),this.docViewNode),this.version=this.editor.getLayoutEngine().getDocBox().getVersion(),this.docViewNode.onUpdated(),this.updateCursorView()},e.prototype.updateCursorView=function(){this.cursorView.onUpdated(this.editor.getCursor(),this.editor.getLayoutEngine().getDocBox(),this.docViewNode.getChildren())},e}();t.default=_},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=n(46),a=r(n(3)),u=n(1),f=r(n(77)),l=o(n(50));var d=function(){function e(e){var t=this;this.onFocus=function(e){t.isFocused=!0},this.onBlur=function(e){t.isFocused=!1},this.onMouseDown=function(e){if(e.target instanceof HTMLElement){for(var n=!1,r=e.target;r;){if("page"===r.getAttribute("data-tw-role")){n=!0;break}r=r.parentElement}if(n){t.isMouseDown=!0;var o=t.resolveScreenPosition(e.clientX,e.clientY);o<0||t.editor.getDispatcher().dispatchCommand(l.moveTo(o))}}},this.onMouseMove=function(e){if(t.isMouseDown){var n=t.resolveScreenPosition(e.clientX,e.clientY);n<0||t.editor.getDispatcher().dispatchCommand(l.moveHeadTo(n))}},this.onMouseUp=function(e){t.isMouseDown=!1},this.onKeyDown=function(e){var n=f.default(e);n&&(t.editor.getDispatcher().dispatchKeyPress(n)&&e.preventDefault())},this.handleMutations=function(e){t.pauseMutationObserver(),t.syncCursorWithDOM();var n=new i.default;e.forEach(function(e){"childList"===e.type?t.handleChildListMutation(e,n):"characterData"===e.type&&t.handleCharacterDataMutation(e,n)}),t.editor.getState().applyTransformation(n),t.resumeMutationObserver()},this.editor=e,this.isFocused=!1,this.isMouseDown=!1,this.mutationObserver=new MutationObserver(this.handleMutations),this.pageViewNodes=[]}return e.prototype.connectDoc=function(e){this.docViewNode=e;var t=e.getDOMContainer();t.addEventListener("focus",this.onFocus),t.addEventListener("blur",this.onBlur),t.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("keydown",this.onKeyDown)},e.prototype.connectPage=function(e){this.pageViewNodes.indexOf(e)>=0||(this.pauseMutationObserver(),this.pageViewNodes.push(e),this.resumeMutationObserver())},e.prototype.disconnectPage=function(e){var t=this.pageViewNodes.indexOf(e);t<0||(this.pauseMutationObserver(),this.pageViewNodes.splice(t,1),this.resumeMutationObserver())},e.prototype.resolveScreenPosition=function(e,t){if(!this.docViewNode)throw new Error("No doc view is being observed.");for(var n=this.docViewNode.getChildren(),r=this.editor.getLayoutEngine().getDocBox().getChildren(),o=0,i=0,s=n.length;i<s;i++){var a=n[i],u=r[i],f=a.getDOMContainer().getBoundingClientRect();if(f.left<=e&&f.right>=e&&f.top<=t&&f.bottom>=t){var l=e-f.left,d=t-f.top;return o+u.resolveViewportPositionToSelectableOffset(l,d)}o+=u.getSelectableSize()}return-1},e.prototype.resumeMutationObserver=function(){var e=this;this.pageViewNodes.forEach(function(t){var n=t.getDOMContentContainer();e.mutationObserver.observe(n,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0})})},e.prototype.pauseMutationObserver=function(){this.mutationObserver.disconnect()},e.prototype.handleChildListMutation=function(e,t){var n=this;e.addedNodes.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e);var r=n.editor.getPresenter().resolveDOMNodePosition(e,0);if(!(r<0)){var o=n.editor.convertSelectableOffsetToModelOffset(r);t.addOperation(new s.Insert(o,(e.textContent||"").split("")))}}),e.removedNodes.forEach(function(r){e instanceof HTMLElement&&e.nextSibling?e.target.insertBefore(e.nextSibling,r):e.target.appendChild(r);var o=n.editor.getPresenter().resolveDOMNodePosition(r,0);if(!(o<0)){var i=n.editor.convertSelectableOffsetToModelOffset(o),a=n.editor.convertSelectableOffsetToModelOffset(o+(r.textContent||"").length);t.addOperation(new s.Delete(i,a))}})},e.prototype.handleCharacterDataMutation=function(e,t){var n=e.oldValue||"",r=e.target.textContent||"",o=e.target;o.textContent=e.oldValue;var i=this.editor.getPresenter().resolveDOMNodePosition(o,0);if(!(i<0)){var a=function(e,t){for(var n=0,r=e.length,o=0,i=t.length;e[n]===t[o]&&n<r&&o<i;)n++,o++;for(;e[r-1]===t[i-1]&&r>n&&i>o;)r--,i--;return[n,r,o,i]}(n,r),u=a[0],f=a[1],l=a[2],d=a[3],c=this.editor,h=c.convertSelectableOffsetToModelOffset(i+u),p=c.convertSelectableOffsetToModelOffset(i+f),g=h,v=r.slice(l,d).split("");h<p&&t.addOperation(new s.Delete(h,p)),v.length>0&&t.addOperation(new s.Insert(g,v))}},e.prototype.syncCursorWithDOM=function(){var e=window.getSelection(),t=this.editor.getPresenter(),n=t.resolveDOMNodePosition(e.anchorNode,e.anchorOffset),r=t.resolveDOMNodePosition(e.focusNode,e.focusOffset),o=new a.default;o.addOperation(new u.MoveTo(n)),o.addOperation(new u.MoveHeadTo(r)),this.editor.getCursor().applyTransformation(o)},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.offset=e}return e.prototype.getOffset=function(){return this.offset},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.offset=e}return e.prototype.getOffset=function(){return this.offset},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(31)),s=n(32),a=o(n(33)),u={a:a.AKey,b:a.BKey,c:a.CKey,d:a.DKey,e:a.EKey,f:a.FKey,g:a.GKey,h:a.HKey,i:a.IKey,j:a.JKey,k:a.KKey,l:a.LKey,m:a.MKey,n:a.NKey,o:a.OKey,p:a.PKey,q:a.QKey,r:a.RKey,s:a.SKey,t:a.TKey,u:a.UKey,v:a.VKey,w:a.WKey,x:a.XKey,y:a.YKey,z:a.ZKey,A:a.AKey,B:a.BKey,C:a.CKey,D:a.DKey,E:a.EKey,F:a.FKey,G:a.GKey,H:a.HKey,I:a.IKey,J:a.JKey,K:a.KKey,L:a.LKey,M:a.MKey,N:a.NKey,O:a.OKey,P:a.PKey,Q:a.QKey,R:a.RKey,S:a.SKey,T:a.TKey,U:a.UKey,V:a.VKey,W:a.WKey,X:a.XKey,Y:a.YKey,Z:a.ZKey,Num1:a.Num1Key,Num2:a.Num2Key,Num3:a.Num3Key,Num4:a.Num4Key,Num5:a.Num5Key,Num6:a.Num6Key,Num7:a.Num7Key,Num8:a.Num8Key,Num9:a.Num9Key,Num0:a.Num0Key,Dash:a.DashKey,Equal:a.EqualKey,Space:a.SpaceKey,ArrowLeft:a.ArrowLeftKey,ArrowRight:a.ArrowRightKey,ArrowUp:a.ArrowUpKey,ArrowDown:a.ArrowDownKey,Backspace:a.BackspaceKey,Delete:a.DeleteKey,Enter:a.EnterKey};t.default=function(e){var t=[];e.altKey&&t.push(s.AltKey),e.ctrlKey&&t.push(s.CtrlKey),e.metaKey&&t.push(s.MetaKey),e.shiftKey&&t.push(s.ShiftKey);var n,r=(n=e.key)in u?u[n]:null;return r?new i.default(r,t):null}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(e){return function(t){var n=new i.default,r=new s.default;return r.addOperation(new a.MoveTo(e)),[n,r]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(e){return function(t){var n=new i.default,r=new s.default;return r.addOperation(new a.MoveHeadTo(e)),[n,r]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getAnchor(),u=r.getHead();if(o===u){if(u<1)return[t,n];n.addOperation(new a.MoveTo(u-1))}else o<u?n.addOperation(new a.MoveTo(o)):o>u&&n.addOperation(new a.MoveTo(u));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getAnchor(),u=r.getHead(),f=e.getLayoutEngine().getDocBox();if(o===u){if(u>=f.getSelectableSize()-1)return[t,n];n.addOperation(new a.MoveTo(u+1))}else o<u?n.addOperation(new a.MoveTo(u)):o>u&&n.addOperation(new a.MoveTo(o));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead();return o<1?[t,n]:(n.addOperation(new a.MoveHeadTo(o-1)),[t,n])}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead();return o>=e.getLayoutEngine().getDocBox().getSelectableSize()-1?[t,n]:(n.addOperation(new a.MoveHeadTo(o+1)),[t,n])}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(7));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getAtomicBoxLevel();if(f.getSelectableOffset()>0)n.addOperation(new a.MoveTo(o-f.getSelectableOffset()));else{var l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an atomic box.");var d=l.getPreviousSibling();d?n.addOperation(new a.MoveTo(o-d.getSelectableSize())):n.addOperation(new a.MoveTo(o))}return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(7));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getAtomicBoxLevel(),l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an atomic box.");if(f.getSelectableOffset()<l.getSelectableSize()-1)n.addOperation(new a.MoveTo(o-f.getSelectableOffset()+l.getSelectableSize()-1));else{var d=l.getNextSibling();d?n.addOperation(new a.MoveTo(o-f.getSelectableOffset()+l.getSelectableSize()-1+d.getSelectableSize())):n.addOperation(new a.MoveTo(o))}return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(7));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getAtomicBoxLevel();if(f.getSelectableOffset()>0)n.addOperation(new a.MoveHeadTo(o-f.getSelectableOffset()));else{var l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an atomic box.");var d=l.getPreviousSibling();d&&n.addOperation(new a.MoveHeadTo(o-d.getSelectableSize()))}return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(7));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getAtomicBoxLevel(),l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an atomic box.");if(f.getSelectableOffset()<l.getSelectableSize()-1)n.addOperation(new a.MoveHeadTo(o-f.getSelectableOffset()+l.getSelectableSize()-1));else{var d=l.getNextSibling();d&&n.addOperation(new a.MoveHeadTo(o-f.getSelectableOffset()+l.getSelectableSize()-1+d.getSelectableSize()))}return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),u=e.getLayoutEngine().getDocBox().resolvePosition(o).getLineFlowBoxLevel();return u.getSelectableOffset()>0?n.addOperation(new a.MoveTo(o-u.getSelectableOffset())):n.addOperation(new a.MoveTo(o)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getLineFlowBoxLevel(),l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");return f.getSelectableOffset()<l.getSelectableSize()-1?n.addOperation(new a.MoveTo(o-f.getSelectableOffset()+l.getSelectableSize()-1)):n.addOperation(new a.MoveTo(o)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),u=e.getLayoutEngine().getDocBox().resolvePosition(o).getLineFlowBoxLevel();return u.getSelectableOffset()>0?n.addOperation(new a.MoveHeadTo(o-u.getSelectableOffset())):n.addOperation(new a.MoveHeadTo(o)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getLineFlowBoxLevel(),l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");return f.getSelectableOffset()<l.getSelectableSize()-1?n.addOperation(new a.MoveHeadTo(o-f.getSelectableOffset()+l.getSelectableSize()-1)):n.addOperation(new a.MoveHeadTo(o)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=Math.min(r.getAnchor(),r.getHead()),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getLineFlowBoxLevel(),l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");var d=l.getPreviousSibling();if(d){var c=r.getLeftAnchor();c||(c=l.resolveSelectableOffsetRangeToViewportBoundingRects(f.getSelectableOffset(),f.getSelectableOffset())[0].left),n.setLeftAnchor(c);var h=d.resolveViewportPositionToSelectableOffset(c);n.addOperation(new a.MoveTo(o-f.getSelectableOffset()-d.getSelectableSize()+h))}else n.addOperation(new a.MoveTo(o-f.getSelectableOffset()));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=Math.max(r.getAnchor(),r.getHead()),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getLineFlowBoxLevel(),l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");var d=l.getNextSibling();if(d){var c=r.getLeftAnchor();c||(c=l.resolveSelectableOffsetRangeToViewportBoundingRects(f.getSelectableOffset(),f.getSelectableOffset())[0].left),n.setLeftAnchor(c);var h=d.resolveViewportPositionToSelectableOffset(c);n.addOperation(new a.MoveTo(o-f.getSelectableOffset()+l.getSelectableSize()+h))}else n.addOperation(new a.MoveTo(o-f.getSelectableOffset()+l.getSelectableSize()-1));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getLineFlowBoxLevel(),l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");var d=l.getPreviousSibling();if(d){var c=r.getLeftAnchor();c||(c=l.resolveSelectableOffsetRangeToViewportBoundingRects(f.getSelectableOffset(),f.getSelectableOffset())[0].left),n.setLeftAnchor(c);var h=d.resolveViewportPositionToSelectableOffset(c);n.addOperation(new a.MoveHeadTo(o-f.getSelectableOffset()-d.getSelectableSize()+h))}else n.addOperation(new a.MoveHeadTo(o-f.getSelectableOffset()));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new i.default,n=new s.default,r=e.getCursor();if(!r)return[t,n];var o=r.getHead(),f=e.getLayoutEngine().getDocBox().resolvePosition(o).getLineFlowBoxLevel(),l=f.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");var d=l.getNextSibling();if(d){var c=r.getLeftAnchor();c||(c=l.resolveSelectableOffsetRangeToViewportBoundingRects(f.getSelectableOffset(),f.getSelectableOffset())[0].left),n.setLeftAnchor(c);var h=d.resolveViewportPositionToSelectableOffset(c);n.addOperation(new a.MoveHeadTo(o-f.getSelectableOffset()+l.getSelectableSize()+h))}else n.addOperation(new a.MoveHeadTo(o-f.getSelectableOffset()+l.getSelectableSize()-1));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default;return e.getCursor()?(n.addOperation(new a.MoveTo(0)),[t,n]):[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default;if(!e.getCursor())return[t,n];var r=e.getLayoutEngine().getDocBox();return n.addOperation(new a.MoveTo(r.getSelectableSize()-1)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default;return e.getCursor()?(n.addOperation(new a.MoveHeadTo(0)),[t,n]):[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default;if(!e.getCursor())return[t,n];var r=e.getLayoutEngine().getDocBox();return n.addOperation(new a.MoveHeadTo(r.getSelectableSize()-1)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),s=r(n(3)),a=o(n(1));t.default=function(){return function(e){var t=new i.default,n=new s.default;if(!e.getCursor())return[t,n];var r=e.getLayoutEngine().getDocBox();return n.addOperation(new a.MoveTo(0)),n.addOperation(new a.MoveHeadTo(r.getSelectableSize()-1)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.onUpdatedSubscribers=[],n.domContainer=document.createElement("div"),n.domContainer.contentEditable="true",n.domContainer.spellcheck=!1,n.domContainer.className="tw--doc",n.domContainer.style.outline="none",n.domContainer.style.textAlign="left",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize()},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t.prototype.onDeleted=function(){},t.prototype.resolveSelectableOffsetToNodeOffset=function(e){for(var t=0,n=0,r=this.children.length;n<r;n++){var o=this.children[n];if(t+o.getSelectableSize()>e)return o.resolveSelectableOffsetToNodeOffset(e-t);t+=o.getSelectableSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(o(n(10)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.domContainer=document.createElement("div"),n.domContainer.className="tw--page",n.domContainer.setAttribute("data-tw-role","page"),n.domContainer.style.position="relative",n.domContentContainer=document.createElement("div"),n.domContentContainer.className="tw--page-content",n.domContentContainer.setAttribute("data-tw-role","page-content"),n.domContainer.appendChild(n.domContentContainer),n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.getDOMContentContainer=function(){return this.domContentContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContentContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContentContainer.childNodes.length?this.domContentContainer.appendChild(n):this.domContentContainer.insertBefore(n,this.domContentContainer.childNodes[t])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onDeleted=function(){this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer),this.children.map(function(e){e.onDeleted()})},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize(),this.domContainer.style.width=e.getWidth()+"px",this.domContainer.style.height=e.getHeight()+"px",this.domContainer.style.padding=e.getPadding()+"px"},t.prototype.resolveSelectableOffsetToNodeOffset=function(e){for(var t=0,n=0,r=this.children.length;n<r;n++){var o=this.children[n];if(t+o.getSelectableSize()>e)return o.resolveSelectableOffsetToNodeOffset(e-t);t+=o.getSelectableSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(o(n(10)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.domContainer=document.createElement("span"),n.domContainer.className="tw--line",n.domContainer.style.whiteSpace="pre-wrap",n.domContainer.style.width="100%",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.getDOMContentContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onDeleted=function(){this.children.map(function(e){e.onDeleted()}),this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer)},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize()},t.prototype.resolveSelectableOffsetToNodeOffset=function(e){for(var t=0,n=0,r=this.children.length;n<r;n++){var o=this.children[n];if(t+o.getSelectableSize()>e)return o.resolveSelectableOffsetToNodeOffset(e-t);t+=o.getSelectableSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(o(n(10)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(31)),s=o(n(33)),a=o(n(32)),u=n(50),f=function(){function e(e){this.editor=e,this.leftAnchor=null,this.blinkState=!1,this.blinkInterval=null,this.domCaret=document.createElement("div"),this.domCaret.className="tw--cursor-caret",this.domCaret.style.position="absolute",this.domCaret.style.userSelect="none",this.domCaret.style.pointerEvents="none",this.domCaret.style.width="2px",this.domCaret.style.marginLeft="-1px",this.domCaret.style.background="hsla(213, 100%, 50%, 1)",this.domSelections=[],this.bindKeys()}return e.prototype.onUpdated=function(e,t,n){this.updateView(e,t,n)},e.prototype.getLeftAnchor=function(){return this.leftAnchor},e.prototype.startBlinking=function(){var e=this;null===this.blinkInterval&&(this.blinkInterval=setInterval(function(){e.blinkState?e.domCaret.style.visibility="hidden":e.domCaret.style.visibility="visible",e.blinkState=!e.blinkState},500))},e.prototype.stopBlinking=function(){null!==this.blinkInterval&&(this.blinkState=!0,this.domCaret.style.visibility="visible",clearInterval(this.blinkInterval),this.blinkInterval=null)},e.prototype.updateView=function(e,t,n){for(var r=this;this.domSelections.length>0;){var o=this.domSelections[0];o.parentElement&&o.parentElement.removeChild(o),this.domSelections.splice(0,1)}var i,s,a,u,f,l=Math.min(Math.max(e.getAnchor(),0),t.getSelectableSize()-1),d=Math.min(Math.max(e.getHead(),0),t.getSelectableSize()-1),c=t.resolveSelectableOffsetRangeToViewportBoundingRects(Math.min(l,d),Math.max(l,d)),h=-1,p=-1,g=-1,v=-1;(c.forEach(function(e,t){var o=n[t].getDOMContainer();e.forEach(function(e,n){if(h<0&&(h=t,p=n),g=t,v=n,0!==e.width){var i=document.createElement("div");i.className="tw--cursor-selection",i.style.position="absolute",i.style.top=e.top+"px",i.style.left=e.left+"px",i.style.width=e.width+"px",i.style.height=e.height+"px",i.style.userSelect="none",i.style.pointerEvents="none",o.appendChild(i),r.domSelections.push(i)}})}),d<l)?(i=h,s=(f=c[h][p]).left,a=f.top,u=f.height):(i=g,s=(f=c[g][v]).left+f.width,a=f.top,u=f.height);this.domCaret.style.top=a+"px",this.domCaret.style.left=s+"px",this.domCaret.style.height=u+"px";var y=n[i].getDOMContainer();this.domCaret.parentElement&&this.domCaret.parentElement!==y&&this.domCaret.parentElement.removeChild(this.domCaret),this.domCaret.parentElement||y.appendChild(this.domCaret),this.domCaret.scrollIntoView({block:"nearest"});var _=this.editor.getPresenter().getDocViewNode(),w=_.resolveSelectableOffsetToNodeOffset(l),b=w[0],O=w[1],m=_.resolveSelectableOffsetToNodeOffset(d),C=m[0],S=m[1],M=document.createRange();l<d?(M.setStart(b,O),M.setEnd(C,S)):(M.setStart(C,S),M.setEnd(b,O));var P=window.getSelection();P.empty(),P.addRange(M),this.stopBlinking(),this.startBlinking()},e.prototype.bindKeys=function(){var e=this.editor.getConfig(),t=this.editor.getDispatcher();e.bindKey(new i.default(s.ArrowLeftKey),function(){return t.dispatchCommand(u.moveLeft())}),e.bindKey(new i.default(s.ArrowRightKey),function(){return t.dispatchCommand(u.moveRight())}),e.bindKey(new i.default(s.ArrowLeftKey,[a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadLeft())}),e.bindKey(new i.default(s.ArrowRightKey,[a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadRight())}),e.bindKey(new i.default(s.ArrowLeftKey,[a.AltKey]),function(){return t.dispatchCommand(u.moveLeftByWord())}),e.bindKey(new i.default(s.ArrowRightKey,[a.AltKey]),function(){return t.dispatchCommand(u.moveRightByWord())}),e.bindKey(new i.default(s.ArrowLeftKey,[a.AltKey,a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadLeftByWord())}),e.bindKey(new i.default(s.ArrowRightKey,[a.AltKey,a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadRightByWord())}),e.bindKey(new i.default(s.ArrowLeftKey,[a.MetaKey]),function(){return t.dispatchCommand(u.moveToLeftOfLine())}),e.bindKey(new i.default(s.ArrowRightKey,[a.MetaKey]),function(){return t.dispatchCommand(u.moveToRightOfLine())}),e.bindKey(new i.default(s.ArrowLeftKey,[a.MetaKey,a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToLeftOfLine())}),e.bindKey(new i.default(s.ArrowRightKey,[a.MetaKey,a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToRightOfLine())}),e.bindKey(new i.default(s.ArrowUpKey),function(){return t.dispatchCommand(u.moveToLineAbove())}),e.bindKey(new i.default(s.ArrowDownKey),function(){return t.dispatchCommand(u.moveToLineBelow())}),e.bindKey(new i.default(s.ArrowUpKey,[a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToLineAbove())}),e.bindKey(new i.default(s.ArrowDownKey,[a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToLineBelow())}),e.bindKey(new i.default(s.ArrowUpKey,[a.MetaKey]),function(){return t.dispatchCommand(u.moveToLeftOfDoc())}),e.bindKey(new i.default(s.ArrowDownKey,[a.MetaKey]),function(){return t.dispatchCommand(u.moveToRightOfDoc())}),e.bindKey(new i.default(s.ArrowUpKey,[a.MetaKey,a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToLeftOfDoc())}),e.bindKey(new i.default(s.ArrowDownKey,[a.MetaKey,a.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToRightOfDoc())}),e.bindKey(new i.default(s.AKey,[a.MetaKey]),function(){return t.dispatchCommand(u.selectAll())})},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.editor=e}return e.prototype.dispatchCommand=function(e){var t=this.editor.getState(),n=this.editor.getCursor(),r=e(this.editor),o=r[0],i=r[1];t.applyTransformation(o),n.applyTransformation(i)},e.prototype.dispatchKeyPress=function(e){var t=this.editor.getConfig().getKeyBindings(),n=e.getCode();if(!t.has(n))return!1;var r=t.get(n);return 0!==r.length&&(r.forEach(function(e){return e()}),!0)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.editor=e,this.extensions=[]}return e.prototype.registerExtension=function(e){this.extensions.push(e),e.$onRegistered(this.editor)},e.prototype.onMounted=function(){this.extensions.forEach(function(e){e.onMounted&&e.onMounted()})},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(e){this.editor=e,this.anchor=0,this.head=0,this.leftAnchor=null,this.onUpdatedSubscribers=[]}return e.prototype.getAnchor=function(){return this.anchor},e.prototype.getHead=function(){return this.head},e.prototype.getLeftAnchor=function(){return this.leftAnchor},e.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},e.prototype.applyTransformation=function(e){var t=this;this.leftAnchor=e.getLeftAnchor();var n=e.getOperations();0!==n.length&&(n.forEach(function(e){if(e instanceof r.MoveTo){var n=e.getOffset();t.anchor=n,t.head=n}else{if(!(e instanceof r.MoveHeadTo))throw new Error("Unrecognized cursor transformation operation.");n=e.getOffset();t.head=n}}),this.onUpdatedSubscribers.forEach(function(e){return e()}))},e}();t.default=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(109)),i=r(n(110)),s=r(n(111)),a=r(n(112)),u=r(n(115)),f=r(n(116)),l=r(n(118)),d=r(n(119)),c=function(){function e(){this.nodeClasses=new Map,this.renderNodeClasses=new Map,this.boxClasses=new Map,this.viewNodeClasses=new Map,this.keyBindings=new Map,this.registerNodeClass("Paragraph",o.default),this.registerNodeClass("Text",i.default),this.registerRenderNodeClass("Paragraph",s.default),this.registerRenderNodeClass("Text",a.default),this.registerBoxClass("ParagraphBlockRenderNode",u.default),this.registerBoxClass("TextInlineRenderNode",f.default),this.registerViewNodeClass("ParagraphBlockBox",l.default),this.registerViewNodeClass("TextInlineBox",d.default)}return e.prototype.registerNodeClass=function(e,t){this.nodeClasses.set(e,t)},e.prototype.getNodeClass=function(e){if(!this.nodeClasses.has(e))throw new Error("Node type "+e+" is not registered.");return this.nodeClasses.get(e)},e.prototype.registerRenderNodeClass=function(e,t){this.renderNodeClasses.set(e,t)},e.prototype.getRenderNodeClass=function(e){if(!this.renderNodeClasses.has(e))throw new Error("No render node class registered for node type "+e+".");return this.renderNodeClasses.get(e)},e.prototype.registerBoxClass=function(e,t){this.boxClasses.set(e,t)},e.prototype.getBoxClass=function(e){var t=this.boxClasses.get(e);if(!t)throw new Error("No box class registered for render node type "+e+".");return t},e.prototype.registerViewNodeClass=function(e,t){this.viewNodeClasses.set(e,t)},e.prototype.getViewNodeClass=function(e){var t=this.viewNodeClasses.get(e);if(!t)throw new Error("No view node class registered for box type "+e+".");return t},e.prototype.bindKey=function(e,t){var n=e.getCode();this.keyBindings.has(n)||this.keyBindings.set(n,[]),this.keyBindings.get(n).push(t)},e.prototype.getKeyBindings=function(){return this.keyBindings},e}();t.default=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"Paragraph"},t}(o(n(23)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"Text"},t}(o(n(24)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"ParagraphBlockRenderNode"},t}(o(n(26)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(113)),s=o(n(27)),a=o(n(53)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"TextInlineRenderNode"},t.prototype.onModelUpdated=function(t){var n=this;e.prototype.onModelUpdated.call(this,t),this.children=[],i.default(t.getContent()).forEach(function(e,r){var o=new a.default(t.getID()+"-"+r,n,e.text,e.breakable);n.children.push(o)})},t}(s.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[" ","\n","\t"];t.default=function(e){for(var t=[],n="",o=0,i=e.length;o<i;o++){var s=e[o];n+=s,r.includes(s)&&(t.push({text:n,breakable:!0}),n="")}return n.length>0&&t.push({text:n,breakable:!1}),t}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this,t)||this;return r.version=0,r.parent=n,r}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getParent=function(){return this.parent},t.prototype.getModelSize=function(){return this.getSelectableSize()},t.prototype.convertSelectableOffsetToModelOffset=function(e){return e},t}(o(n(13)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"ParagraphBlockBox"},t.prototype.splitAt=function(e){if(e>this.children.length)throw new Error("Error cleaving ParagraphBlockBox, offset "+e+" is out of range.");var n=this.children.splice(e),r=new t(this.renderNodeID);return n.forEach(function(e,t){r.insertChild(e,t)}),this.height=void 0,this.selectableSize=void 0,r},t.prototype.join=function(e){var t=this;if(e.getRenderNodeID()!==this.renderNodeID)throw new Error("Cannot join block boxes with different render node IDs.");var n=this.children.length;e.getChildren().forEach(function(e){t.insertChild(e,n),n++}),this.height=void 0,this.selectableSize=void 0},t.prototype.resolveViewportPositionToSelectableOffset=function(e,t){for(var n=0,r=0,o=0,i=this.children.length;o<i;o++){var s=this.children[o],a=s.getHeight();if(t>=r&&t<=r+a){n+=s.resolveViewportPositionToSelectableOffset(e);break}n+=s.getSelectableSize(),r+=a}return n},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],o=0,i=0,s=function(s,u){var f=a.children[s],l=f.getHeight(),d=f.getSelectableSize(),c=Math.max(e-o,0),h=Math.min(t-o,d);c<=d&&h>=0&&f.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(e){r.push({left:e.left,right:e.right,top:i+e.top,bottom:n.getHeight()-i-l+e.bottom,width:e.width,height:l})});o+=f.getSelectableSize(),i+=l},a=this,u=0,f=this.children.length;u<f&&o<=t;u++)s(u);return r},t}(o(n(15)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(9)),s=o(n(54)),a=o(n(53)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"TextInlineBox"},t.prototype.onRenderUpdated=function(t){var n=this;e.prototype.onRenderUpdated.call(this,t),this.children=[],t.getChildren().forEach(function(e,t){if(!(e instanceof a.default))throw new Error("Expecting child of TextInlineRenderNode to be AtomicInlineRenderNode.");var r=new s.default(e.getID());n.insertChild(r,t),r.onRenderUpdated(e)})},t.prototype.splitAt=function(e){if(e>this.children.length)throw new Error("Error cleaving TextInlineBox, offset "+e+" is out of range.");var n=this.children.splice(e),r=new t(this.renderNodeID);return n.forEach(function(e,t){r.insertChild(e,t)}),this.width=void 0,this.height=void 0,this.selectableSize=void 0,r},t.prototype.join=function(e){var t=this;if(e.getRenderNodeID()!==this.renderNodeID)throw new Error("Cannot join inline boxes with different render node IDs.");var n=this.children.length;e.getChildren().forEach(function(e){t.insertChild(e,n),n++}),this.height=void 0,this.selectableSize=void 0},t}(i.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.$iframe=document.createElement("iframe"),this.$iframe.src="about:blank",this.$iframe.style.width="0",this.$iframe.style.height="0",this.$iframe.style.border="none",document.body.appendChild(this.$iframe),this.$textContainers=new Map}return e.prototype.getTextContainerElement=function(e){var t=function(e){return JSON.stringify(e)}(e);if(!this.$textContainers.has(t)){var n=document.createElement("span");n.style.display="inline-block",n.style.whiteSpace="pre",n.style.fontFamily=e.fontFamily,n.style.fontSize=e.fontSize+"px",n.style.fontWeight=""+e.fontWeight,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=""+e.letterSpacing,this.$iframe.contentDocument.body.appendChild(n),this.$textContainers.set(t,n)}return this.$textContainers.get(t)},e.prototype.measure=function(e,t){var n=e.replace(/\n$/," "),r=this.getTextContainerElement(t);r.innerHTML!==n&&(r.innerHTML=n);var o=r.getBoundingClientRect();return{width:o.width,height:o.height}},e}();t.TextMeasurer=r;var o=new r;t.default=function(e,t){return o.measure(e,t)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.domContainer=document.createElement("div"),n.domContainer.className="tw--paragraph-block",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onDeleted=function(){this.children.map(function(e){e.onDeleted()}),this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer)},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize(),this.domContainer.style.width=e.getWidth()+"px",this.domContainer.style.height=e.getHeight()+"px"},t}(o(n(51)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(54)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.domContainer=document.createElement("span"),n.domContainer.className="tw--text-inline",n.domContainer.setAttribute("data-tw-id",t),n.domContainer.setAttribute("data-tw-role","inline"),n.domContainer.style.color="transparent",n.domContainer.style.textShadow="0 0 0 black",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.onDeleted=function(){this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer)},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize();var t=e.getChildren().map(function(e){if(e instanceof i.default)return e.getContent();throw new Error("Invalid child AtomicBox encountered for TextInlineBox.")}).join("");this.domContainer.innerText=t},t.prototype.resolveSelectionOffset=function(e){return e},t.prototype.resolveSelectableOffsetToNodeOffset=function(e){if(!this.domContainer.firstChild)throw new Error("Text inline view is not built properly.");return[this.domContainer.firstChild,e]},t}(o(n(52)).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.$onRegistered=function(e){this.editor=e,this.onRegistered&&this.onRegistered()},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Extension has not yet been registered.");return this.editor},e}();t.default=r},,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(16),s=n.n(i),a=(n(64),n(17)),u=n(18),f=n(20),l=n(19),d=n(21),c=n(4),h=n(5),p=(n(65),n(34));function g(){var e=Object(c.a)(["\n  text-align: center;\n"]);return g=function(){return e},e}var v=h.a.div(g()),y=function(e){function t(e){var n;Object(a.a)(this,t),(n=Object(f.a)(this,Object(l.a)(t).call(this,e))).domRef=void 0,n.domRef=o.a.createRef();var r=new p.Config,i=new p.Editor(r,e.initialMarkup);return n.state={editor:i},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.domRef.current;this.state.editor.mount(e)}},{key:"render",value:function(){return o.a.createElement(v,{ref:this.domRef})}}]),t}(o.a.Component);function _(){var e=Object(c.a)(["\n  text-transform: uppercase;\n  font-weight: 500;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.65);\n  border-top: 1px solid rgba(0, 0, 0, 0.45);\n  padding-top: 10px;\n  cursor: default;\n"]);return _=function(){return e},e}function w(){var e=Object(c.a)(["\n  text-align: center;\n  background: rgba(0, 0, 0, 0.04);\n  padding-bottom: 30px;\n"]);return w=function(){return e},e}function b(){var e=Object(c.a)(["\n  display: inline-block;\n  padding: 15px 60px;\n  outline: none;\n  color: rgba(0, 0, 0, 0.85);\n  text-decoration: none;\n  font-size: 20px;\n  background: rgba(0, 0, 0, 0.04);\n  border-radius: 3px;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  &:hover {\n    color: rgba(0, 0, 0, 1);\n    background: rgba(0, 0, 0, 0.09);\n    border-color: rgba(0, 0, 0, 0.25);\n  }\n"]);return b=function(){return e},e}function O(){var e=Object(c.a)(["\n  margin-top: 90px;\n"]);return O=function(){return e},e}function m(){var e=Object(c.a)(["\n  font-size: 20px;\n  font-weight: 400;\n  color: rgba(0, 0, 0, 0.85);\n  margin: 30px 0 0;\n"]);return m=function(){return e},e}function C(){var e=Object(c.a)(["\n  font-size: 30px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.85);\n  margin: 90px 0 0;\n"]);return C=function(){return e},e}function S(){var e=Object(c.a)(["\n  color: rgba(0, 0, 0, 0.65);\n  font-size: 42px;\n  letter-spacing: 0.02em;\n  padding-bottom: 10px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.65);\n"]);return S=function(){return e},e}function M(){var e=Object(c.a)(["\n"]);return M=function(){return e},e}function P(){var e=Object(c.a)(["\n  text-align: center;\n  padding: 90px 60px;\n  background: rgba(0, 0, 0, 0.04);\n"]);return P=function(){return e},e}function x(){var e=Object(c.a)(["\n"]);return x=function(){return e},e}var E='\n<Doc {"id": "{{id}}"}>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      This is the document, start typing here.\n    </>\n  </>\n</>\n'.split("\n").map(function(e){return e.trim()}).join("").replace(/\.<\/>/g,".\n</>").replace(/{{id}}/g,function(){return"".concat(Math.random().toString(36).substring(2))}),N=h.a.div(x()),T=h.a.div(P()),D=h.a.div(M()),j=h.a.span(S()),K=h.a.h1(C()),B=h.a.h2(m()),A=h.a.div(O()),z=h.a.a(b()),V=h.a.div(w()),k=h.a.span(_()),L=function(e){function t(){return Object(a.a)(this,t),Object(f.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(N,null,o.a.createElement(T,null,o.a.createElement(D,null,o.a.createElement(j,null,"Taleweaver")),o.a.createElement(K,null,"Word processing in your browser."),o.a.createElement(B,null,"Open source editor delivering true word processing experience."),o.a.createElement(A,null,o.a.createElement(z,{href:"https://github.com/yuzhenmi/taleweaver"},"GitHub"))),o.a.createElement(V,null,o.a.createElement(k,null,"\u2193 Check it out \u2193")),o.a.createElement(y,{initialMarkup:E}))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[58,1,2]]]);
//# sourceMappingURL=main.1dc77b9a.chunk.js.map