(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(55));t.Editor=i.default;var s=r(n(73));t.Config=s.default;var a=r(n(85));t.StateTransformation=a.default;var u=o(n(86));t.stateOperations=u;var f=r(n(87));t.CursorTransformation=f.default;var c=o(n(42));t.cursorOperations=c;var l=r(n(15));t.DocBox=l.default;var d=r(n(17));t.PageFlowBox=d.default;var h=r(n(8));t.BlockBox=h.default;var p=r(n(7));t.LineFlowBox=p.default;var g=r(n(3));t.InlineBox=g.default;var v=r(n(16));t.AtomicBox=v.default;var y=r(n(41));t.Key=y.default;var _=r(n(38));t.ModifierKey=_.default;var w=r(n(36));t.KeySignature=w.default;var b=o(n(40));t.keys=b;var m=o(n(37));t.modifierKeys=m;var O=r(n(88));t.Extension=O.default},,function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(16)),i=r(n(3)),s=r(n(7)),a=function(){function e(e,t,n,r){this.layoutNode=e,this.selectableOffset=t,this.parent=n||null,this.level=n?n.getLevel()+1:0,this.child=r?r(this):null}return e.prototype.getLayoutNode=function(){return this.layoutNode},e.prototype.getSelectableOffset=function(){return this.selectableOffset},e.prototype.getLevel=function(){return this.level},e.prototype.getParent=function(){return this.parent},e.prototype.getChild=function(){return this.child},e.prototype.getAtomicBoxLevel=function(){return this.child?this.child.getAtomicBoxLevel():this},e.prototype.getLineFlowBoxLevel=function(){if(this.layoutNode instanceof s.default)return this;if(this.layoutNode instanceof o.default||this.layoutNode instanceof i.default){var e=this.getParent();if(!e)throw new Error("No parent.");return e.getLineFlowBoxLevel()}var t=this.getChild();if(!t)throw new Error("No child.");return t.getLineFlowBoxLevel()},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.children=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){if(void 0===this.width){var e=0;this.getChildren().forEach(function(t){e+=t.getWidth()}),this.width=e}return this.width},t.prototype.getHeight=function(){if(void 0===this.height){var e=0;this.getChildren().forEach(function(t){var n=t.getHeight();n>e&&(e=n)}),this.height=e}return this.height},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Inline box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this),this.width=void 0,this.height=void 0},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1),this.width=void 0,this.height=void 0},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Inline box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Inline box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(e){this.width=void 0,this.height=void 0,this.selectableSize=void 0},t.prototype.resolvePosition=function(e,t){var n=this;return new i.default(this,t,e,function(e){for(var r=0,o=0,i=n.children.length;o<i;o++){var s=n.children[o],a=s.getSelectableSize();if(r+a>t)return s.resolvePosition(e,t-r);r+=a}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e){for(var t=0,n=0,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getWidth();if(e>=n&&e<=n+s){t+=i.resolveViewportPositionToSelectableOffset(e-n);break}t+=i.getSelectableSize(),n+=s}return t},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],o=0,i=0,s=function(s,u){var f=a.children[s],c=f.getWidth(),l=f.getSelectableSize(),d=Math.max(e-o,0),h=Math.min(t-o,l);d<=l&&h>=0&&f.resolveSelectableOffsetRangeToViewportBoundingRects(d,h).forEach(function(e){r.push({left:i+e.left,right:n.getWidth()-i-c+e.right,top:0,bottom:0,width:e.width,height:n.getHeight()})});o+=f.getSelectableSize(),i+=c},a=this,u=0,f=this.children.length;u<f&&o<=t;u++)s(u);return r},t}(o(n(6)).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e}return e.prototype.getID=function(){return this.id},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e}return e.prototype.getID=function(){return this.id},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(31)),s=o(n(32)),a=function(e){function t(t){var n=e.call(this,t+"-"+s.default())||this;return n.renderNodeID=t,n}return r(t,e),t.prototype.getRenderNodeID=function(){return this.renderNodeID},t}(i.default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(61)),s=o(n(33)),a=o(n(2)),u=function(e){function t(t){var n=e.call(this)||this;return n.version=0,n.width=t,n.children=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){if(void 0===this.height){var e=0;this.getChildren().forEach(function(t){var n=t.getHeight();n>e&&(e=n)}),this.height=e}return this.height},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Line box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){e.getHeight();this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Line box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Line box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(){this.selectableSize=void 0},t.prototype.cleaveAt=function(e){if(e>this.children.length)throw new Error("Error cleaving LineFlowBox, offset "+e+" is out of range.");var n=this.children.splice(e);this.selectableSize=void 0,this.height=void 0;var r=new t(this.width);return n.forEach(function(e,t){r.insertChild(e,t)}),r},t.prototype.resolvePosition=function(e,t){var n=this;return new a.default(this,t,e,function(e){for(var r=0,o=0,i=n.children.length;o<i;o++){var s=n.children[o],a=s.getSelectableSize();if(r+a>t)return s.resolvePosition(e,t-r);r+=a}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e){for(var t=0,n=0,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getWidth();if(e>=n&&e<=n+s){t+=i.resolveViewportPositionToSelectableOffset(e-n);break}t+=i.getSelectableSize(),n+=s}return t===this.selectableSize?t-1:t},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],o=0,s=0,a=function(i,a){var f=u.children[i],c=f.getWidth(),l=f.getSelectableSize(),d=Math.max(e-o,0),h=Math.min(t-o,l);d<=l&&h>=0&&(d!==h||h!==l)&&f.resolveSelectableOffsetRangeToViewportBoundingRects(d,h).forEach(function(e){r.push({left:s+e.left,right:n.getWidth()-s-c+e.right,top:0,bottom:0,width:e.width,height:n.getHeight()})});o+=f.getSelectableSize(),s+=c},u=this,f=0,c=this.children.length;f<c&&o<=t;f++)a(f);return i.default(r),r},t}(s.default);t.default=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.width=0,n.children=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.getParent().getInnerWidth()},t.prototype.getHeight=function(){if(void 0===this.height){var e=0;this.children.forEach(function(t){e+=t.getHeight()}),this.height=e}return this.height},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Block box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Block box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Block box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(e){this.height=void 0,this.selectableSize=void 0},t.prototype.resolvePosition=function(e,t){var n=this;return new i.default(this,t,e,function(e){for(var r=0,o=0,i=n.children.length;o<i;o++){var s=n.children[o],a=s.getSelectableSize();if(r+a>t)return s.resolvePosition(e,t-r);r+=a}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t}(o(n(6)).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.size=2,this.selectableSize=0,this.version=0}return e.prototype.setID=function(e){this.id=e},e.prototype.getID=function(){return this.id},e.prototype.getSize=function(){return this.size},e.prototype.getSelectableSize=function(){return this.selectableSize},e.prototype.setVersion=function(e){this.version=e},e.prototype.getVersion=function(){return this.version},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n.children=[],n}return r(t,e),t.prototype.getParent=function(){return this.parent},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.onStateUpdated=function(e){},t}(o(n(9)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n.content="",n}return r(t,e),t.prototype.getParent=function(){return this.parent},t.prototype.setContent=function(e){this.content=e},t.prototype.getContent=function(){return this.content},t.prototype.onStateUpdated=function(e,t){this.content=t},t}(o(n(9)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.syncNodes=function(e,t){if(!this.updateNode(t,e))return!1;for(var n=this.getSrcNodeChildren(e),r=this.getDstNodeChildren(t),o=0,i=0,s=n.length;i<s;i++){var a=n[i],u=this.findSrcNodeInDstNodes(a,r);if(u<o){var f=this.insertNode(t,a,o);r.splice(o,0,f),this.syncNodes(a,f),o++}else{for(var c=o;c<u;c++){var l=r[o];this.deleteNode(t,l),r.splice(o,1)}var d=r[o];o++,this.syncNodes(a,d)}}for(i=o,s=r.length;i<s;i++){d=r[o];this.deleteNode(t,d),r.splice(o,1)}},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this,t)||this;return r.version=0,r.parent=n,r.children=[],r}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getParent=function(){return this.parent},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.onModelUpdated=function(e){this.selectableSize=void 0,this.modelSize=void 0},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.getModelSize=function(){if(void 0===this.modelSize){var e=2;this.children.forEach(function(t){e+=t.getModelSize()}),this.modelSize=e}return this.modelSize},t.prototype.convertSelectableOffsetToModelOffset=function(e){for(var t=0,n=1,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getSelectableSize();if(t+s>=e)return n+i.convertSelectableOffsetToModelOffset(e-t);t+=s,n+=i.getModelSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(o(n(5)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this,t)||this;return r.version=0,r.parent=n,r.children=[],r}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.getParent=function(){return this.parent},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.onModelUpdated=function(e){this.selectableSize=void 0,this.modelSize=void 0},t.prototype.getModelSize=function(){if(void 0===this.modelSize){var e=2;this.children.forEach(function(t){e+=t.getModelSize()}),this.modelSize=e}return this.modelSize},t.prototype.convertSelectableOffsetToModelOffset=function(e){for(var t=0,n=1,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getSelectableSize();if(t+s>=e)return n+i.convertSelectableOffsetToModelOffset(e-t);t+=s,n+=i.getModelSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(o(n(5)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.width=0,n.height=0,n.padding=0,n.children=[],n.onUpdatedSubscribers=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getPadding=function(){return this.padding},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(e){this.width=e.getWidth(),this.height=e.getHeight(),this.padding=e.getPadding(),this.selectableSize=void 0},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t.prototype.resolvePosition=function(e){var t=this;return new i.default(this,e,void 0,function(n){for(var r=0,o=0,i=t.children.length;o<i;o++){var s=t.children[o],a=s.getSelectableSize();if(r+a>e)return s.resolvePosition(n,e-r);r+=a}throw new Error("Selectable offset "+e+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e,t,n){if(e>=this.children.length)throw new Error("Page offset "+e+" is out of range.");for(var r=0,o=0;o<e;o++)r+=this.children[o].getSelectableSize();return r+this.children[e].resolveViewportPositionToSelectableOffset(t,n)},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){var n=[];this.children.forEach(function(){n.push([])});for(var r=0,o=function(o,s){var a=i.children[o],u=a.getSelectableSize(),f=Math.max(e-r,0),c=Math.min(t-r,u);f<=u&&c>=0&&a.resolveSelectableOffsetRangeToViewportBoundingRects(f,c).forEach(function(e){n[o].push({left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height})});r+=a.getSelectableSize()},i=this,s=0,a=this.children.length;s<a&&r<=t;s++)o(s);return n},t}(o(n(6)).default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.breakable=!0,n}return r(t,e),t.prototype.isBreakable=function(){return this.breakable},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Atomic box has no parent set.");return this.parent},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Atomic box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Atomic box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.resolvePosition=function(e,t){return new i.default(this,t,e)},t}(o(n(6)).default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),s=function(e){function t(t,n,r){var o=e.call(this)||this;return o.version=0,o.width=t,o.height=n,o.padding=r,o.children=[],o}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getInnerWidth=function(){return this.width-this.padding-this.padding},t.prototype.getInnerHeight=function(){return this.height-this.padding-this.padding},t.prototype.getPadding=function(){return this.padding},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Page flow box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Page flow box is not found in parent.");return t>0?e[t-1]:null},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Page flow box is not found in parent.");return t<e.length-1?e[t+1]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(){this.selectableSize=void 0},t.prototype.cleaveAt=function(e){if(e>this.children.length)throw new Error("Error cleaving PageFlowBox, offset "+e+" is out of range.");var n=this.children.splice(e);this.selectableSize=void 0;var r=new t(this.width,this.height,this.padding);return n.forEach(function(e,t){r.insertChild(e,t)}),r},t.prototype.resolvePosition=function(e,t){var n=this;return new i.default(this,t,e,function(e){for(var r=0,o=0,i=n.children.length;o<i;o++){var s=n.children[o],a=s.getSelectableSize();if(r+a>t)return s.resolvePosition(e,t-r);r+=a}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e,t){for(var n=0,r=0,o=0,i=this.children.length;o<i;o++){var s=this.children[o],a=s.getHeight();if(t>=r&&t<=r+a){n+=s.resolveViewportPositionToSelectableOffset(e,t-r);break}n+=s.getSelectableSize(),r+=a}return n},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],o=0,i=0,s=function(s,u){var f=a.children[s],c=f.getHeight(),l=f.getSelectableSize(),d=Math.max(e-o,0),h=Math.min(t-o,l);d<=l&&h>=0&&f.resolveSelectableOffsetRangeToViewportBoundingRects(d,h).forEach(function(e){r.push({left:e.left+n.padding,right:e.right+n.padding,top:i+e.top+n.padding,bottom:n.height-i-c+e.bottom+n.padding,width:e.width,height:e.height})});o+=f.getSelectableSize(),i+=c},a=this,u=0,f=this.children.length;u<f&&o<=t;u++)s(u);return r},t}(o(n(33)).default);t.default=s},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.type=e,this.attributes=t}return e.prototype.getType=function(){return this.type},e.prototype.getAttributes=function(){return this.attributes},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this)||this;return r.at=t,r.tokens=n,r}return r(t,e),t.prototype.getType=function(){return"Insert"},t.prototype.getAt=function(){return this.at},t.prototype.getTokens=function(){return this.tokens},t}(o(n(27)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this)||this;return r.from=t,r.to=n,r}return r(t,e),t.prototype.getType=function(){return"Delete"},t.prototype.getFrom=function(){return this.from},t.prototype.getTo=function(){return this.to},t}(o(n(27)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=e.call(this)||this;return t.children=[],t.onUpdatedSubscribers=[],t}return r(t,e),t.prototype.getType=function(){return"Doc"},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getWidth=function(){return 816},t.prototype.getHeight=function(){return 1056},t.prototype.getPadding=function(){return 60},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t}(o(n(9)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.width=0,n.height=0,n.padding=0,n.children=[],n.onUpdatedSubscribers=[],n}return r(t,e),t.prototype.getType=function(){return"DocRenderNode"},t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getPadding=function(){return this.padding},t.prototype.getInnerWidth=function(){return this.width-this.padding-this.padding},t.prototype.getInnerHeight=function(){return this.height-this.padding-this.padding},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.getModelSize=function(){if(void 0===this.modelSize){var e=2;this.children.forEach(function(t){e+=t.getModelSize()}),this.modelSize=e}return this.modelSize},t.prototype.convertSelectableOffsetToModelOffset=function(e){for(var t=0,n=1,r=0,o=this.children.length;r<o;r++){var i=this.children[r],s=i.getSelectableSize();if(t+s>=e)return n+i.convertSelectableOffsetToModelOffset(e-t);t+=s,n+=i.getModelSize()}throw new Error("Selectable offset "+e+" is out of range.")},t.prototype.onModelUpdated=function(e){this.id=e.getID(),this.width=e.getWidth(),this.height=e.getHeight(),this.padding=e.getPadding(),this.selectableSize=void 0,this.modelSize=void 0},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t}(o(n(5)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e}return e.prototype.getID=function(){return this.id},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Math.random().toString(36).substring(2)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(31)),s=o(n(32)),a=function(e){function t(){return e.call(this,s.default())||this}return r(t,e),t}(i.default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o(n(4)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o(n(4)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=[]),this.key=e,this.modifierKeys=t}return e.prototype.getCode=function(){var e=this.modifierKeys.map(function(e){return e.getCode()}).sort(),t=this.key.getCode();return e.concat([t]).join("-")},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(38)),i=new o.default("Alt");t.AltKey=i;var s=new o.default("Ctrl");t.CtrlKey=s;var a=new o.default("Meta");t.MetaKey=a;var u=new o.default("Shift");t.ShiftKey=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o(n(39)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.code=e}return e.prototype.getCode=function(){return this.code},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(41)),i=new o.default("A");t.AKey=i;var s=new o.default("B");t.BKey=s;var a=new o.default("C");t.CKey=a;var u=new o.default("D");t.DKey=u;var f=new o.default("E");t.EKey=f;var c=new o.default("F");t.FKey=c;var l=new o.default("G");t.GKey=l;var d=new o.default("H");t.HKey=d;var h=new o.default("I");t.IKey=h;var p=new o.default("J");t.JKey=p;var g=new o.default("K");t.KKey=g;var v=new o.default("L");t.LKey=v;var y=new o.default("M");t.MKey=y;var _=new o.default("N");t.NKey=_;var w=new o.default("O");t.OKey=w;var b=new o.default("P");t.PKey=b;var m=new o.default("Q");t.QKey=m;var O=new o.default("R");t.RKey=O;var C=new o.default("S");t.SKey=C;var S=new o.default("T");t.TKey=S;var P=new o.default("U");t.UKey=P;var M=new o.default("V");t.VKey=M;var x=new o.default("W");t.WKey=x;var T=new o.default("X");t.XKey=T;var E=new o.default("Y");t.YKey=E;var K=new o.default("Z");t.ZKey=K;var N=new o.default("Num1");t.Num1Key=N;var D=new o.default("Num2");t.Num2Key=D;var j=new o.default("Num3");t.Num3Key=j;var B=new o.default("Num4");t.Num4Key=B;var A=new o.default("Num5");t.Num5Key=A;var k=new o.default("Num6");t.Num6Key=k;var L=new o.default("Num7");t.Num7Key=L;var V=new o.default("Num8");t.Num8Key=V;var z=new o.default("Num9");t.Num9Key=z;var R=new o.default("Num0");t.Num0Key=R;var H=new o.default("Dash");t.DashKey=H;var I=new o.default("Equal");t.EqualKey=I;var U=new o.default("Space");t.SpaceKey=U;var F=new o.default("ArrowLeft");t.ArrowLeftKey=F;var W=new o.default("ArrowRight");t.ArrowRightKey=W;var q=new o.default("ArrowUp");t.ArrowUpKey=q;var $=new o.default("ArrowDown");t.ArrowDownKey=$;var J=new o.default("Backspace");t.BackspaceKey=J;var Q=new o.default("Delete");t.DeleteKey=Q},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o(n(39)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(71));t.MoveTo=o.default;var i=r(n(72));t.MoveHeadTo=i.default},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n,r,o){var i=e.call(this,t,n)||this;return i.content=r,i.breakable=o,i}return r(t,e),t.prototype.getType=function(){return"TextAtomicRenderNode"},t.prototype.getSelectableSize=function(){return this.content.length},t.prototype.getContent=function(){return this.content},t.prototype.getBreakable=function(){return this.breakable},t}(o(n(79)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(16)),s=o(n(82)),a={fontFamily:"Arial",fontSize:18,fontWeight:400,lineHeight:36,letterSpacing:0},u=function(e){function t(t){var n=e.call(this,t)||this;return n.content="",n}return r(t,e),t.prototype.getWidth=function(){if(void 0===this.width||void 0===this.height){var e=s.default(this.content,a);this.width=e.width,this.height=e.height}return this.width},t.prototype.getHeight=function(){if(void 0===this.width||void 0===this.height){var e=s.default(this.content,a);this.width=e.width,this.height=e.height}return this.height},t.prototype.getContent=function(){return this.content},t.prototype.getSelectableSize=function(){return this.content.length},t.prototype.onRenderUpdated=function(e){this.content=e.getContent(),this.breakable=e.getBreakable(),this.width=void 0,this.height=void 0},t.prototype.resolveViewportPositionToSelectableOffset=function(e){for(var t=0,n=0,r=this.content.length;n<r;n++){var o=s.default(this.content.substring(0,n),a).width;if(!(o<e))return e-t<o-e?n-1:n;t=o}return this.content.length-1},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){if(0===e&&t===this.getSelectableSize())return[{left:0,right:0,top:0,bottom:0,width:this.getWidth(),height:this.getHeight()}];var n=s.default(this.content.substring(0,e),a),r=s.default(this.content.substring(0,t),a);return[{left:n.width,right:this.getWidth()-r.width,top:0,bottom:0,width:r.width-n.width,height:this.getHeight()}]},t}(i.default);t.default=u},,function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(89));t.default=o.default},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(112));t.default=o.default},function(e,t,n){e.exports=n(118)},,,,,,function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(56)),i=r(n(58)),s=r(n(59)),a=r(n(60)),u=r(n(62)),f=r(n(67)),c=r(n(69)),l=r(n(70)),d=function(){function e(e,t){this.config=e,this.cursor=new l.default(this),this.tokenizer=new o.default(this.config,t),this.state=this.tokenizer.getState(),this.parser=new i.default(this.config,this.state),this.renderEngine=new s.default(this.config,this.parser.getDoc()),this.layoutEngine=new a.default(this.config,this.renderEngine.getDocRenderNode()),this.inputManager=new f.default,this.presenter=new u.default(this.config,this.layoutEngine.getDocBox(),this.inputManager),this.extensionProvider=new c.default(this)}return e.prototype.getConfig=function(){return this.config},e.prototype.getCursor=function(){return this.cursor},e.prototype.getState=function(){return this.state},e.prototype.getDocViewNode=function(){return this.presenter.getDocViewNode()},e.prototype.getRenderEngine=function(){return this.renderEngine},e.prototype.getLayoutEngine=function(){return this.layoutEngine},e.prototype.getPresenter=function(){return this.presenter},e.prototype.getInputManager=function(){return this.inputManager},e.prototype.mount=function(e){this.domWrapper=e,this.presenter.mount(e),this.extensionProvider.onMounted()},e.prototype.registerExtension=function(e){this.extensionProvider.registerExtension(e)},e.prototype.convertSelectableOffsetToModelOffset=function(e){return this.renderEngine.getDocRenderNode().convertSelectableOffsetToModelOffset(e)},e}();t.default=d},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,i=r(n(24)),s=r(n(25)),a=r(n(57));!function(e){e[e.NewToken=0]="NewToken",e[e.NewTag=1]="NewTag",e[e.Tag=2]="Tag",e[e.TagAttributes=3]="TagAttributes",e[e.TagAttributesString=4]="TagAttributesString",e[e.TagAttributesStringEscape=5]="TagAttributesStringEscape",e[e.CloseTag=6]="CloseTag"}(o||(o={}));var u=function(){function e(e,t){this.config=e,this.markup=t,this.tokenizerState=o.NewToken,this.state=new a.default,this.tokens=[],this.tagBuffer="",this.attributesBuffer="",this.ran=!1}return e.prototype.getState=function(){return this.ran||this.run(),this.state},e.prototype.run=function(){for(var e,t=this.markup,n=0,r=t.length;n<r;n++)switch(e=t[n],this.tokenizerState){case o.NewToken:if(/</.test(e)){this.newTag(e);break}this.appendChar(e);break;case o.NewTag:if(/A-Z/.test(e)){this.appendCharToTag(e);break}if(/\//.test(e)){this.closeTag(e);break}case o.Tag:if(/[A-Za-z]/.test(e)){this.appendCharToTag(e);break}if(/{/.test(e)){this.newAttributes(e);break}case o.TagAttributes:if(/"/.test(e)){this.newAttributesString(e);break}if(/>/.test(e)){this.endTag(e);break}this.appendCharToAttributes(e);break;case o.TagAttributesString:if(/"/.test(e)){this.endAttributesString(e);break}if(/\\/.test(e)){this.escapeNextAttributesStringChar(e);break}this.appendCharToAttributes(e);break;case o.TagAttributesStringEscape:this.appendCharToAttributes(e);break;case o.CloseTag:if(/>/.test(e)){this.endCloseTag(e);break}default:throw new Error("Unexpected character "+e+" at offset "+n+".")}this.state.setTokens(this.tokens),this.ran=!0},e.prototype.newTag=function(e){this.tokenizerState=o.NewTag},e.prototype.appendChar=function(e){this.tokens.push(e)},e.prototype.appendCharToTag=function(e){this.tagBuffer+=e,this.tokenizerState=o.Tag},e.prototype.newAttributes=function(e){this.attributesBuffer+=e,this.tokenizerState=o.TagAttributes},e.prototype.appendCharToAttributes=function(e){this.attributesBuffer+=e,this.tokenizerState===o.TagAttributesStringEscape&&(this.tokenizerState=o.TagAttributesString)},e.prototype.newAttributesString=function(e){this.attributesBuffer+=e,this.tokenizerState=o.TagAttributesString},e.prototype.endTag=function(e){var t;try{t=JSON.parse(this.attributesBuffer)}catch(r){throw new Error("Invalid attributes JSON: "+this.attributesBuffer+".")}if(!("id"in t))throw new Error("Missing id in attributes JSON: "+this.attributesBuffer+".");if(!this.tagBuffer)throw new Error("Open tag type cannot be empty.");var n=new i.default(this.tagBuffer,t);this.tokens.push(n),this.attributesBuffer="",this.tagBuffer="",this.tokenizerState=o.NewToken},e.prototype.endAttributesString=function(e){this.attributesBuffer+=e,this.tokenizerState=o.TagAttributes},e.prototype.escapeNextAttributesStringChar=function(e){this.tokenizerState=o.TagAttributesStringEscape},e.prototype.closeTag=function(e){this.tokenizerState=o.CloseTag},e.prototype.endCloseTag=function(e){var t=new s.default;this.tokens.push(t),this.tokenizerState=o.NewToken},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(26)),i=r(n(28)),s=function(){function e(){this.tokens=[],this.onUpdatedSubscribers=[]}return e.prototype.setTokens=function(e){this.tokens=e,this.onUpdated()},e.prototype.getTokens=function(){return this.tokens},e.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},e.prototype.applyTransformation=function(e){var t=this,n=e.getOperations();0!==n.length&&(n.forEach(function(e){var n;if(e instanceof o.default)(n=t.tokens).splice.apply(n,[e.getAt(),0].concat(e.getTokens()));else{if(!(e instanceof i.default))throw new Error("Unknown state transformation operation encountered.");t.tokens.splice(e.getFrom(),e.getTo()-e.getFrom()+1)}}),this.onUpdated())},e.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},e}();t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,s=o(n(24)),a=o(n(25)),u=o(n(29)),f=o(n(10)),c=o(n(11));!function(e){e[e.NewDoc=0]="NewDoc",e[e.NewNode=1]="NewNode",e[e.LeafNode=2]="LeafNode"}(i||(i={}));var l=function(){return function(){}}(),d=function(e){function t(t,n){var r=e.call(this)||this;return r.offset=t,r.child=n,r}return r(t,e),t.prototype.shiftOffset=function(e){this.offset+=e},t.prototype.getOffset=function(){return this.offset},t.prototype.getChild=function(){return this.child},t}(l),h=function(e){function t(t,n){var r=e.call(this)||this;return r.fromOffset=t,r.toOffset=n,r}return r(t,e),t.prototype.shiftOffset=function(e){this.fromOffset+=e,this.toOffset+=e},t.prototype.getFromOffset=function(){return this.fromOffset},t.prototype.getToOffset=function(){return this.toOffset},t}(l),p=function(){function e(e){if(this.node=e,this.invertedChildrenMap=new Map,e instanceof u.default||e instanceof f.default){this.children=e.getChildren();for(var t=void 0,n=0,r=this.children.length;n<r;n++)t=this.children[n],this.invertedChildrenMap.set(t.getID(),n)}else this.children=[];this.childIteratorOffset=0,this.operationsBuffer=[],this.operationsBufferFlushed=!1}return e.prototype.getNode=function(){return this.node},e.prototype.findChild=function(e){var t=this.invertedChildrenMap.get(e);return void 0===t?-1:t},e.prototype.getChildAt=function(e){if(e<this.childIteratorOffset)throw new Error("Cannot get child at offset "+e+", child iterator offset is already at "+this.childIteratorOffset+".");if(e<0||e>this.children.length-1)throw new Error("Child offset "+e+" is out of valid range 0-"+(this.children.length-1)+".");return this.children[e]},e.prototype.insertChild=function(e){if(this.operationsBufferFlushed)throw new Error("Cannot append more operations after flushing.");var t=new d(this.childIteratorOffset,e);this.operationsBuffer.push(t)},e.prototype.deleteChildrenTo=function(e){if(this.operationsBufferFlushed)throw new Error("Cannot append more child operations after flushing.");if(e<this.childIteratorOffset)throw new Error("Cannot delete children to offset "+e+", iterator offset is already at "+this.childIteratorOffset+".");if(this.childIteratorOffset=e,e!==this.childIteratorOffset){var t=new h(this.childIteratorOffset,e-1);this.operationsBuffer.push(t)}},e.prototype.deleteRemainingChildren=function(){if(this.operationsBufferFlushed)throw new Error("Cannot append more child operations after flushing.");if(this.childIteratorOffset+1<this.children.length){var e=new h(this.childIteratorOffset+1,this.children.length-1);this.operationsBuffer.push(e)}},e.prototype.flushOperationsBuffer=function(){var e;if(this.operationsBuffer.length>0){var t=this.node;if(!(t instanceof u.default||t instanceof f.default))throw new Error("Cannot flush operations for node "+t.getID()+", node has no children.");for(var n=void 0,r=0,o=this.operationsBuffer.length;r<o;r++){var i=void 0;if((n=this.operationsBuffer[r])instanceof d)t.insertChild(n.getChild(),n.getOffset()),i=1;else{if(!(n instanceof h))throw new Error("Unknown operation.");for(var s=t.getChildren().slice(n.getFromOffset(),n.getToOffset()+1),a=0,c=s.length;a<c;a++)t.deleteChild(s[a]);i=0-s.length}if(0!==i)for(a=r;a<o;a++)this.operationsBuffer[a].shiftOffset(i)}e=!0}else e=!1;return this.operationsBufferFlushed=!0,e},e}(),g=function(){function e(){this.elements=[]}return e.prototype.push=function(e){this.elements.push(e)},e.prototype.pop=function(){return this.elements.pop()},e.prototype.peek=function(){return this.elements[this.elements.length-1]},e}(),v=function(){function e(e,t){var n=this;this.config=e,this.state=t,this.parserState=i.NewDoc,this.doc=new u.default,this.stack=new g,this.contentBuffer="",this.ran=!1,this.version=0,this.state.subscribeOnUpdated(function(){n.parserState=i.NewDoc,n.run()})}return e.prototype.getDoc=function(){return this.ran||this.run(),this.doc},e.prototype.run=function(){for(var e,t=this.state.getTokens(),n=0,r=t.length;n<r;n++)switch(e=t[n],this.parserState){case i.NewDoc:if(e instanceof s.default&&"Doc"===e.getType()){this.newDoc(e);break}case i.NewNode:if(e instanceof s.default){this.newNode(e);break}if("string"===typeof e){this.appendToContent(e);break}if(e instanceof a.default){this.closeNode(e);break}this.appendToContent(e);break;case i.LeafNode:if("string"===typeof e){this.appendToContent(e);break}if(e instanceof a.default){this.closeNode(e);break}default:throw new Error("Unexpected token at offset "+n+".")}this.ran=!0,this.version++,this.doc.onUpdated()},e.prototype.newDoc=function(e){var t=this.doc,n=e.getAttributes();t.setID(n.id),this.stack.push(new p(t)),this.parserState=i.NewNode},e.prototype.newNode=function(e){var t=this.stack.peek();if(void 0===t)throw new Error("Unexpected end of doc encountered.");var n,r=t.findChild(e.getAttributes().id);r<0?((n=new(this.config.getNodeClass(e.getType()))(t.getNode())).setVersion(this.version),t.insertChild(n)):(n=t.getChildAt(r),t.deleteChildrenTo(r));var o=e.getAttributes();n.setID(o.id),this.stack.push(new p(n))},e.prototype.appendToContent=function(e){this.contentBuffer+=e,this.parserState=i.LeafNode},e.prototype.closeNode=function(e){var t=this.stack.pop();if(void 0===t)throw new Error("Unexpected end of doc encountered.");t.deleteRemainingChildren();var n=t.flushOperationsBuffer(),r=t.getNode();r instanceof c.default&&r.getContent()!==this.contentBuffer&&(r.setContent(this.contentBuffer),r.setVersion(this.version)),n&&r.setVersion(this.version),this.propagateVersionToAncestors(r),this.contentBuffer="",this.parserState=i.NewNode},e.prototype.propagateVersionToAncestors=function(e){for(var t,n=e;(n instanceof f.default||n instanceof c.default)&&!((t=n.getParent()).getVersion()>=n.getVersion());)t.setVersion(n.getVersion()),n=t},e}();t.default=v},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(12)),s=o(n(29)),a=o(n(10)),u=o(n(11)),f=o(n(30)),c=o(n(13)),l=o(n(14)),d=function(e){function t(t,n){var r=e.call(this)||this;return r.config=t,r.lastVersion=n,r}return r(t,e),t.prototype.getSrcNodeChildren=function(e){return e instanceof s.default?e.getChildren():e instanceof a.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){return e instanceof f.default?e.getChildren().slice():e instanceof c.default?e.getChildren().slice():[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getID()===n})},t.prototype.insertNode=function(e,t,n){if(e instanceof f.default&&t instanceof a.default){var r=new(this.config.getRenderNodeClass(t.getType()))(t.getID(),e);if(!(r instanceof c.default))throw new Error("Error inserting render node, expecting block render node.");return r.setVersion(t.getVersion()),e.insertChild(r,n),r}if(e instanceof c.default&&t instanceof u.default){var o=new(this.config.getRenderNodeClass(t.getType()))(t.getID(),e);if(!(o instanceof l.default))throw new Error("Error inserting render node, expecting inline render node.");return o.setVersion(t.getVersion()),e.insertChild(o,n),o}throw new Error("Error inserting render node, type mismatch.")},t.prototype.deleteNode=function(e,t){if(e instanceof f.default&&t instanceof c.default)e.deleteChild(t);else{if(!(e instanceof c.default&&t instanceof l.default))throw new Error("Error deleting render node, type mismatch.");e.deleteChild(t)}},t.prototype.updateNode=function(e,t){if(e instanceof f.default&&t instanceof s.default)return!(t.getVersion()<=this.lastVersion)&&(e.onModelUpdated(t),e.setVersion(t.getVersion()),!0);if(e instanceof c.default&&t instanceof a.default)return!(t.getVersion()<=this.lastVersion)&&(e.onModelUpdated(t),e.setVersion(t.getVersion()),!0);if(e instanceof l.default&&t instanceof u.default)return!(t.getVersion()<=this.lastVersion)&&(e.onModelUpdated(t),e.setVersion(t.getVersion()),!0);throw new Error("Error updating render node, type mismatch.")},t}(i.default),h=function(){function e(e,t){var n=this;this.config=e,this.doc=t,this.docRenderNode=new f.default(t.getID()),this.ran=!1,this.version=-1,this.doc.subscribeOnUpdated(function(){n.run()})}return e.prototype.getDocRenderNode=function(){return this.ran||this.run(),this.docRenderNode},e.prototype.run=function(){new d(this.config,this.version).syncNodes(this.doc,this.docRenderNode),this.ran=!0,this.version=this.doc.getVersion(),this.docRenderNode.onUpdated()},e.prototype.getNextVersion=function(){return this.docRenderNode.getVersion()+1},e}();t.default=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(12)),s=o(n(30)),a=o(n(13)),u=o(n(14)),f=o(n(15)),c=o(n(8)),l=o(n(3)),d=o(n(17)),h=o(n(7)),p=function(e){function t(t,n){var r=e.call(this)||this;return r.config=t,r.lastVersion=n,r.updatedPageFlowBoxes=[],r.updatedLineFlowBoxes=[],r}return r(t,e),t.prototype.getUpdatedPageFlowBoxes=function(){return Array.from(this.updatedPageFlowBoxes)},t.prototype.getUpdatedLineFlowBoxes=function(){return Array.from(this.updatedLineFlowBoxes)},t.prototype.getSrcNodeChildren=function(e){return e instanceof s.default?e.getChildren():e instanceof a.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){if(e instanceof f.default){var t=[];return e.getChildren().map(function(e){t.push.apply(t,e.getChildren())}),t}if(e instanceof c.default){var n=[];return e.getChildren().map(function(e){n.push.apply(n,e.getChildren())}),n}return[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getRenderNodeID()===n})},t.prototype.insertNode=function(e,t,n){if(e instanceof f.default&&t instanceof a.default){var r=new(this.config.getBoxClass(t.getType()))(t.getID());if(!(r instanceof c.default))throw new Error("Error inserting box, expecting block box.");r.setVersion(t.getVersion());for(var o=e.getChildren(),i=0,s=!1,p=0,g=o.length;p<g;p++){if(i+(v=o[p]).getChildren().length>=n){v.insertChild(r,n-i),this.updatedPageFlowBoxes.push(v),s=!0;break}i+=v.getChildren().length}if(!s){var v=new d.default(e.getWidth(),e.getHeight(),e.getPadding());e.insertChild(v,o.length),v.insertChild(r,0),this.updatedPageFlowBoxes.push(v)}return r}if(e instanceof c.default&&t instanceof u.default){var y=new(this.config.getBoxClass(t.getType()))(t.getID());if(!(y instanceof l.default))throw new Error("Error inserting box, expecting inline box.");y.setVersion(t.getVersion());var _=e.getChildren();for(i=0,s=!1,p=0,g=_.length;p<g;p++){if(i+(w=_[p]).getChildren().length>=n){w.insertChild(y,n-i),this.updatedLineFlowBoxes.push(w),s=!0;break}i+=w.getChildren().length}if(!s){var w=new h.default(e.getWidth());e.insertChild(w,_.length),w.insertChild(y,0),this.updatedLineFlowBoxes.push(w)}return y}throw new Error("Error inserting box, type mismatch.")},t.prototype.deleteNode=function(e,t){if(e instanceof f.default&&t instanceof c.default)for(var n=e.getChildren(),r=0,o=n.length;r<o;r++){var i=n[r];if(i.getChildren().indexOf(t)>=0){i.deleteChild(t),0===i.getChildren().length?e.deleteChild(i):this.updatedPageFlowBoxes.push(i);break}}else{if(!(e instanceof c.default&&t instanceof l.default))throw new Error("Error deleting box, type mismatch.");var s=e.getChildren();for(r=0,o=s.length;r<o;r++){var a=s[r];if(a.getChildren().indexOf(t)>=0){a.deleteChild(t),0===a.getChildren().length?e.deleteChild(a):this.updatedLineFlowBoxes.push(a);break}}}},t.prototype.updateNode=function(e,t){if(e instanceof f.default&&t instanceof s.default)return!(t.getVersion()<=this.lastVersion)&&(e.onRenderUpdated(t),e.setVersion(t.getVersion()),!0);if(e instanceof c.default&&t instanceof a.default){if(t.getVersion()<=this.lastVersion)return!1;e.onRenderUpdated(t),e.setVersion(t.getVersion());var n=e.getParent();return n.getVersion()<t.getVersion()&&n.setVersion(t.getVersion()),this.updatedPageFlowBoxes.push(n),!0}if(e instanceof l.default&&t instanceof u.default){if(t.getVersion()<=this.lastVersion)return!1;for(var r=e.getNextSibling();r&&r.getRenderNodeID()===e.getRenderNodeID();){var o=r.getNextSibling();if(r.getParent().deleteChild(r),0===r.getParent().getChildren().length){var i=r.getParent();i.getParent().deleteChild(i)}r=o}e.onRenderUpdated(t),e.setVersion(t.getVersion());var d=e.getParent();return d.getVersion()<t.getVersion()&&d.setVersion(t.getVersion()),this.updatedLineFlowBoxes.push(d),!0}throw new Error("Error updating box, type mismatch.")},t}(i.default),g=function(){function e(e,t){var n=this;this.config=e,this.docRenderNode=t,this.docBox=new f.default(t.getID()),this.docBox.onRenderUpdated(t),this.ran=!1,this.version=-1,this.docRenderNode.subscribeOnUpdated(function(){n.run()})}return e.prototype.getDocBox=function(){return this.ran||this.run(),this.docBox},e.prototype.run=function(){var e=this,t=new p(this.config,this.version);t.syncNodes(this.docRenderNode,this.docBox);var n=this.docRenderNode.getVersion(),r=t.getUpdatedLineFlowBoxes(),o=void 0;r.forEach(function(t){o&&o===t||(e.reflowLineFlowBox(t,n),o=t)});var i=t.getUpdatedPageFlowBoxes(),s=void 0;i.forEach(function(t){s&&s===t||(e.reflowPageFlowBox(t,n),s=t)}),this.ran=!0,this.version=n,this.docBox.onUpdated()},e.prototype.reflowLineFlowBox=function(e,t){e.onRenderUpdated();var n=e,r=n.getParent();if(!(r.getChildren().indexOf(n)<0))for(var o=n.getWidth(),i=0,s=0;;){var a=n.getChildren()[s];if(i+a.getWidth()>o)for(var u=0;u<a.getChildren().length;u++){var f=a.getChildren()[u];if(i+f.getWidth()>o){var c=n.cleaveAt(s+1);c.setVersion(t),r.insertChild(c,r.getChildren().indexOf(n)+1),n=c,s=0;var l=a.cleaveAt(u);l.setVersion(t),n.insertChild(l,n.getChildren().indexOf(a)+1),a=l,u=0,i=0}i+=f.getWidth()}if(i+=a.getWidth(),++s===n.getChildren().length){var d=r.getChildren().indexOf(n)+1;if(d>=r.getChildren().length)break;var h=r.getChildren()[d];if(!(i+h.getChildren()[0].getChildren()[0].getWidth()<=n.getWidth()))break;h.getChildren().forEach(function(e){n.insertChild(e,n.getChildren().length)}),r.deleteChild(h)}}},e.prototype.reflowPageFlowBox=function(e,t){e.onRenderUpdated();var n=e,r=n.getParent();if(!(r.getChildren().indexOf(n)<0))for(var o=n.getInnerHeight(),i=0,s=0;;){var a=n.getChildren()[s];if(i+a.getHeight()>o)for(var u=0;u<a.getChildren().length;u++){var f=a.getChildren()[u];if(i+f.getHeight()>o){var c=n.cleaveAt(s+1);c.setVersion(t),r.insertChild(c,r.getChildren().indexOf(n)+1),n=c,s=0;var l=a.cleaveAt(u);l.setVersion(t),n.insertChild(l,n.getChildren().indexOf(a)+1),a=l,u=0,i=0}i+=f.getHeight()}if(i+=a.getHeight(),++s===n.getChildren().length){var d=r.getChildren().indexOf(n)+1;if(d>=r.getChildren().length-1)break;var h=r.getChildren()[d];if(!(i+h.getChildren()[0].getChildren()[0].getHeight()<=n.getInnerHeight()))break;h.getChildren().forEach(function(e){n.insertChild(e,n.getChildren().length)}),r.deleteChild(h)}}},e}();t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(0!==t){var r=e[t-1];n.top===r.top&&n.height===r.height&&n.left===r.left+r.width&&(r.width+=n.width,r.right=n.right,e.splice(t,1),t-=1)}}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(63)),s=o(n(15)),a=o(n(17)),u=o(n(8)),f=o(n(7)),c=o(n(3)),l=o(n(64)),d=o(n(34)),h=o(n(65)),p=o(n(66)),g=o(n(35)),v=function(e){function t(t,n){var r=e.call(this)||this;return r.config=t,r.lastVersion=n,r}return r(t,e),t.prototype.getSrcNodeChildren=function(e){return e instanceof s.default?e.getChildren():e instanceof a.default?e.getChildren():e instanceof u.default?e.getChildren():e instanceof f.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){return e instanceof l.default?e.getChildren().slice():e instanceof h.default?e.getChildren().slice():e instanceof d.default?e.getChildren().slice():e instanceof p.default?e.getChildren().slice():[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getID()===n})},t.prototype.insertNode=function(e,t,n){if(e instanceof l.default&&t instanceof a.default){var r=new h.default(t.getID());return e.insertChild(r,n),r}if(e instanceof h.default&&t instanceof u.default){var o=new(this.config.getViewNodeClass(t.getType()))(t.getID());if(!(o instanceof d.default))throw new Error("Error inserting view node, expected block view to be built from block box.");return e.insertChild(o,n),o}if(e instanceof d.default&&t instanceof f.default){var i=new p.default(t.getID());return e.insertChild(i,n),i}if(e instanceof p.default&&t instanceof c.default){var s=new(this.config.getViewNodeClass(t.getType()))(t.getID());if(!(s instanceof g.default))throw new Error("Error inserting view node, expected inline view to be built from inline box.");return e.insertChild(s,n),s}throw new Error("Error inserting view node, type mismatch.")},t.prototype.deleteNode=function(e,t){if(e instanceof l.default&&t instanceof h.default)e.deleteChild(t);else if(e instanceof h.default&&t instanceof d.default)e.deleteChild(t);else if(e instanceof d.default&&t instanceof p.default)e.deleteChild(t);else{if(!(e instanceof p.default&&t instanceof g.default))throw new Error("Error deleting view node, type mismatch.");e.deleteChild(t)}},t.prototype.updateNode=function(e,t){if(e instanceof l.default&&t instanceof s.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof h.default&&t instanceof a.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof d.default&&t instanceof u.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof p.default&&t instanceof f.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof g.default&&t instanceof c.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);throw new Error("Error updating view node, type mismatch.")},t}(o(n(12)).default),y=function(){function e(e,t,n){var r=this;this.config=e,this.docBox=t,this.inputManager=n,this.docViewNode=new l.default(t.getID()),this.onMountedSubscribers=[],this.mounted=!1,this.version=-1,this.docBox.subscribeOnUpdated(function(){r.run()})}return e.prototype.mount=function(e){this.mounted||(this.domWrapper=e,this.run(),e.appendChild(this.docViewNode.getDOMContainer()),this.mounted=!0,this.eventObserver=new i.default(this,this.inputManager),this.onMountedSubscribers.forEach(function(e){return e()}))},e.prototype.run=function(){new v(this.config,this.version).syncNodes(this.docBox,this.docViewNode),this.version=this.docBox.getVersion(),this.docViewNode.onUpdated()},e.prototype.getDocViewNode=function(){return this.docViewNode},e.prototype.subscribeOnMounted=function(e){this.onMountedSubscribers.push(e)},e.prototype.getPageDOMContentContainer=function(e){var t=this.docViewNode.getChildren();if(e<0||e>=t.length)throw new Error("Page offset "+e+" is out of range.");return t[e].getDOMContentContainer()},e}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){var n=this;this.onKeyDown=function(e){n.inputManager.onKeyPress(e)},this.presenter=e,this.inputManager=t,window.addEventListener("keydown",this.onKeyDown)}}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.onUpdatedSubscribers=[],n.domContainer=document.createElement("div"),n.domContainer.className="tw--doc",n.domContainer.style.whiteSpace="pre",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t+1])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onLayoutUpdated=function(e){},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t}(o(n(4)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.domContainer=document.createElement("div"),n.domContainer.className="tw--page",n.domContainer.style.whiteSpace="pre",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.getDOMContentContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t+1]),this.domContainer.appendChild(n)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onDeleted=function(){this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer),this.children.map(function(e){e.onDeleted()})},t.prototype.onLayoutUpdated=function(e){this.domContainer.style.width=e.getWidth()+"px",this.domContainer.style.height=e.getHeight()+"px",this.domContainer.style.padding=e.getPadding()+"px"},t}(o(n(4)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.domContainer=document.createElement("div"),n.domContainer.className="tw--line",n.domContainer.style.whiteSpace="pre",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.getDOMContentContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t+1])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onDeleted=function(){this.children.map(function(e){e.onDeleted()}),this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer)},t.prototype.onLayoutUpdated=function(e){},t}(o(n(4)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(68)),i=function(){function e(){this.charInputSubscribers=[],this.keyPressSubscriptions=new Map}return e.prototype.subscribeOnCharInput=function(e){this.charInputSubscribers.push(e)},e.prototype.subscribeOnKeyPress=function(e,t){var n=e.getCode();this.keyPressSubscriptions.has(n)||this.keyPressSubscriptions.set(n,[]),this.keyPressSubscriptions.get(n).push(t)},e.prototype.onKeyPress=function(e){e.altKey||e.ctrlKey||e.metaKey||1!==e.key.length||(e.preventDefault(),this.charInputSubscribers.forEach(function(t){return t(e.key)}));var t=o.default(e);if(t){var n=t.getCode();if(this.keyPressSubscriptions.has(n)){var r=this.keyPressSubscriptions.get(n);r.forEach(function(e){return e()}),r.length>0&&e.preventDefault()}}},e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(36)),i=n(37),s=n(40),a={a:s.AKey,b:s.BKey,c:s.CKey,d:s.DKey,e:s.EKey,f:s.FKey,g:s.GKey,h:s.HKey,i:s.IKey,j:s.JKey,k:s.KKey,l:s.LKey,m:s.MKey,n:s.NKey,o:s.OKey,p:s.PKey,q:s.QKey,r:s.RKey,s:s.SKey,t:s.TKey,u:s.UKey,v:s.VKey,w:s.WKey,x:s.XKey,y:s.YKey,z:s.ZKey,A:s.AKey,B:s.BKey,C:s.CKey,D:s.DKey,E:s.EKey,F:s.FKey,G:s.GKey,H:s.HKey,I:s.IKey,J:s.JKey,K:s.KKey,L:s.LKey,M:s.MKey,N:s.NKey,O:s.OKey,P:s.PKey,Q:s.QKey,R:s.RKey,S:s.SKey,T:s.TKey,U:s.UKey,V:s.VKey,W:s.WKey,X:s.XKey,Y:s.YKey,Z:s.ZKey,Num1:s.Num1Key,Num2:s.Num2Key,Num3:s.Num3Key,Num4:s.Num4Key,Num5:s.Num5Key,Num6:s.Num6Key,Num7:s.Num7Key,Num8:s.Num8Key,Num9:s.Num9Key,Num0:s.Num0Key,Dash:s.DashKey,Equal:s.EqualKey,Space:s.SpaceKey,ArrowLeft:s.ArrowLeftKey,ArrowRight:s.ArrowRightKey,ArrowUp:s.ArrowUpKey,ArrowDown:s.ArrowDownKey,Backspace:s.BackspaceKey,Delete:s.DeleteKey};t.default=function(e){var t=[];e.altKey&&t.push(i.AltKey),e.ctrlKey&&t.push(i.CtrlKey),e.metaKey&&t.push(i.MetaKey),e.shiftKey&&t.push(i.ShiftKey);var n,r=(n=e.key)in a?a[n]:null;return r?new o.default(r,t):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.editor=e,this.extensions=[]}return e.prototype.registerExtension=function(e){this.extensions.push(e),e.$onRegistered(this.editor)},e.prototype.onMounted=function(){this.extensions.forEach(function(e){e.onMounted&&e.onMounted()})},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(42),o=function(){function e(e){this.editor=e,this.anchor=0,this.head=0,this.onChangedSubscribers=[]}return e.prototype.getAnchor=function(){return this.anchor},e.prototype.getHead=function(){return this.head},e.prototype.subscribeOnUpdated=function(e){this.onChangedSubscribers.push(e)},e.prototype.applyTransformation=function(e){var t=this,n=e.getOperations();0!==n.length&&(n.forEach(function(e){if(e instanceof r.MoveTo){var n=e.getOffset();t.anchor=n,t.head=n}else{if(!(e instanceof r.MoveHeadTo))throw new Error("Unrecognized cursor transformation operation.");n=e.getOffset();t.head=n}}),this.onChangedSubscribers.forEach(function(e){return e()}))},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.offset=e}return e.prototype.getOffset=function(){return this.offset},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.offset=e}return e.prototype.getOffset=function(){return this.offset},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(74)),i=r(n(75)),s=r(n(76)),a=r(n(77)),u=r(n(80)),f=r(n(81)),c=r(n(83)),l=r(n(84)),d=function(){function e(){this.nodeClasses=new Map,this.renderNodeClasses=new Map,this.boxClasses=new Map,this.viewNodeClasses=new Map,this.registerNodeClass("Paragraph",o.default),this.registerNodeClass("Text",i.default),this.registerRenderNodeClass("Paragraph",s.default),this.registerRenderNodeClass("Text",a.default),this.registerBoxClass("ParagraphBlockRenderNode",u.default),this.registerBoxClass("TextInlineRenderNode",f.default),this.registerViewNodeClass("ParagraphBlockBox",c.default),this.registerViewNodeClass("TextInlineBox",l.default)}return e.prototype.registerNodeClass=function(e,t){this.nodeClasses.set(e,t)},e.prototype.getNodeClass=function(e){if(!this.nodeClasses.has(e))throw new Error("Node type "+e+" is not registered.");return this.nodeClasses.get(e)},e.prototype.registerRenderNodeClass=function(e,t){this.renderNodeClasses.set(e,t)},e.prototype.getRenderNodeClass=function(e){if(!this.renderNodeClasses.has(e))throw new Error("No render node class registered for node type "+e+".");return this.renderNodeClasses.get(e)},e.prototype.registerBoxClass=function(e,t){this.boxClasses.set(e,t)},e.prototype.getBoxClass=function(e){var t=this.boxClasses.get(e);if(!t)throw new Error("No box class registered for render node type "+e+".");return t},e.prototype.registerViewNodeClass=function(e,t){this.viewNodeClasses.set(e,t)},e.prototype.getViewNodeClass=function(e){var t=this.viewNodeClasses.get(e);if(!t)throw new Error("No view node class registered for box type "+e+".");return t},e}();t.default=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"Paragraph"},t}(o(n(10)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"Text"},t}(o(n(11)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"ParagraphBlockRenderNode"},t}(o(n(13)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(78)),s=o(n(14)),a=o(n(43)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"TextInlineRenderNode"},t.prototype.onModelUpdated=function(t){var n=this;e.prototype.onModelUpdated.call(this,t),this.children=[],i.default(t.getContent()).forEach(function(e,r){var o=new a.default(t.getID()+"-"+r,n,e.text,e.breakable);n.children.push(o)})},t}(s.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[" ","\n","\t"];t.default=function(e){for(var t=[],n="",o=0,i=e.length;o<i;o++){var s=e[o];n+=s,r.includes(s)&&(t.push({text:n,breakable:!0}),n="")}return n.length>0&&t.push({text:n,breakable:!1}),t}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this,t)||this;return r.version=0,r.parent=n,r}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getParent=function(){return this.parent},t.prototype.getModelSize=function(){return this.getSelectableSize()},t.prototype.convertSelectableOffsetToModelOffset=function(e){return e},t}(o(n(5)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"ParagraphBlockBox"},t.prototype.cleaveAt=function(e){if(e>this.children.length)throw new Error("Error cleaving ParagraphBlockBox, offset "+e+" is out of range.");var n=this.children.splice(e);this.selectableSize=void 0,this.height=void 0;var r=new t(this.renderNodeID);return n.forEach(function(e,t){r.insertChild(e,t)}),r},t.prototype.resolveViewportPositionToSelectableOffset=function(e,t){for(var n=0,r=0,o=0,i=this.children.length;o<i;o++){var s=this.children[o],a=s.getHeight();if(t>=r&&t<=r+a){n+=s.resolveViewportPositionToSelectableOffset(e);break}n+=s.getSelectableSize(),r+=a}return n},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],o=0,i=0,s=function(s,u){var f=a.children[s],c=f.getHeight(),l=f.getSelectableSize(),d=Math.max(e-o,0),h=Math.min(t-o,l);d<=l&&h>=0&&f.resolveSelectableOffsetRangeToViewportBoundingRects(d,h).forEach(function(e){r.push({left:e.left,right:e.right,top:i+e.top,bottom:n.getHeight()-i-c+e.bottom,width:e.width,height:c})});o+=f.getSelectableSize(),i+=c},a=this,u=0,f=this.children.length;u<f&&o<=t;u++)s(u);return r},t}(o(n(8)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(3)),s=o(n(44)),a=o(n(43)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"TextInlineBox"},t.prototype.onRenderUpdated=function(t){var n=this;e.prototype.onRenderUpdated.call(this,t),this.children=[],t.getChildren().forEach(function(e,t){if(!(e instanceof a.default))throw new Error("Expecting child of TextInlineRenderNode to be AtomicInlineRenderNode.");var r=new s.default(e.getID());n.insertChild(r,t),r.onRenderUpdated(e)})},t.prototype.cleaveAt=function(e){if(e>this.children.length)throw new Error("Error cleaving TextInlineBox, offset "+e+" is out of range.");var n=this.children.splice(e),r=new t(this.renderNodeID);return n.forEach(function(e,t){r.insertChild(e,t)}),this.width=void 0,this.height=void 0,this.selectableSize=void 0,r},t}(i.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.$iframe=document.createElement("iframe"),this.$iframe.src="about:blank",this.$iframe.style.width="0",this.$iframe.style.height="0",this.$iframe.style.border="none",document.body.appendChild(this.$iframe),this.$textContainers=new Map}return e.prototype.getTextContainerElement=function(e){var t=function(e){return JSON.stringify(e)}(e);if(!this.$textContainers.has(t)){var n=document.createElement("span");n.style.display="inline-block",n.style.whiteSpace="pre",n.style.fontFamily=e.fontFamily,n.style.fontSize=e.fontSize+"px",n.style.fontWeight=""+e.fontWeight,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=""+e.letterSpacing,this.$iframe.contentDocument.body.appendChild(n),this.$textContainers.set(t,n)}return this.$textContainers.get(t)},e.prototype.measure=function(e,t){var n=e.replace(/\n$/," "),r=this.getTextContainerElement(t);r.innerHTML!==n&&(r.innerHTML=n);var o=r.getBoundingClientRect();return{width:o.width,height:o.height}},e}();t.TextMeasurer=r;var o=new r;t.default=function(e,t){return o.measure(e,t)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.domContainer=document.createElement("div"),n.domContainer.className="tw--paragraph-block",n.domContainer.style.whiteSpace="pre",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t+1]),this.domContainer.appendChild(n)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onDeleted=function(){this.children.map(function(e){e.onDeleted()}),this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer)},t.prototype.onLayoutUpdated=function(e){},t}(o(n(34)).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(44)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.domContainer=document.createElement("span"),n.domContainer.className="tw--text-inline",n.domContainer.style.whiteSpace="pre",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.onDeleted=function(){this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer)},t.prototype.onLayoutUpdated=function(e){var t=e.getChildren().map(function(e){if(e instanceof i.default)return e.getContent();throw new Error("Invalid child AtomicBox encountered for TextInlineBox.")}).join("");this.domContainer.innerText=t},t}(o(n(35)).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.operations=[],this.operations=[]}return e.prototype.addOperation=function(e){this.operations.push(e)},e.prototype.getOperations=function(){return this.operations},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(26));t.Insert=o.default;var i=r(n(28));t.Delete=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.operations=[],this.operations=[],this.leftAnchor=null}return e.prototype.addOperation=function(e){this.operations.push(e)},e.prototype.getOperations=function(){return this.operations},e.prototype.setLeftAnchor=function(e){this.leftAnchor=e},e.prototype.getLeftAnchor=function(){return this.leftAnchor},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.$onRegistered=function(e){this.editor=e,this.onRegistered&&this.onRegistered()},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Extension has not yet been registered.");return this.editor},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(90),s=function(e){function t(){var t=e.call(this)||this;return t.onCursorChanged=function(){t.updateView()},t.onDocViewChanged=function(){t.updateView()},t.leftAnchor=null,t.blinkState=!1,t.blinkInterval=null,t.domSelections=[],t.domHead=document.createElement("div"),t.domHead.className="tw--cursor-head",t.domHead.style.position="absolute",t}return r(t,e),t.prototype.getLeftAnchor=function(){return this.leftAnchor},t.prototype.onRegistered=function(){this.subscribeOnInputs(),this.getEditor().getCursor().subscribeOnUpdated(this.onCursorChanged),this.getEditor().getDocViewNode().subscribeOnUpdated(this.onDocViewChanged)},t.prototype.onMounted=function(){this.updateView()},t.prototype.subscribeOnInputs=function(){var e=this,t=this.getEditor().getInputManager();t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowLeftKey),function(){return e.dispatchCommand(i.moveLeft(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowRightKey),function(){return e.dispatchCommand(i.moveRight(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowLeftKey,[o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadLeft(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowRightKey,[o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadRight(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowLeftKey,[o.modifierKeys.AltKey]),function(){return e.dispatchCommand(i.moveLeftByWord(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowRightKey,[o.modifierKeys.AltKey]),function(){return e.dispatchCommand(i.moveRightByWord(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowLeftKey,[o.modifierKeys.AltKey,o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadLeftByWord(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowRightKey,[o.modifierKeys.AltKey,o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadRightByWord(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowLeftKey,[o.modifierKeys.MetaKey]),function(){return e.dispatchCommand(i.moveToLeftOfLine(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowRightKey,[o.modifierKeys.MetaKey]),function(){return e.dispatchCommand(i.moveToRightOfLine(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowLeftKey,[o.modifierKeys.MetaKey,o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadToLeftOfLine(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowRightKey,[o.modifierKeys.MetaKey,o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadToRightOfLine(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowUpKey),function(){return e.dispatchCommand(i.moveToLineAbove(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowDownKey),function(){return e.dispatchCommand(i.moveToLineBelow(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowUpKey,[o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadToLineAbove(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowDownKey,[o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadToLineBelow(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowUpKey,[o.modifierKeys.MetaKey]),function(){return e.dispatchCommand(i.moveToLeftOfDoc(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowDownKey,[o.modifierKeys.MetaKey]),function(){return e.dispatchCommand(i.moveToRightOfDoc(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowUpKey,[o.modifierKeys.MetaKey,o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadToLeftOfDoc(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.ArrowDownKey,[o.modifierKeys.MetaKey,o.modifierKeys.ShiftKey]),function(){return e.dispatchCommand(i.moveHeadToRightOfDoc(e))}),t.subscribeOnKeyPress(new o.KeySignature(o.keys.AKey,[o.modifierKeys.MetaKey]),function(){return e.dispatchCommand(i.selectAll(e))})},t.prototype.dispatchCommand=function(e){var t=this.getEditor(),n=e(t),r=n[0],o=n[1];t.getState().applyTransformation(r),t.getCursor().applyTransformation(o),this.leftAnchor=o.getLeftAnchor()},t.prototype.startBlinking=function(){var e=this;null===this.blinkInterval&&(this.blinkInterval=setInterval(function(){e.blinkState?e.domHead.style.visibility="hidden":e.domHead.style.visibility="visible",e.blinkState=!e.blinkState},500))},t.prototype.stopBlinking=function(){null!==this.blinkInterval&&(this.blinkState=!0,this.domHead.style.visibility="visible",clearInterval(this.blinkInterval),this.blinkInterval=null)},t.prototype.updateView=function(){for(var e=this;this.domSelections.length>0;){var t=this.domSelections[0];t.parentElement&&t.parentElement.removeChild(t),this.domSelections.splice(0,1)}var n,r,o,i,s,a=this.getEditor(),u=a.getCursor(),f=a.getLayoutEngine(),c=a.getPresenter(),l=u.getAnchor(),d=u.getHead(),h=f.getDocBox().resolveSelectableOffsetRangeToViewportBoundingRects(Math.min(l,d),Math.max(l,d)),p=-1,g=-1,v=-1,y=-1;(h.forEach(function(t,n){var r=c.getPageDOMContentContainer(n);t.forEach(function(t,o){if(p<0&&(p=n,g=o),v=n,y=o,0!==t.width){var i=document.createElement("div");i.className="tw--cursor-selection",i.style.position="absolute",i.style.top=t.top+"px",i.style.left=t.left+"px",i.style.width=t.width+"px",i.style.height=t.height+"px",r.appendChild(i),e.domSelections.push(i)}})}),d<l)?(n=p,r=(s=h[p][g]).left,o=s.top,i=s.height):(n=v,r=(s=h[v][y]).left+s.width,o=s.top,i=s.height);this.domHead.style.top=o+"px",this.domHead.style.left=r+"px",this.domHead.style.height=i+"px";var _=c.getPageDOMContentContainer(n);this.domHead.parentElement&&this.domHead.parentElement!==_&&this.domHead.parentElement.removeChild(this.domHead),this.domHead.parentElement||_.appendChild(this.domHead),this.domHead.scrollIntoView({block:"nearest"}),this.stopBlinking(),this.startBlinking()},t}(o.Extension);t.default=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(91));t.moveLeft=o.default;var i=r(n(92));t.moveRight=i.default;var s=r(n(93));t.moveHeadLeft=s.default;var a=r(n(94));t.moveHeadRight=a.default;var u=r(n(95));t.moveLeftByWord=u.default;var f=r(n(96));t.moveRightByWord=f.default;var c=r(n(97));t.moveHeadLeftByWord=c.default;var l=r(n(98));t.moveHeadRightByWord=l.default;var d=r(n(99));t.moveToLeftOfLine=d.default;var h=r(n(100));t.moveToRightOfLine=h.default;var p=r(n(101));t.moveHeadToLeftOfLine=p.default;var g=r(n(102));t.moveHeadToRightOfLine=g.default;var v=r(n(103));t.moveToLineAbove=v.default;var y=r(n(104));t.moveToLineBelow=y.default;var _=r(n(105));t.moveHeadToLineAbove=_.default;var w=r(n(106));t.moveHeadToLineBelow=w.default;var b=r(n(107));t.moveToLeftOfDoc=b.default;var m=r(n(108));t.moveToRightOfDoc=m.default;var O=r(n(109));t.moveHeadToLeftOfDoc=O.default;var C=r(n(110));t.moveHeadToRightOfDoc=C.default;var S=r(n(111));t.selectAll=S.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getAnchor(),s=o.getHead();if(i===s){if(s<1)return[t,n];n.addOperation(new r.cursorOperations.MoveTo(s-1))}else i<s?n.addOperation(new r.cursorOperations.MoveTo(i)):i>s&&n.addOperation(new r.cursorOperations.MoveTo(s));return[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getAnchor(),s=o.getHead(),a=e.getLayoutEngine().getDocBox();if(i===s){if(s>=a.getSelectableSize()-1)return[t,n];n.addOperation(new r.cursorOperations.MoveTo(s+1))}else i<s?n.addOperation(new r.cursorOperations.MoveTo(s)):i>s&&n.addOperation(new r.cursorOperations.MoveTo(i));return[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead();return i<1?[t,n]:(n.addOperation(new r.cursorOperations.MoveHeadTo(i-1)),[t,n])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead();return i>=e.getLayoutEngine().getDocBox().getSelectableSize()-1?[t,n]:(n.addOperation(new r.cursorOperations.MoveHeadTo(i+1)),[t,n])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead(),s=e.getLayoutEngine().getDocBox().resolvePosition(i).getAtomicBoxLevel();if(s.getSelectableOffset()>0)n.addOperation(new r.cursorOperations.MoveTo(i-s.getSelectableOffset()));else{var a=s.getLayoutNode();if(!(a instanceof r.AtomicBox))throw new Error("Expecting position to be referencing an atomic box.");var u=a.getPreviousSibling();u?n.addOperation(new r.cursorOperations.MoveTo(i-u.getSelectableSize())):n.addOperation(new r.cursorOperations.MoveTo(i))}return[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead(),s=e.getLayoutEngine().getDocBox().resolvePosition(i).getAtomicBoxLevel(),a=s.getLayoutNode();if(!(a instanceof r.AtomicBox))throw new Error("Expecting position to be referencing an atomic box.");if(s.getSelectableOffset()<a.getSelectableSize()-1)n.addOperation(new r.cursorOperations.MoveTo(i-s.getSelectableOffset()+a.getSelectableSize()-1));else{var u=a.getNextSibling();u?n.addOperation(new r.cursorOperations.MoveTo(i-s.getSelectableOffset()+a.getSelectableSize()-1+u.getSelectableSize())):n.addOperation(new r.cursorOperations.MoveTo(i))}return[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead(),s=e.getLayoutEngine().getDocBox().resolvePosition(i).getAtomicBoxLevel();if(s.getSelectableOffset()>0)n.addOperation(new r.cursorOperations.MoveHeadTo(i-s.getSelectableOffset()));else{var a=s.getLayoutNode();if(!(a instanceof r.AtomicBox))throw new Error("Expecting position to be referencing an atomic box.");var u=a.getPreviousSibling();u&&n.addOperation(new r.cursorOperations.MoveHeadTo(i-u.getSelectableSize()))}return[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead(),s=e.getLayoutEngine().getDocBox().resolvePosition(i).getAtomicBoxLevel(),a=s.getLayoutNode();if(!(a instanceof r.AtomicBox))throw new Error("Expecting position to be referencing an atomic box.");if(s.getSelectableOffset()<a.getSelectableSize()-1)n.addOperation(new r.cursorOperations.MoveHeadTo(i-s.getSelectableOffset()+a.getSelectableSize()-1));else{var u=a.getNextSibling();u&&n.addOperation(new r.cursorOperations.MoveHeadTo(i-s.getSelectableOffset()+a.getSelectableSize()-1+u.getSelectableSize()))}return[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead(),s=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel();return s.getSelectableOffset()>0?n.addOperation(new r.cursorOperations.MoveTo(i-s.getSelectableOffset())):n.addOperation(new r.cursorOperations.MoveTo(i)),[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead(),s=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel(),a=s.getLayoutNode();if(!(a instanceof r.LineFlowBox))throw new Error("Expecting position to be referencing an line box.");return s.getSelectableOffset()<a.getSelectableSize()-1?n.addOperation(new r.cursorOperations.MoveTo(i-s.getSelectableOffset()+a.getSelectableSize()-1)):n.addOperation(new r.cursorOperations.MoveTo(i)),[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead(),s=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel();return s.getSelectableOffset()>0?n.addOperation(new r.cursorOperations.MoveHeadTo(i-s.getSelectableOffset())):n.addOperation(new r.cursorOperations.MoveHeadTo(i)),[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation,o=e.getCursor();if(!o)return[t,n];var i=o.getHead(),s=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel(),a=s.getLayoutNode();if(!(a instanceof r.LineFlowBox))throw new Error("Expecting position to be referencing an line box.");return s.getSelectableOffset()<a.getSelectableSize()-1?n.addOperation(new r.cursorOperations.MoveHeadTo(i-s.getSelectableOffset()+a.getSelectableSize()-1)):n.addOperation(new r.cursorOperations.MoveHeadTo(i)),[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(t){var n=new r.StateTransformation,o=new r.CursorTransformation,i=t.getCursor();if(!i)return[n,o];var s=Math.min(i.getAnchor(),i.getHead()),a=t.getLayoutEngine().getDocBox().resolvePosition(s).getLineFlowBoxLevel(),u=a.getLayoutNode();if(!(u instanceof r.LineFlowBox))throw new Error("Expecting position to be referencing an line box.");var f=u.getPreviousSibling();if(f){var c=void 0;c=null!==e.getLeftAnchor()?e.getLeftAnchor():u.resolveSelectableOffsetRangeToViewportBoundingRects(a.getSelectableOffset(),a.getSelectableOffset())[0].left,o.setLeftAnchor(c);var l=f.resolveViewportPositionToSelectableOffset(c);o.addOperation(new r.cursorOperations.MoveTo(s-a.getSelectableOffset()-f.getSelectableSize()+l))}else o.addOperation(new r.cursorOperations.MoveTo(s-a.getSelectableOffset()));return[n,o]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(t){var n=new r.StateTransformation,o=new r.CursorTransformation,i=t.getCursor();if(!i)return[n,o];var s=Math.max(i.getAnchor(),i.getHead()),a=t.getLayoutEngine().getDocBox().resolvePosition(s).getLineFlowBoxLevel(),u=a.getLayoutNode();if(!(u instanceof r.LineFlowBox))throw new Error("Expecting position to be referencing an line box.");var f=u.getNextSibling();if(f){var c=void 0;c=null!==e.getLeftAnchor()?e.getLeftAnchor():u.resolveSelectableOffsetRangeToViewportBoundingRects(a.getSelectableOffset(),a.getSelectableOffset())[0].left,o.setLeftAnchor(c);var l=f.resolveViewportPositionToSelectableOffset(c);o.addOperation(new r.cursorOperations.MoveTo(s-a.getSelectableOffset()+u.getSelectableSize()+l))}else o.addOperation(new r.cursorOperations.MoveTo(s-a.getSelectableOffset()+u.getSelectableSize()-1));return[n,o]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(t){var n=new r.StateTransformation,o=new r.CursorTransformation,i=t.getCursor();if(!i)return[n,o];var s=i.getHead(),a=t.getLayoutEngine().getDocBox().resolvePosition(s).getLineFlowBoxLevel(),u=a.getLayoutNode();if(!(u instanceof r.LineFlowBox))throw new Error("Expecting position to be referencing an line box.");var f=u.getPreviousSibling();if(f){var c=void 0;c=null!==e.getLeftAnchor()?e.getLeftAnchor():u.resolveSelectableOffsetRangeToViewportBoundingRects(a.getSelectableOffset(),a.getSelectableOffset())[0].left,o.setLeftAnchor(c);var l=f.resolveViewportPositionToSelectableOffset(c);o.addOperation(new r.cursorOperations.MoveHeadTo(s-a.getSelectableOffset()-f.getSelectableSize()+l))}else o.addOperation(new r.cursorOperations.MoveHeadTo(s-a.getSelectableOffset()));return[n,o]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(t){var n=new r.StateTransformation,o=new r.CursorTransformation,i=t.getCursor();if(!i)return[n,o];var s=i.getHead(),a=t.getLayoutEngine().getDocBox().resolvePosition(s).getLineFlowBoxLevel(),u=a.getLayoutNode();if(!(u instanceof r.LineFlowBox))throw new Error("Expecting position to be referencing an line box.");var f=u.getNextSibling();if(f){var c=void 0;c=null!==e.getLeftAnchor()?e.getLeftAnchor():u.resolveSelectableOffsetRangeToViewportBoundingRects(a.getSelectableOffset(),a.getSelectableOffset())[0].left,o.setLeftAnchor(c);var l=f.resolveViewportPositionToSelectableOffset(c);o.addOperation(new r.cursorOperations.MoveHeadTo(s-a.getSelectableOffset()+u.getSelectableSize()+l))}else o.addOperation(new r.cursorOperations.MoveHeadTo(s-a.getSelectableOffset()+u.getSelectableSize()-1));return[n,o]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation;return e.getCursor()?(n.addOperation(new r.cursorOperations.MoveTo(0)),[t,n]):[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation;if(!e.getCursor())return[t,n];var o=e.getLayoutEngine().getDocBox();return n.addOperation(new r.cursorOperations.MoveTo(o.getSelectableSize()-1)),[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation;return e.getCursor()?(n.addOperation(new r.cursorOperations.MoveHeadTo(0)),[t,n]):[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation;if(!e.getCursor())return[t,n];var o=e.getLayoutEngine().getDocBox();return n.addOperation(new r.cursorOperations.MoveHeadTo(o.getSelectableSize()-1)),[t,n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=new r.StateTransformation,n=new r.CursorTransformation;if(!e.getCursor())return[t,n];var o=e.getLayoutEngine().getDocBox();return n.addOperation(new r.cursorOperations.MoveTo(0)),n.addOperation(new r.cursorOperations.MoveHeadTo(o.getSelectableSize()-1)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(113),s=function(e){function t(){var t=e.call(this)||this;return t.onCharInputed=function(e){t.dispatchCommand(i.insertChar(t,e))},t.onBackspacePressed=function(){t.dispatchCommand(i.deleteBackward(t))},t.onDeletePressed=function(){t.dispatchCommand(i.deleteForward(t))},t}return r(t,e),t.prototype.onRegistered=function(){this.subscribeOnInputs()},t.prototype.onMounted=function(){},t.prototype.subscribeOnInputs=function(){var e=this.getEditor().getInputManager();e.subscribeOnCharInput(this.onCharInputed),e.subscribeOnKeyPress(new o.KeySignature(o.keys.BackspaceKey),this.onBackspacePressed),e.subscribeOnKeyPress(new o.KeySignature(o.keys.DeleteKey),this.onDeletePressed)},t.prototype.dispatchCommand=function(e){var t=this.getEditor(),n=e(t),r=n[0],o=n[1];t.getState().applyTransformation(r),t.getCursor().applyTransformation(o)},t}(o.Extension);t.default=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(114));t.insertChar=o.default;var i=r(n(115));t.deleteBackward=i.default;var s=r(n(116));t.deleteForward=s.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e,t){return function(e){var n=e.getCursor().getAnchor(),o=e.getCursor().getHead(),i=e.convertSelectableOffsetToModelOffset(n),s=e.convertSelectableOffsetToModelOffset(o),a=new r.StateTransformation,u=new r.CursorTransformation;i!==s&&a.addOperation(new r.stateOperations.Delete(Math.min(i,s),Math.max(i,s)-1));var f=Math.min(i,s);return a.addOperation(new r.stateOperations.Insert(f,[t])),u.addOperation(new r.cursorOperations.MoveTo(Math.min(n,o)+1)),[a,u]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=e.getCursor().getAnchor(),n=e.getCursor().getHead(),o=e.convertSelectableOffsetToModelOffset(t),i=e.convertSelectableOffsetToModelOffset(n),s=new r.StateTransformation,a=new r.CursorTransformation;return o!==i?(s.addOperation(new r.stateOperations.Delete(Math.min(o,i),Math.max(o,i)-1)),a.addOperation(new r.cursorOperations.MoveTo(Math.min(t,n)))):i>0&&(s.addOperation(new r.stateOperations.Delete(i-1,i-1)),a.addOperation(new r.cursorOperations.MoveTo(n-1))),[s,a]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return function(e){var t=e.getCursor().getAnchor(),n=e.getCursor().getHead(),o=e.convertSelectableOffsetToModelOffset(t),i=e.convertSelectableOffsetToModelOffset(n),s=new r.StateTransformation,a=new r.CursorTransformation;return o!==i?(s.addOperation(new r.stateOperations.Delete(Math.min(o,i),Math.max(o,i)-1)),a.addOperation(new r.cursorOperations.MoveTo(Math.min(t,n)))):i>0&&(s.addOperation(new r.stateOperations.Delete(i,i)),a.addOperation(new r.cursorOperations.MoveTo(n))),[s,a]}}},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(45),s=n.n(i),a=(n(54),n(18)),u=n(19),f=n(21),c=n(20),l=n(22),d=n(0),h=n(46),p=n.n(h),g=n(47),v=n.n(g),y=(n(117),'\n<Doc {"id": "{{id}}"}>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec luctus commodo magna eu gravida. Quisque et neque ornare nunc maximus faucibus. Ut molestie diam non interdum fringilla. In hac habitasse platea dictumst. Proin dignissim id diam a pharetra. Praesent nec arcu felis. Nam et cursus mi. Duis facilisis ex vel leo vulputate laoreet. Pellentesque turpis quam, sollicitudin at lobortis non, rhoncus eu neque. Quisque egestas, ex vitae porta accumsan, justo dui elementum nisi, et bibendum lectus diam ut mauris. Proin imperdiet vulputate congue. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse nec tristique odio. Nulla eget tortor eu felis mattis mattis. Duis in nulla ultricies, egestas nunc ac, tempor tellus.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Cras condimentum nisi diam, vitae ornare libero porttitor at. Curabitur id nibh aliquam lacus malesuada tincidunt id eget mauris. Donec venenatis non ipsum quis fermentum. Vestibulum dignissim finibus neque, et mattis orci mollis id. Nunc pellentesque, neque sed fermentum fermentum, felis nunc porttitor lorem, et pulvinar leo quam ut elit. Quisque sit amet venenatis mauris. In hac habitasse platea dictumst. Praesent sem mauris, tincidunt ut sollicitudin et, molestie ac magna. Etiam faucibus porta dapibus. Cras velit augue, molestie id est in, ullamcorper sodales mauris. Nunc ullamcorper eros purus, eget placerat eros pharetra fermentum. Nunc ullamcorper euismod dui, tempor pulvinar mi pretium vel. Nullam nec nisi mi. Phasellus fermentum diam vel lacus bibendum imperdiet. Cras enim mi, cursus at velit feugiat, sagittis sagittis urna.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Maecenas id efficitur nulla, ornare posuere felis. Nulla lobortis tortor vel massa lobortis, sit amet rhoncus neque placerat. Curabitur maximus iaculis faucibus. In tincidunt posuere justo at pulvinar. Maecenas viverra at odio nec porta. Pellentesque ultrices eros vitae velit scelerisque, et tempor lectus sodales. Duis tempus quam nec tortor consequat consectetur. Nulla facilisi. Nam id lectus magna. Nulla metus mauris, tincidunt at ante a, pulvinar tincidunt metus. Nulla nec magna sit amet sapien feugiat commodo at in dolor. Aenean mauris enim, posuere et dolor quis, ornare sollicitudin dui. Vivamus aliquet metus turpis, in maximus enim aliquam in. Sed vel quam vitae metus condimentum aliquam.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Suspendisse egestas vulputate arcu, ut laoreet felis feugiat sed. Donec dui sem, aliquet euismod sollicitudin sed, cursus non urna. Ut blandit enim diam, vitae rhoncus nisl accumsan non. Nulla facilisi. Vestibulum nec scelerisque augue, sed volutpat est. Integer augue turpis, varius ac velit non, ornare venenatis lectus. Nullam porta neque vel risus semper ornare id a enim. Cras tristique non quam quis commodo.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Fusce condimentum arcu et diam faucibus, sit amet mattis velit pharetra. Praesent sagittis rhoncus libero, placerat ornare dui varius eget. Fusce consequat metus ut dignissim luctus. In congue lectus ut magna varius, at aliquam mi rutrum. Nam eu nunc eu ipsum varius pulvinar ac ut nulla. Nullam non elit neque. Vestibulum quis molestie dolor, eu vehicula risus. Sed luctus velit sem, id vestibulum orci blandit at. In aliquam gravida aliquam. Vivamus semper vulputate purus eu vehicula. Ut condimentum quis velit et feugiat. Curabitur eget ex eget mi interdum condimentum eget sit amet purus. Aliquam et libero erat. Aliquam erat volutpat.\n    </>\n  </>\n</>\n'.split("\n").map(function(e){return e.trim()}).join("").replace(/\.<\/>/g,".\n</>").replace(/{{id}}/g,function(){return"".concat(Math.random().toString(36).substring(2))})),_=function(e){function t(e){var n;Object(a.a)(this,t),(n=Object(f.a)(this,Object(c.a)(t).call(this,e))).domRef=void 0,n.domRef=o.a.createRef();var r=new d.Config,i=new d.Editor(r,e.initialMarkup);return i.registerExtension(new p.a),i.registerExtension(new v.a),n.state={editor:i},n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.domRef.current;this.state.editor.mount(e)}},{key:"render",value:function(){return o.a.createElement("div",{className:"tw--container",ref:this.domRef})}}]),t}(o.a.Component),w=function(e){function t(){return Object(a.a)(this,t),Object(f.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(_,{initialMarkup:y}))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[48,1,2]]]);
//# sourceMappingURL=main.3abd82a7.chunk.js.map