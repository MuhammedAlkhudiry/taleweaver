(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(75));t.MoveTo=i.default;var o=r(n(76));t.MoveHeadTo=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.operations=[],this.operations=[]}return e.prototype.addOperation=function(e){this.operations.push(e)},e.prototype.getOperations=function(){return this.operations},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.operations=[],this.operations=[],this.leftAnchor=null}return e.prototype.addOperation=function(e){this.operations.push(e)},e.prototype.getOperations=function(){return this.operations},e.prototype.setLeftAnchor=function(e){this.leftAnchor=e},e.prototype.getLeftAnchor=function(){return this.leftAnchor},e}();t.default=r},,,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(72)),a=i(n(46)),s=i(n(8)),u=function(e){function t(t){var n=e.call(this)||this;return n.version=0,n.width=t,n.children=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){if(void 0===this.height){var e=0;this.getChildren().forEach(function(t){var n=t.getHeight();n>e&&(e=n)}),this.height=e}return this.height},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Line box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){e.getHeight();this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Line box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Line box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(){this.selectableSize=void 0},t.prototype.splitAt=function(e){if(e>this.children.length)throw new Error("Error cleaving LineFlowBox, offset "+e+" is out of range.");var n=this.children.splice(e);this.selectableSize=void 0,this.height=void 0;var r=new t(this.width);return n.forEach(function(e,t){r.insertChild(e,t)}),r},t.prototype.resolvePosition=function(e,t){var n=this;return new s.default(this,t,e,function(e){for(var r=0,i=0,o=n.children.length;i<o;i++){var a=n.children[i],s=a.getSelectableSize();if(r+s>t)return a.resolvePosition(e,t-r);r+=s}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e){for(var t=0,n=0,r=0,i=this.children.length;r<i;r++){var o=this.children[r],a=o.getWidth();if(e>=n&&e<=n+a){t+=o.resolveViewportPositionToSelectableOffset(e-n);break}t+=o.getSelectableSize(),n+=a}return t===this.selectableSize?t-1:t},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],i=0,a=0,s=function(o,s){var d=u.children[o],l=d.getWidth(),f=d.getSelectableSize(),c=Math.max(e-i,0),h=Math.min(t-i,f);c<=f&&h>=0&&(c!==h||h!==f)&&d.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(e){r.push({left:a+e.left,right:n.getWidth()-a-l+e.right,top:0,bottom:0,width:e.width,height:n.getHeight()})});i+=d.getSelectableSize(),a+=l},u=this,d=0,l=this.children.length;d<l&&i<=t;d++)s(d);return o.default(r),r},t}(a.default);t.default=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),a=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.breakable=!0,n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.isBreakable=function(){return this.breakable},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Atomic box has no parent set.");return this.parent},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Atomic box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Atomic box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.resolvePosition=function(e,t){return new o.default(this,t,e)},t}(i(n(15)).default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(7)),o=r(n(9)),a=r(n(6)),s=function(){function e(e,t,n,r){this.layoutNode=e,this.selectableOffset=t,this.parent=n||null,this.level=n?n.getLevel()+1:0,this.child=r?r(this):null}return e.prototype.getLayoutNode=function(){return this.layoutNode},e.prototype.getSelectableOffset=function(){return this.selectableOffset},e.prototype.getLevel=function(){return this.level},e.prototype.getParent=function(){return this.parent},e.prototype.getChild=function(){return this.child},e.prototype.getAtomicBoxLevel=function(){return this.child?this.child.getAtomicBoxLevel():this},e.prototype.getLineFlowBoxLevel=function(){if(this.layoutNode instanceof a.default)return this;if(this.layoutNode instanceof i.default||this.layoutNode instanceof o.default){var e=this.getParent();if(!e)throw new Error("No parent.");return e.getLineFlowBoxLevel()}var t=this.getChild();if(!t)throw new Error("No child.");return t.getLineFlowBoxLevel()},e}();t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),a=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.children=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){if(void 0===this.width){var e=0;this.getChildren().forEach(function(t){e+=t.getWidth()}),this.width=e}return this.width},t.prototype.getWidthWithoutTrailingWhitespace=function(){if(void 0===this.widthWithoutTrailingWhitespace){var e=this.children[this.children.length-1];this.widthWithoutTrailingWhitespace=this.getWidth()-e.getWidth()+e.getWidthWithoutTrailingWhitespace()}return this.widthWithoutTrailingWhitespace},t.prototype.getHeight=function(){if(void 0===this.height){var e=0;this.getChildren().forEach(function(t){var n=t.getHeight();n>e&&(e=n)}),this.height=e}return this.height},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Inline box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this),this.width=void 0,this.height=void 0,this.widthWithoutTrailingWhitespace=void 0},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1),this.width=void 0,this.height=void 0,this.widthWithoutTrailingWhitespace=void 0},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Inline box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Inline box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(e){this.selectableSize=void 0,this.width=void 0,this.height=void 0,this.widthWithoutTrailingWhitespace=void 0},t.prototype.resolvePosition=function(e,t){var n=this;return new o.default(this,t,e,function(e){for(var r=0,i=0,o=n.children.length;i<o;i++){var a=n.children[i],s=a.getSelectableSize();if(r+s>t)return a.resolvePosition(e,t-r);r+=s}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e){for(var t=0,n=0,r=0,i=this.children.length;r<i;r++){var o=this.children[r],a=o.getWidth();if(e>=n&&e<=n+a){t+=o.resolveViewportPositionToSelectableOffset(e-n);break}t+=o.getSelectableSize(),n+=a}return t},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],i=0,o=0,a=function(a,u){var d=s.children[a],l=d.getWidth(),f=d.getSelectableSize(),c=Math.max(e-i,0),h=Math.min(t-i,f);c<=f&&h>=0&&d.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(e){r.push({left:o+e.left,right:n.getWidth()-o-l+e.right,top:0,bottom:0,width:e.width,height:n.getHeight()})});i+=d.getSelectableSize(),o+=l},s=this,u=0,d=this.children.length;u<d&&i<=t;u++)a(u);return r},t}(i(n(15)).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e}return e.prototype.getID=function(){return this.id},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize)throw new Error("View node has not yet been initialized with selectable size.");return this.selectableSize},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.type=e,this.attributes=t}return e.prototype.getType=function(){return this.type},e.prototype.getAttributes=function(){return this.attributes},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.syncNodes=function(e,t){if(!this.updateNode(t,e))return!1;for(var n=this.getSrcNodeChildren(e),r=this.getDstNodeChildren(t),i=0,o=0,a=n.length;o<a;o++){var s=n[o],u=this.findSrcNodeInDstNodes(s,r);if(u<i){var d=this.insertNode(t,s,i);r.splice(i,0,d),this.syncNodes(s,d),i++}else{for(var l=i;l<u;l++){var f=r[i];this.deleteNode(t,f),r.splice(i,1)}var c=r[i];this.syncNodes(s,c),i++}}for(o=i,a=r.length;o<a;o++){c=r[i];this.deleteNode(t,c),r.splice(i,1)}},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e}return e.prototype.getID=function(){return this.id},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(45)),a=i(n(16)),s=function(e){function t(t){var n=e.call(this,t+"-"+a.default())||this;return n.renderNodeID=t,n}return r(t,e),t.prototype.getRenderNodeID=function(){return this.renderNodeID},t}(o.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Math.random().toString(36).substring(2)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),a=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.width=0,n.children=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.getParent().getInnerWidth()},t.prototype.getHeight=function(){if(void 0===this.height){var e=0;this.children.forEach(function(t){e+=t.getHeight()}),this.height=e}return this.height},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Block box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Block box is not found in parent.");if(t>0)return e[t-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Block box is not found in parent.");if(t<e.length-1)return e[t+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(e){this.height=void 0,this.selectableSize=void 0},t.prototype.resolvePosition=function(e,t){var n=this;return new o.default(this,t,e,function(e){for(var r=0,i=0,o=n.children.length;i<o;i++){var a=n.children[i],s=a.getSelectableSize();if(r+s>t)return a.resolvePosition(e,t-r);r+=s}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t}(i(n(15)).default);t.default=a},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.version=0}return e.prototype.setID=function(e){this.id=e},e.prototype.getID=function(){if(!this.id)throw new Error("No ID has been set.");return this.id},e.prototype.setVersion=function(e){this.version=e},e.prototype.getVersion=function(){return this.version},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parent=null,t.children=[],t}return r(t,e),t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},t.prototype.insertChild=function(e,t){void 0===t&&(t=void 0),e.setParent(this),void 0===t?this.children.push(e):this.children.splice(t,0,e),this.size=void 0},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.setParent(null),this.children.splice(t,1),this.size=void 0},t.prototype.getChildren=function(){return this.children},t.prototype.getSize=function(){if(void 0===this.size){var e=2;this.children.forEach(function(t){e+=t.getSize()}),this.size=e}return this.size},t}(i(n(24)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parent=null,t.content="",t}return r(t,e),t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},t.prototype.setContent=function(e){this.content=e,this.size=void 0},t.prototype.getContent=function(){return this.content},t.prototype.getSize=function(){return void 0===this.size&&(this.size=2+this.content.length),this.size},t}(i(n(24)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var r=e.call(this,t)||this;return r.version=0,r.parent=n,r.children=[],r}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getParent=function(){return this.parent},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.onModelUpdated=function(e){this.selectableSize=void 0,this.modelSize=void 0},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.getModelSize=function(){if(void 0===this.modelSize){var e=2;this.children.forEach(function(t){e+=t.getModelSize()}),this.modelSize=e}return this.modelSize},t.prototype.convertSelectableOffsetToModelOffset=function(e){for(var t=0,n=1,r=0,i=this.children.length;r<i;r++){var o=this.children[r],a=o.getSelectableSize();if(t+a>e)return n+o.convertSelectableOffsetToModelOffset(e-t);t+=a,n+=o.getModelSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(i(n(14)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var r=e.call(this,t)||this;return r.version=0,r.parent=n,r.children=[],r}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.getParent=function(){return this.parent},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.onModelUpdated=function(e){this.selectableSize=void 0,this.modelSize=void 0},t.prototype.getModelSize=function(){if(void 0===this.modelSize){var e=2;this.children.forEach(function(t){e+=t.getModelSize()}),this.modelSize=e}return this.modelSize},t.prototype.convertSelectableOffsetToModelOffset=function(e){for(var t=0,n=1,r=0,i=this.children.length;r<i;r++){var o=this.children[r],a=o.getSelectableSize();if(t+a>e)return n+o.convertSelectableOffsetToModelOffset(e-t);t+=a,n+=o.getModelSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(i(n(14)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),a=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.width=0,n.height=0,n.padding=0,n.children=[],n.onUpdatedSubscribers=[],n}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getPadding=function(){return this.padding},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(e){this.width=e.getWidth(),this.height=e.getHeight(),this.padding=e.getPadding(),this.selectableSize=void 0},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t.prototype.resolvePosition=function(e){var t=this;return new o.default(this,e,void 0,function(n){for(var r=0,i=0,o=t.children.length;i<o;i++){var a=t.children[i],s=a.getSelectableSize();if(r+s>e)return a.resolvePosition(n,e-r);r+=s}throw new Error("Selectable offset "+e+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e,t,n){if(e>=this.children.length)throw new Error("Page offset "+e+" is out of range.");for(var r=0,i=0;i<e;i++)r+=this.children[i].getSelectableSize();return r+this.children[e].resolveViewportPositionToSelectableOffset(t,n)},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){var n=[];this.children.forEach(function(){n.push([])});for(var r=0,i=function(i,a){var s=o.children[i],u=s.getSelectableSize(),d=Math.max(e-r,0),l=Math.min(t-r,u);d<=u&&l>=0&&s.resolveSelectableOffsetRangeToViewportBoundingRects(d,l).forEach(function(e){n[i].push({left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height})});r+=s.getSelectableSize()},o=this,a=0,s=this.children.length;a<s&&r<=t;a++)i(a);return n},t}(i(n(15)).default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),a=function(e){function t(t,n,r){var i=e.call(this)||this;return i.version=0,i.width=t,i.height=n,i.padding=r,i.children=[],i}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getInnerWidth=function(){return this.width-this.padding-this.padding},t.prototype.getInnerHeight=function(){return this.height-this.padding-this.padding},t.prototype.getPadding=function(){return this.padding},t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){if(!this.parent)throw new Error("Page flow box has no parent set.");return this.parent},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e),e.setParent(this)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.getPreviousSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Page flow box is not found in parent.");return t>0?e[t-1]:null},t.prototype.getNextSibling=function(){var e=this.getParent().getChildren(),t=e.indexOf(this);if(t<0)throw new Error("Page flow box is not found in parent.");return t<e.length-1?e[t+1]:null},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.onRenderUpdated=function(){this.selectableSize=void 0},t.prototype.splitAt=function(e){if(e>this.children.length)throw new Error("Error cleaving PageFlowBox, offset "+e+" is out of range.");var n=this.children.splice(e);this.selectableSize=void 0;var r=new t(this.width,this.height,this.padding);return n.forEach(function(e,t){r.insertChild(e,t)}),r},t.prototype.resolvePosition=function(e,t){var n=this;return new o.default(this,t,e,function(e){for(var r=0,i=0,o=n.children.length;i<o;i++){var a=n.children[i],s=a.getSelectableSize();if(r+s>t)return a.resolvePosition(e,t-r);r+=s}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},t.prototype.resolveViewportPositionToSelectableOffset=function(e,t){for(var n=0,r=0,i=Math.min(Math.max(e-this.padding,0),this.width-this.padding),o=Math.min(Math.max(t-this.padding,0),this.height-this.padding),a=0,s=this.children.length;a<s;a++){var u=this.children[a],d=u.getHeight();if(o>=r&&o<=r+d){n+=u.resolveViewportPositionToSelectableOffset(i,o-r);break}n+=u.getSelectableSize(),r+=d}if(n===this.getSelectableSize()){var l=this.children[this.children.length-1];n-=l.getSelectableSize(),n+=l.resolveViewportPositionToSelectableOffset(i,l.getHeight())}return n},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],i=0,o=0,a=function(a,u){var d=s.children[a],l=d.getHeight(),f=d.getSelectableSize(),c=Math.max(e-i,0),h=Math.min(t-i,f);c<=f&&h>=0&&d.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(e){r.push({left:e.left+n.padding,right:e.right+n.padding,top:o+e.top+n.padding,bottom:n.height-o-l+e.bottom+n.padding,width:e.width,height:e.height})});i+=d.getSelectableSize(),o+=l},s=this,u=0,d=this.children.length;u<d&&i<=t;u++)a(u);return r},t}(i(n(46)).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=[]),this.key=e,this.modifierKeys=t}return e.prototype.getCode=function(){var e=this.modifierKeys.map(function(e){return e.getCode()}).sort(),t=this.key.getCode();return e.concat([t]).join("-")},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(48)),o=new i.default("Alt");t.AltKey=o;var a=new i.default("Ctrl");t.CtrlKey=a;var s=new i.default("Meta");t.MetaKey=s;var u=new i.default("Shift");t.ShiftKey=u},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(50)),o=new i.default("A");t.AKey=o;var a=new i.default("B");t.BKey=a;var s=new i.default("C");t.CKey=s;var u=new i.default("D");t.DKey=u;var d=new i.default("E");t.EKey=d;var l=new i.default("F");t.FKey=l;var f=new i.default("G");t.GKey=f;var c=new i.default("H");t.HKey=c;var h=new i.default("I");t.IKey=h;var p=new i.default("J");t.JKey=p;var g=new i.default("K");t.KKey=g;var v=new i.default("L");t.LKey=v;var y=new i.default("M");t.MKey=y;var _=new i.default("N");t.NKey=_;var w=new i.default("O");t.OKey=w;var b=new i.default("P");t.PKey=b;var m=new i.default("Q");t.QKey=m;var O=new i.default("R");t.RKey=O;var C=new i.default("S");t.SKey=C;var S=new i.default("T");t.TKey=S;var P=new i.default("U");t.UKey=P;var M=new i.default("V");t.VKey=M;var x=new i.default("W");t.WKey=x;var E=new i.default("X");t.XKey=E;var T=new i.default("Y");t.YKey=T;var D=new i.default("Z");t.ZKey=D;var N=new i.default("Num1");t.Num1Key=N;var j=new i.default("Num2");t.Num2Key=j;var K=new i.default("Num3");t.Num3Key=K;var z=new i.default("Num4");t.Num4Key=z;var A=new i.default("Num5");t.Num5Key=A;var V=new i.default("Num6");t.Num6Key=V;var k=new i.default("Num7");t.Num7Key=k;var B=new i.default("Num8");t.Num8Key=B;var L=new i.default("Num9");t.Num9Key=L;var R=new i.default("Num0");t.Num0Key=R;var H=new i.default("Dash");t.DashKey=H;var I=new i.default("Equal");t.EqualKey=I;var U=new i.default("Space");t.SpaceKey=U;var W=new i.default("ArrowLeft");t.ArrowLeftKey=W;var F=new i.default("ArrowRight");t.ArrowRightKey=F;var $=new i.default("ArrowUp");t.ArrowUpKey=$;var G=new i.default("ArrowDown");t.ArrowDownKey=G;var J=new i.default("Backspace");t.BackspaceKey=J;var Y=new i.default("Delete");t.DeleteKey=Y;var X=new i.default("Enter");t.EnterKey=X},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(66));t.Editor=o.default;var a=r(n(108));t.Config=a.default;var s=r(n(2));t.StateTransformation=s.default;var u=i(n(47));t.stateOperations=u;var d=r(n(11));t.OpenTagToken=d.default;var l=r(n(12));t.CloseTagToken=l.default;var f=r(n(3));t.CursorTransformation=f.default;var c=i(n(1));t.cursorOperations=c;var h=r(n(29));t.DocBox=h.default;var p=r(n(30));t.PageFlowBox=p.default;var g=r(n(17));t.BlockBox=g.default;var v=r(n(6));t.LineFlowBox=v.default;var y=r(n(9));t.InlineBox=y.default;var _=r(n(7));t.AtomicBox=_.default;var w=r(n(50));t.Key=w.default;var b=r(n(48));t.ModifierKey=b.default;var m=r(n(31));t.KeySignature=m.default;var O=i(n(33));t.keys=O;var C=i(n(32));t.modifierKeys=C;var S=r(n(120));t.Extension=S.default;var P=r(n(16));t.generateID=P.default},,,,,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var r=e.call(this)||this;return r.at=t,r.tokens=n,r}return r(t,e),t.prototype.getOffsetAdjustment=function(){return{at:this.at,delta:this.tokens.length}},t.prototype.adjustOffsetBy=function(e){this.at>=e.at&&(this.at+=e.delta)},t.prototype.getAt=function(){return this.at},t.prototype.getTokens=function(){return this.tokens},t}(i(n(40)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var r=e.call(this)||this;return r.from=t,r.to=n,r}return r(t,e),t.prototype.getOffsetAdjustment=function(){return{at:this.to,delta:this.from-this.to}},t.prototype.adjustOffsetBy=function(e){this.from>=e.at&&(this.from+=e.delta),this.to>=e.at&&(this.to+=e.delta)},t.prototype.getFrom=function(){return this.from},t.prototype.getTo=function(){return this.to},t}(i(n(40)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(24)),s={width:816,height:1056,padding:40},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=[],t.width=0,t.height=0,t.padding=0,t.onUpdatedSubscribers=[],t}return r(t,e),t.prototype.getType=function(){return"Doc"},t.prototype.insertChild=function(e,t){void 0===t&&(t=void 0),e.setParent(this),void 0===t?this.children.push(e):this.children.splice(t,0,e),this.size=void 0},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.setParent(null),this.children.splice(t,1),this.size=void 0},t.prototype.getChildren=function(){return this.children},t.prototype.getSize=function(){if(void 0===this.size){var e=2;this.children.forEach(function(t){e+=t.getSize()}),this.size=e}return this.size},t.prototype.onStateUpdated=function(e){e=i({},s,e);var t=!1;return this.width!==e.width&&(this.width=e.width,t=!0),this.height!==e.height&&(this.height=e.height,t=!0),this.padding!==e.padding&&(this.padding=e.padding,t=!0),t},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getPadding=function(){return this.padding},t.prototype.getAttributes=function(){return{id:this.id,width:this.width,height:this.height,padding:this.padding}},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t}(a.default);t.default=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.version=0,n.width=0,n.height=0,n.padding=0,n.children=[],n.onUpdatedSubscribers=[],n}return r(t,e),t.prototype.getType=function(){return"DocRenderNode"},t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getPadding=function(){return this.padding},t.prototype.getInnerWidth=function(){return this.width-this.padding-this.padding},t.prototype.getInnerHeight=function(){return this.height-this.padding-this.padding},t.prototype.getChildren=function(){return this.children},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e)},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");this.children.splice(t,1)},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var e=0;this.children.forEach(function(t){e+=t.getSelectableSize()}),this.selectableSize=e}return this.selectableSize},t.prototype.getModelSize=function(){if(void 0===this.modelSize){var e=2;this.children.forEach(function(t){e+=t.getModelSize()}),this.modelSize=e}return this.modelSize},t.prototype.convertSelectableOffsetToModelOffset=function(e){for(var t=0,n=1,r=0,i=this.children.length;r<i;r++){var o=this.children[r],a=o.getSelectableSize();if(t+a>e)return n+o.convertSelectableOffsetToModelOffset(e-t);t+=a,n+=o.getModelSize()}throw new Error("Selectable offset "+e+" is out of range.")},t.prototype.onModelUpdated=function(e){this.id=e.getID(),this.width=e.getWidth(),this.height=e.getHeight(),this.padding=e.getPadding(),this.selectableSize=void 0,this.modelSize=void 0},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t}(i(n(14)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var r=e.call(this,t)||this;return r.version=0,r.parent=n,r}return r(t,e),t.prototype.setVersion=function(e){this.version=e},t.prototype.getVersion=function(){return this.version},t.prototype.getParent=function(){return this.parent},t.prototype.getModelSize=function(){return this.getSelectableSize()},t.prototype.convertSelectableOffsetToModelOffset=function(e){return e},t}(i(n(14)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e}return e.prototype.getID=function(){return this.id},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(45)),a=i(n(16)),s=function(e){function t(){return e.call(this,a.default())||this}return r(t,e),t}(o.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(39));t.Insert=i.default;var o=r(n(41));t.Delete=o.default},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(i(n(49)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.code=e}return e.prototype.getCode=function(){return this.code},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(i(n(49)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(78));t.moveTo=i.default;var o=r(n(79));t.moveHeadTo=o.default;var a=r(n(80));t.moveLeft=a.default;var s=r(n(81));t.moveRight=s.default;var u=r(n(82));t.moveHeadLeft=u.default;var d=r(n(83));t.moveHeadRight=d.default;var l=r(n(84));t.moveLeftByWord=l.default;var f=r(n(85));t.moveRightByWord=f.default;var c=r(n(86));t.moveHeadLeftByWord=c.default;var h=r(n(87));t.moveHeadRightByWord=h.default;var p=r(n(88));t.moveToLeftOfLine=p.default;var g=r(n(89));t.moveToRightOfLine=g.default;var v=r(n(90));t.moveHeadToLeftOfLine=v.default;var y=r(n(91));t.moveHeadToRightOfLine=y.default;var _=r(n(92));t.moveToLineAbove=_.default;var w=r(n(93));t.moveToLineBelow=w.default;var b=r(n(94));t.moveHeadToLineAbove=b.default;var m=r(n(95));t.moveHeadToLineBelow=m.default;var O=r(n(96));t.moveToLeftOfDoc=O.default;var C=r(n(97));t.moveToRightOfDoc=C.default;var S=r(n(98));t.moveHeadToLeftOfDoc=S.default;var P=r(n(99));t.moveHeadToRightOfDoc=P.default;var M=r(n(100));t.selectAll=M.default},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n}return r(t,e),t.prototype.resolveSelectableOffsetToNodeOffset=function(e){for(var t=0,n=0,r=this.children.length;n<r;n++){var i=this.children[n];if(t+i.getSelectableSize()>e)return i.resolveSelectableOffsetToNodeOffset(e-t);t+=i.getSelectableSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(i(n(10)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(i(n(10)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(7)),a=i(n(117)),s={fontFamily:"Arial",fontSize:18,fontWeight:400,lineHeight:36,letterSpacing:0},u=function(e){function t(t){var n=e.call(this,t)||this;return n.content="",n}return r(t,e),t.prototype.getWidth=function(){if(void 0===this.width||void 0===this.height){var e=a.default(this.content,s);this.width=e.width,this.height=e.height}return this.width},t.prototype.getWidthWithoutTrailingWhitespace=function(){if(void 0===this.widthWithoutTrailingWhitespace)if(this.breakable){var e=a.default(this.content.substring(0,this.content.length-1),s);this.widthWithoutTrailingWhitespace=e.width}else this.widthWithoutTrailingWhitespace=this.getWidth();return this.widthWithoutTrailingWhitespace},t.prototype.getHeight=function(){if(void 0===this.width||void 0===this.height){var e=a.default(this.content,s);this.width=e.width,this.height=e.height}return this.height},t.prototype.getContent=function(){return this.content},t.prototype.getSelectableSize=function(){return this.content.length},t.prototype.onRenderUpdated=function(e){this.content=e.getContent(),this.breakable=e.getBreakable(),this.width=void 0,this.height=void 0},t.prototype.resolveViewportPositionToSelectableOffset=function(e){for(var t=0,n=0,r=this.content.length;n<r;n++){var i=a.default(this.content.substring(0,n),s).width;if(!(i<e))return e-t<i-e?n-1:n;t=i}return e-t<this.getWidth()-e?this.content.length-1:this.content.length},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){if(0===e&&t===this.getSelectableSize())return[{left:0,right:0,top:0,bottom:0,width:this.getWidth(),height:this.getHeight()}];var n=a.default(this.content.substring(0,e),s),r=a.default(this.content.substring(0,t),s);return[{left:n.width,right:this.getWidth()-r.width,top:0,bottom:0,width:r.width-n.width,height:this.getHeight()}]},t}(o.default);t.default=u},,,,function(e,t,n){e.exports=n(126)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(67)),o=r(n(69)),a=r(n(70)),s=r(n(71)),u=r(n(73)),d=r(n(105)),l=r(n(106)),f=r(n(107)),c=function(){function e(e,t){this.config=e,this.cursor=new f.default(this),this.tokenizer=new i.default(this.config,t),this.state=this.tokenizer.getState(),this.dispatcher=new d.default(this),this.parser=new o.default(this.config,this.state),this.renderEngine=new a.default(this.config,this.parser.getDoc()),this.layoutEngine=new s.default(this.config,this.renderEngine.getDocRenderNode()),this.presenter=new u.default(this),this.extensionProvider=new l.default(this)}return e.prototype.getConfig=function(){return this.config},e.prototype.getCursor=function(){return this.cursor},e.prototype.getState=function(){return this.state},e.prototype.getDispatcher=function(){return this.dispatcher},e.prototype.getDocViewNode=function(){return this.presenter.getDocViewNode()},e.prototype.getRenderEngine=function(){return this.renderEngine},e.prototype.getLayoutEngine=function(){return this.layoutEngine},e.prototype.getPresenter=function(){return this.presenter},e.prototype.mount=function(e){this.domWrapper=e,this.presenter.mount(e),this.extensionProvider.onMounted()},e.prototype.registerExtension=function(e){this.extensionProvider.registerExtension(e)},e.prototype.convertSelectableOffsetToModelOffset=function(e){return this.renderEngine.getDocRenderNode().convertSelectableOffsetToModelOffset(e)},e}();t.default=c},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(n(11)),a=r(n(12)),s=r(n(68));!function(e){e[e.NewToken=0]="NewToken",e[e.NewTag=1]="NewTag",e[e.Tag=2]="Tag",e[e.TagAttributes=3]="TagAttributes",e[e.TagAttributesString=4]="TagAttributesString",e[e.TagAttributesStringEscape=5]="TagAttributesStringEscape",e[e.CloseTag=6]="CloseTag"}(i||(i={}));var u=function(){function e(e,t){this.config=e,this.markup=t,this.tokenizerState=i.NewToken,this.state=new s.default,this.tokens=[],this.tagBuffer="",this.attributesBuffer="",this.ran=!1}return e.prototype.getState=function(){return this.ran||this.run(),this.state},e.prototype.run=function(){for(var e,t=this.markup,n=0,r=t.length;n<r;n++)switch(e=t[n],this.tokenizerState){case i.NewToken:if(/</.test(e)){this.newTag(e);break}this.appendChar(e);break;case i.NewTag:if(/A-Z/.test(e)){this.appendCharToTag(e);break}if(/\//.test(e)){this.closeTag(e);break}case i.Tag:if(/[A-Za-z]/.test(e)){this.appendCharToTag(e);break}if(/{/.test(e)){this.newAttributes(e);break}case i.TagAttributes:if(/"/.test(e)){this.newAttributesString(e);break}if(/>/.test(e)){this.endTag(e);break}this.appendCharToAttributes(e);break;case i.TagAttributesString:if(/"/.test(e)){this.endAttributesString(e);break}if(/\\/.test(e)){this.escapeNextAttributesStringChar(e);break}this.appendCharToAttributes(e);break;case i.TagAttributesStringEscape:this.appendCharToAttributes(e);break;case i.CloseTag:if(/>/.test(e)){this.endCloseTag(e);break}default:throw new Error("Unexpected character "+e+" at offset "+n+".")}this.state.setTokens(this.tokens),this.ran=!0},e.prototype.newTag=function(e){this.tokenizerState=i.NewTag},e.prototype.appendChar=function(e){this.tokens.push(e)},e.prototype.appendCharToTag=function(e){this.tagBuffer+=e,this.tokenizerState=i.Tag},e.prototype.newAttributes=function(e){this.attributesBuffer+=e,this.tokenizerState=i.TagAttributes},e.prototype.appendCharToAttributes=function(e){this.attributesBuffer+=e,this.tokenizerState===i.TagAttributesStringEscape&&(this.tokenizerState=i.TagAttributesString)},e.prototype.newAttributesString=function(e){this.attributesBuffer+=e,this.tokenizerState=i.TagAttributesString},e.prototype.endTag=function(e){var t;try{t=JSON.parse(this.attributesBuffer)}catch(r){throw new Error("Invalid attributes JSON: "+this.attributesBuffer+".")}if(!("id"in t))throw new Error("Missing id in attributes JSON: "+this.attributesBuffer+".");if(!this.tagBuffer)throw new Error("Open tag type cannot be empty.");var n=new o.default(this.tagBuffer,t);this.tokens.push(n),this.attributesBuffer="",this.tagBuffer="",this.tokenizerState=i.NewToken},e.prototype.endAttributesString=function(e){this.attributesBuffer+=e,this.tokenizerState=i.TagAttributes},e.prototype.escapeNextAttributesStringChar=function(e){this.tokenizerState=i.TagAttributesStringEscape},e.prototype.closeTag=function(e){this.tokenizerState=i.CloseTag},e.prototype.endCloseTag=function(e){var t=new a.default;this.tokens.push(t),this.tokenizerState=i.NewToken},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(11)),o=r(n(12)),a=r(n(39)),s=r(n(41)),u=function(){function e(){this.tokens=[],this.onUpdatedSubscribers=[]}return e.prototype.setTokens=function(e){this.tokens=e,this.onUpdated()},e.prototype.getTokens=function(){return this.tokens},e.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},e.prototype.applyTransformation=function(e){var t=this,n=e.getOperations();if(0!==n.length){var r=[];n.forEach(function(e){var n;if(r.forEach(function(t){return e.adjustOffsetBy(t)}),e instanceof a.default)(n=t.tokens).splice.apply(n,[e.getAt(),0].concat(e.getTokens()));else{if(!(e instanceof s.default))throw new Error("Unknown state transformation operation encountered.");for(t.tokens.splice(e.getFrom(),e.getTo()-e.getFrom());t.tokens[e.getFrom()-1]instanceof i.default&&t.tokens[e.getFrom()]instanceof o.default;)t.tokens.splice(e.getFrom()-1,2)}r.push(e.getOffsetAdjustment())}),this.onUpdated()}},e.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=i(n(13)),s=i(n(11)),u=i(n(12)),d=i(n(42)),l=i(n(25)),f=i(n(26)),c=function(e){function t(t,n){var r=e.call(this)||this;return r.config=t,r.lastVersion=n,r}return r(t,e),t.prototype.getSrcNodeChildren=function(e){return e instanceof d.default?e.getChildren():e instanceof l.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){return e instanceof d.default?e.getChildren().slice():e instanceof l.default?e.getChildren().slice():[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getID()===n})},t.prototype.insertNode=function(e,t,n){if(e instanceof d.default&&t instanceof l.default){if(!((r=new(this.config.getElementClass(t.getType())))instanceof l.default))throw new Error("Error inserting element, expecting block element.");return r.setID(t.getID()),e.insertChild(r,n),this.updateElementVersion(r),r}if(e instanceof l.default&&t instanceof f.default){var r;if(!((r=new(this.config.getElementClass(t.getType())))instanceof f.default))throw new Error("Error inserting element, expecting inline element.");return r.setID(t.getID()),e.insertChild(r,n),this.updateElementVersion(r),r}throw new Error("Error inserting element, type mismatch.")},t.prototype.deleteNode=function(e,t){if(e instanceof d.default&&t instanceof l.default)return e.deleteChild(t),void this.updateElementVersion(e);if(e instanceof l.default&&t instanceof f.default)return e.deleteChild(t),void this.updateElementVersion(e);throw new Error("Error deleting element, type mismatch.")},t.prototype.updateNode=function(e,t){if(e instanceof d.default&&t instanceof d.default){var n=t.getAttributes();return e.onStateUpdated(n)&&this.updateElementVersion(e),!0}if(e instanceof l.default&&t instanceof l.default){n=t.getAttributes();return e.onStateUpdated(n)&&this.updateElementVersion(e),!0}if(e instanceof f.default&&t instanceof f.default){n=t.getAttributes();var r=!1;e.onStateUpdated(n)&&(r=!0);var i=t.getContent();return e.getContent()!==i&&(e.setContent(i),r=!0),r&&this.updateElementVersion(e),!0}throw new Error("Error updating render node, type mismatch.")},t.prototype.updateElementVersion=function(e){e.setVersion(this.lastVersion+1),e instanceof f.default?this.updateElementVersion(e.getParent()):e instanceof l.default&&this.updateElementVersion(e.getParent())},t}(a.default);!function(e){e[e.NewDoc=0]="NewDoc",e[e.NewElement=1]="NewElement",e[e.InlineElement=2]="InlineElement"}(o||(o={}));var h=function(){function e(){this.elements=[]}return e.prototype.push=function(e){this.elements.push(e)},e.prototype.pop=function(){return this.elements.pop()},e.prototype.peek=function(){return this.elements[this.elements.length-1]},e}(),p=function(){function e(e,t){var n=this;this.config=e,this.state=t,this.parserState=o.NewDoc,this.doc=new d.default,this.stack=new h,this.contentBuffer="",this.ran=!1,this.version=0,this.state.subscribeOnUpdated(function(){n.parserState=o.NewDoc,n.run()})}return e.prototype.getDoc=function(){return this.ran||this.run(),this.doc},e.prototype.run=function(){var e=new d.default;this.stack=new h,this.stack.push(e);for(var t,n=this.state.getTokens(),r=0,i=n.length;r<i;r++)switch(t=n[r],this.parserState){case o.NewDoc:if(t instanceof s.default&&"Doc"===t.getType()){this.newDoc(t);break}case o.NewElement:if(t instanceof s.default){this.newElement(t);break}if("string"===typeof t){this.appendToContent(t);break}if(t instanceof u.default){this.closeNode(t);break}this.appendToContent(t);break;case o.InlineElement:if("string"===typeof t){this.appendToContent(t);break}if(t instanceof u.default){this.closeNode(t);break}default:throw new Error("Unexpected token at offset "+r+".")}var a=new c(this.config,this.version);this.doc.setID(e.getID()),a.syncNodes(e,this.doc),this.ran=!0,this.version=this.doc.getVersion(),this.doc.onUpdated()},e.prototype.newDoc=function(e){var t=this.stack.peek();if(!(t instanceof d.default))throw new Error("Expected doc.");var n=e.getAttributes();t.setID(n.id),t.onStateUpdated(n),this.parserState=o.NewElement},e.prototype.newElement=function(e){var t=this.stack.peek();if(!t)throw new Error("Unexpected end of doc encountered.");var n=new(this.config.getElementClass(e.getType())),r=e.getAttributes();if(n.setID(r.id),n.onStateUpdated(r),t instanceof d.default){if(!(n instanceof l.default))throw new Error("Unexpected child element for doc.");t.insertChild(n)}else if(t instanceof l.default){if(!(n instanceof f.default))throw new Error("Unexpected child element for block element.");t.insertChild(n)}this.stack.push(n)},e.prototype.appendToContent=function(e){this.contentBuffer+=e,this.parserState=o.InlineElement},e.prototype.closeNode=function(e){var t=this.stack.pop();if(void 0===t)throw new Error("Unexpected end of doc encountered.");t instanceof f.default&&t.setContent(this.contentBuffer),this.contentBuffer="",this.parserState=o.NewElement},e}();t.default=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(13)),a=i(n(42)),s=i(n(25)),u=i(n(26)),d=i(n(43)),l=i(n(27)),f=i(n(28)),c=function(e){function t(t,n){var r=e.call(this)||this;return r.config=t,r.lastVersion=n,r}return r(t,e),t.prototype.getSrcNodeChildren=function(e){return e instanceof a.default?e.getChildren():e instanceof s.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){return e instanceof d.default?e.getChildren().slice():e instanceof l.default?e.getChildren().slice():[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getID()===n})},t.prototype.insertNode=function(e,t,n){if(e instanceof d.default&&t instanceof s.default){var r=new(this.config.getRenderNodeClass(t.getType()))(t.getID(),e);if(!(r instanceof l.default))throw new Error("Error inserting render node, expecting block render node.");return r.setVersion(t.getVersion()),e.insertChild(r,n),r}if(e instanceof l.default&&t instanceof u.default){var i=new(this.config.getRenderNodeClass(t.getType()))(t.getID(),e);if(!(i instanceof f.default))throw new Error("Error inserting render node, expecting inline render node.");return i.setVersion(t.getVersion()),e.insertChild(i,n),i}throw new Error("Error inserting render node, type mismatch.")},t.prototype.deleteNode=function(e,t){if(e instanceof d.default&&t instanceof l.default)e.deleteChild(t);else{if(!(e instanceof l.default&&t instanceof f.default))throw new Error("Error deleting render node, type mismatch.");e.deleteChild(t)}},t.prototype.updateNode=function(e,t){if(e instanceof d.default&&t instanceof a.default)return!(t.getVersion()<=this.lastVersion)&&(e.onModelUpdated(t),e.setVersion(t.getVersion()),!0);if(e instanceof l.default&&t instanceof s.default)return!(t.getVersion()<=this.lastVersion)&&(e.onModelUpdated(t),e.setVersion(t.getVersion()),!0);if(e instanceof f.default&&t instanceof u.default)return!(t.getVersion()<=this.lastVersion)&&(e.onModelUpdated(t),e.setVersion(t.getVersion()),!0);throw new Error("Error updating render node, type mismatch.")},t}(o.default),h=function(){function e(e,t){var n=this;this.config=e,this.doc=t,this.docRenderNode=new d.default(t.getID()),this.ran=!1,this.version=-1,this.doc.subscribeOnUpdated(function(){n.run()})}return e.prototype.getDocRenderNode=function(){return this.ran||this.run(),this.docRenderNode},e.prototype.run=function(){new c(this.config,this.version).syncNodes(this.doc,this.docRenderNode),this.ran=!0,this.version=this.doc.getVersion(),this.docRenderNode.onUpdated()},e.prototype.getNextVersion=function(){return this.docRenderNode.getVersion()+1},e}();t.default=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(13)),a=i(n(43)),s=i(n(27)),u=i(n(28)),d=i(n(44)),l=i(n(29)),f=i(n(30)),c=i(n(17)),h=i(n(6)),p=i(n(9)),g=i(n(7)),v=function(e){function t(t,n){var r=e.call(this)||this;return r.config=t,r.lastVersion=n,r.updatedPageFlowBoxes=[],r.updatedLineFlowBoxes=[],r}return r(t,e),t.prototype.getUpdatedPageFlowBoxes=function(){return Array.from(this.updatedPageFlowBoxes)},t.prototype.getUpdatedLineFlowBoxes=function(){return Array.from(this.updatedLineFlowBoxes)},t.prototype.getSrcNodeChildren=function(e){return e instanceof a.default?e.getChildren():e instanceof s.default?e.getChildren():e instanceof u.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){if(e instanceof l.default){var t=[];return e.getChildren().map(function(e){t.push.apply(t,e.getChildren())}),t}if(e instanceof c.default){var n=[];return e.getChildren().map(function(e){n.push.apply(n,e.getChildren())}),n}return e instanceof p.default?e.getChildren().slice():[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getRenderNodeID()===n})},t.prototype.insertNode=function(e,t,n){if(e instanceof l.default&&t instanceof s.default){var r=new(this.config.getBoxClass(t.getType()))(t.getID());if(!(r instanceof c.default))throw new Error("Error inserting box, expecting block box.");r.setVersion(t.getVersion());for(var i=e.getChildren(),o=0,a=!1,v=0,y=i.length;v<y;v++){if(o+(_=i[v]).getChildren().length>=n){_.insertChild(r,n-o),this.updatedPageFlowBoxes.push(_),a=!0;break}o+=_.getChildren().length}if(!a){var _=new f.default(e.getWidth(),e.getHeight(),e.getPadding());e.insertChild(_,i.length),_.insertChild(r,0),this.updatedPageFlowBoxes.push(_)}return r}if(e instanceof c.default&&t instanceof u.default){var w=new(this.config.getBoxClass(t.getType()))(t.getID());if(!(w instanceof p.default))throw new Error("Error inserting box, expecting inline box.");w.setVersion(t.getVersion());var b=e.getChildren();for(o=0,a=!1,v=0,y=b.length;v<y;v++){if(o+(m=b[v]).getChildren().length>=n){m.insertChild(w,n-o),this.updatedLineFlowBoxes.push(m),a=!0;break}o+=m.getChildren().length}if(!a){var m=new h.default(e.getWidth());e.insertChild(m,b.length),m.insertChild(w,0),this.updatedLineFlowBoxes.push(m)}return w}if(e instanceof p.default&&t instanceof d.default){var O=new(this.config.getBoxClass(t.getType()))(t.getID());if(!(O instanceof g.default))throw new Error("Error inserting box, expecting atomic box.");return O.setVersion(t.getVersion()),e.insertChild(O,n),O}throw new Error("Error inserting box, type mismatch.")},t.prototype.deleteNode=function(e,t){if(e instanceof l.default&&t instanceof c.default)for(var n=e.getChildren(),r=0,i=n.length;r<i;r++){var o=n[r];if(o.getChildren().indexOf(t)>=0){o.deleteChild(t),0===o.getChildren().length?e.deleteChild(o):this.updatedPageFlowBoxes.push(o);break}}else if(e instanceof c.default&&t instanceof p.default){var a=e.getChildren();for(r=0,i=a.length;r<i;r++){var s=a[r];if(s.getChildren().indexOf(t)>=0){s.deleteChild(t),0===s.getChildren().length?e.deleteChild(s):this.updatedLineFlowBoxes.push(s);break}}}else{if(!(e instanceof p.default&&t instanceof g.default))throw new Error("Error deleting box, type mismatch.");e.deleteChild(t)}},t.prototype.updateNode=function(e,t){if(e instanceof l.default&&t instanceof a.default){if(t.getVersion()<=this.lastVersion)return!1;for(var n=void 0,r=0;r<e.getChildren().length;r++){for(var i=e.getChildren()[r],o=0;o<i.getChildren().length;o++){var f=i.getChildren()[o];n&&f.getRenderNodeID()===n.getRenderNodeID()?(n.join(f),i.deleteChild(f),o--):n=f}0===i.getChildren().length?(e.deleteChild(i),r--):this.updatedPageFlowBoxes.push(i)}return e.onRenderUpdated(t),e.setVersion(t.getVersion()),!0}if(e instanceof c.default&&t instanceof s.default){if(t.getVersion()<=this.lastVersion)return!1;for(n=void 0,r=0;r<e.getChildren().length;r++){var h=e.getChildren()[r];for(o=0;o<h.getChildren().length;o++){var v=h.getChildren()[o];n&&v.getRenderNodeID()===n.getRenderNodeID()?(n.join(v),h.deleteChild(v),o--):n=v}0===h.getChildren().length?(e.deleteChild(h),r--):this.updatedLineFlowBoxes.push(h)}return e.onRenderUpdated(t),e.setVersion(t.getVersion()),(y=e.getParent()).getVersion()<t.getVersion()&&y.setVersion(t.getVersion()),this.updatedPageFlowBoxes.push(y),!0}var y;if(e instanceof p.default&&t instanceof u.default)return!(t.getVersion()<=this.lastVersion)&&(e.onRenderUpdated(t),e.setVersion(t.getVersion()),(y=e.getParent()).getVersion()<t.getVersion()&&y.setVersion(t.getVersion()),this.updatedLineFlowBoxes.push(y),!0);if(e instanceof g.default&&t instanceof d.default)return!(t.getVersion()<=this.lastVersion)&&(e.onRenderUpdated(t),e.setVersion(t.getVersion()),!0);throw new Error("Error updating box, type mismatch.")},t}(o.default),y=function(){function e(e,t){var n=this;this.config=e,this.docRenderNode=t,this.docBox=new l.default(t.getID()),this.docBox.onRenderUpdated(t),this.ran=!1,this.version=-1,this.docRenderNode.subscribeOnUpdated(function(){n.run()})}return e.prototype.getDocBox=function(){return this.ran||this.run(),this.docBox},e.prototype.run=function(){var e=this,t=new v(this.config,this.version);t.syncNodes(this.docRenderNode,this.docBox);var n=this.docRenderNode.getVersion(),r=t.getUpdatedLineFlowBoxes(),i=void 0;r.forEach(function(t){i&&i===t||(e.reflowLineFlowBox(t,n),i=t)});var o=t.getUpdatedPageFlowBoxes(),a=void 0;o.forEach(function(t){a&&a===t||(e.reflowPageFlowBox(t,n),a=t)}),this.ran=!0,this.version=n,this.docBox.onUpdated()},e.prototype.reflowLineFlowBox=function(e,t){e.onRenderUpdated(),e.setVersion(t);var n=e,r=n.getParent();if(!(r.getChildren().indexOf(n)<0))for(var i=n.getWidth(),o=0,a=0;;){for(var s=n.getChildren()[a];o+s.getWidthWithoutTrailingWhitespace()>i;)for(var u=0;u<s.getChildren().length;u++){var d=s.getChildren()[u];if(o+d.getWidthWithoutTrailingWhitespace()>i){var l=n.splitAt(a+1);n.setVersion(t),l.setVersion(t),r.insertChild(l,r.getChildren().indexOf(n)+1),n=l,a=0;var f=s.splitAt(u);0===s.getChildren().length?s.getParent().deleteChild(s):s.setVersion(t),f.setVersion(t),n.insertChild(f,n.getChildren().indexOf(s)+1),s=f,u=0,o=0;break}o+=d.getWidth()}if(o+=s.getWidth(),++a===n.getChildren().length){var c=r.getChildren().indexOf(n)+1;if(c>=r.getChildren().length)break;var h=r.getChildren()[c];if(!(o+h.getChildren()[0].getChildren()[0].getWidth()<=n.getWidth()))break;h.getChildren().forEach(function(e){n.insertChild(e,n.getChildren().length),e.setVersion(t)}),r.deleteChild(h)}}},e.prototype.reflowPageFlowBox=function(e,t){var n=this;e.onRenderUpdated(),e.setVersion(t);var r=e,i=r.getParent();if(!(i.getChildren().indexOf(r)<0))for(var o=r.getInnerHeight(),a=0,s=0;;){for(var u=r.getChildren()[s];a+u.getHeight()>o;)for(var d=0;d<u.getChildren().length;d++){var l=u.getChildren()[d];if(a+l.getHeight()>o){var f=r.splitAt(s+1);r.setVersion(t),f.setVersion(t),i.insertChild(f,i.getChildren().indexOf(r)+1),r=f,s=0;var c=u.splitAt(d);0===u.getChildren().length?u.getParent().deleteChild(u):u.setVersion(t),this.bumpVersionForBlockBoxAndDescendents(c,t),r.insertChild(c,r.getChildren().indexOf(u)+1),u=c,d=0,a=0;break}a+=l.getHeight()}if(a+=u.getHeight(),++s===r.getChildren().length){var h=i.getChildren().indexOf(r)+1;if(h>=i.getChildren().length)break;var p=i.getChildren()[h];if(!(a+p.getChildren()[0].getChildren()[0].getHeight()<=r.getInnerHeight()))break;p.getChildren().forEach(function(e){r.insertChild(e,r.getChildren().length),n.bumpVersionForBlockBoxAndDescendents(e,t)}),i.deleteChild(p)}}},e.prototype.bumpVersionForBlockBoxAndDescendents=function(e,t){e.setVersion(t),e.getChildren().forEach(function(e){e.setVersion(t),e.getChildren().forEach(function(e){e.setVersion(t),e.getChildren().forEach(function(e){e.setVersion(t)})})})},e}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(0!==t){var r=e[t-1];n.top===r.top&&n.height===r.height&&n.left===r.left+r.width&&(r.width+=n.width,r.right=n.right,e.splice(t,1),t-=1)}}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(74)),a=i(n(29)),s=i(n(30)),u=i(n(17)),d=i(n(6)),l=i(n(9)),f=i(n(101)),c=i(n(52)),h=i(n(102)),p=i(n(103)),g=i(n(53)),v=i(n(104)),y=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.config=t,o.lastVersion=n,o.idMap=r,o.domObserver=i,o}return r(t,e),t.prototype.getSrcNodeChildren=function(e){return e instanceof a.default?e.getChildren():e instanceof s.default?e.getChildren():e instanceof u.default?e.getChildren():e instanceof d.default?e.getChildren():[]},t.prototype.getDstNodeChildren=function(e){return e instanceof f.default?e.getChildren().slice():e instanceof h.default?e.getChildren().slice():e instanceof c.default?e.getChildren().slice():e instanceof p.default?e.getChildren().slice():[]},t.prototype.findSrcNodeInDstNodes=function(e,t){var n=e.getID();return t.findIndex(function(e){return e.getID()===n})},t.prototype.insertNode=function(e,t,n){var r=this;if(e instanceof f.default&&t instanceof s.default){var i=new h.default(t.getID());return e.insertChild(i,n),this.idMap.set(t.getID(),[t,i]),setTimeout(function(){r.domObserver.connectPage(i)}),i}if(e instanceof h.default&&t instanceof u.default){var o=new(this.config.getViewNodeClass(t.getType()))(t.getID());if(!(o instanceof c.default))throw new Error("Error inserting view node, expected block view to be built from block box.");return e.insertChild(o,n),this.idMap.set(t.getID(),[t,o]),o}if(e instanceof c.default&&t instanceof d.default){var a=new p.default(t.getID());return e.insertChild(a,n),this.idMap.set(t.getID(),[t,a]),a}if(e instanceof p.default&&t instanceof l.default){var v=new(this.config.getViewNodeClass(t.getType()))(t.getID());if(!(v instanceof g.default))throw new Error("Error inserting view node, expected inline view to be built from inline box.");return e.insertChild(v,n),this.idMap.set(t.getID(),[t,v]),v}throw new Error("Error inserting view node, type mismatch.")},t.prototype.deleteNode=function(e,t){var n=this;if(e instanceof f.default&&t instanceof h.default)return e.deleteChild(t),this.idMap.delete(t.getID()),void setTimeout(function(){n.domObserver.disconnectPage(t)});if(e instanceof h.default&&t instanceof c.default)return e.deleteChild(t),void this.idMap.delete(t.getID());if(e instanceof c.default&&t instanceof p.default)return e.deleteChild(t),void this.idMap.delete(t.getID());if(e instanceof p.default&&t instanceof g.default)return e.deleteChild(t),void this.idMap.delete(t.getID());throw new Error("Error deleting view node, type mismatch.")},t.prototype.updateNode=function(e,t){if(e instanceof f.default&&t instanceof a.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof h.default&&t instanceof s.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof c.default&&t instanceof u.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof p.default&&t instanceof d.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);if(e instanceof g.default&&t instanceof l.default)return!(t.getVersion()<=this.lastVersion)&&(e.onLayoutUpdated(t),!0);throw new Error("Error updating view node, type mismatch.")},t}(i(n(13)).default),_=function(){function e(e){var t=this;this.editor=e;var n=e.getLayoutEngine().getDocBox(),r=e.getCursor();this.docViewNode=new f.default(n.getID()),this.cursorView=new v.default(e),this.domObserver=new o.default(e),this.onMountedSubscribers=[],this.mounted=!1,this.version=-1,this.idMap=new Map,n.subscribeOnUpdated(function(){t.run()}),r.subscribeOnUpdated(function(){t.updateCursorView()})}return e.prototype.mount=function(e){this.mounted||(this.domWrapper=e,this.run(),e.appendChild(this.docViewNode.getDOMContainer()),this.mounted=!0,this.domObserver.connectDoc(this.docViewNode),this.onMountedSubscribers.forEach(function(e){return e()}))},e.prototype.getDocViewNode=function(){return this.docViewNode},e.prototype.subscribeOnMounted=function(e){this.onMountedSubscribers.push(e)},e.prototype.getPageDOMContentContainer=function(e){var t=this.docViewNode.getChildren();if(e<0||e>=t.length)throw new Error("Page offset "+e+" is out of range.");return t[e].getDOMContentContainer()},e.prototype.resolveDOMNodePosition=function(e,t){for(var n=e instanceof HTMLElement?e:e.parentElement;n;){var r=n.getAttribute("data-tw-id");if(r){var i=this.idMap.get(r);if(!i)throw new Error("View node "+r+" is not registered, even though it is in the DOM.");var o=i[0],a=i[1];if(!(o instanceof l.default&&a instanceof g.default))return console.log("TODO: Determine inline position",e,t,e.textContent,o,a),-1;for(var f=a.resolveSelectionOffset(t),c=o;c;)if(c instanceof l.default){for(var h=(p=c.getParent().getChildren()).indexOf(c);h>0;)f+=p[--h].getSelectableSize();c=c.getParent()}else if(c instanceof d.default){for(h=(p=c.getParent().getChildren()).indexOf(c);h>0;)f+=p[--h].getSelectableSize();c=c.getParent()}else if(c instanceof u.default){for(h=(p=c.getParent().getChildren()).indexOf(c);h>0;)f+=p[--h].getSelectableSize();c=c.getParent()}else{if(!(c instanceof s.default))break;var p;for(h=(p=c.getParent().getChildren()).indexOf(c);h>0;)f+=p[--h].getSelectableSize();c=c.getParent()}return f}n=n.parentElement}return-1},e.prototype.getViewNodeByID=function(e){var t=this.idMap.get(e);if(!t)throw new Error("View node "+e+" is not registered.");return t[1]},e.prototype.run=function(){new y(this.editor.getConfig(),this.version,this.idMap,this.domObserver).syncNodes(this.editor.getLayoutEngine().getDocBox(),this.docViewNode),this.version=this.editor.getLayoutEngine().getDocBox().getVersion(),this.docViewNode.onUpdated(),this.updateCursorView()},e.prototype.updateCursorView=function(){this.cursorView.onUpdated(this.editor.getCursor(),this.editor.getLayoutEngine().getDocBox(),this.docViewNode.getChildren())},e}();t.default=_},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=n(47),s=r(n(3)),u=n(1),d=r(n(77)),l=i(n(51));var f=function(){function e(e){var t=this;this.onFocus=function(e){t.isFocused=!0},this.onBlur=function(e){t.isFocused=!1},this.onMouseDown=function(e){if(e.target instanceof HTMLElement){for(var n=!1,r=e.target;r;){if("page"===r.getAttribute("data-tw-role")){n=!0;break}r=r.parentElement}if(n){t.isMouseDown=!0;var i=t.resolveScreenPosition(e.clientX,e.clientY);i<0||t.editor.getDispatcher().dispatchCommand(l.moveTo(i))}}},this.onMouseMove=function(e){if(t.isMouseDown){var n=t.resolveScreenPosition(e.clientX,e.clientY);n<0||t.editor.getDispatcher().dispatchCommand(l.moveHeadTo(n))}},this.onMouseUp=function(e){t.isMouseDown=!1},this.onKeyDown=function(e){var n=d.default(e);n&&(t.editor.getDispatcher().dispatchKeyPress(n)&&e.preventDefault())},this.handleMutations=function(e){t.pauseMutationObserver(),t.syncCursorWithDOM();var n=new o.default;e.forEach(function(e){"childList"===e.type?t.handleChildListMutation(e,n):"characterData"===e.type&&t.handleCharacterDataMutation(e,n)}),t.editor.getState().applyTransformation(n),t.resumeMutationObserver()},this.editor=e,this.isFocused=!1,this.isMouseDown=!1,this.mutationObserver=new MutationObserver(this.handleMutations),this.pageViewNodes=[]}return e.prototype.connectDoc=function(e){this.docViewNode=e;var t=e.getDOMContainer();t.addEventListener("focus",this.onFocus),t.addEventListener("blur",this.onBlur),t.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("keydown",this.onKeyDown)},e.prototype.connectPage=function(e){this.pageViewNodes.indexOf(e)>=0||(this.pauseMutationObserver(),this.pageViewNodes.push(e),this.resumeMutationObserver())},e.prototype.disconnectPage=function(e){var t=this.pageViewNodes.indexOf(e);t<0||(this.pauseMutationObserver(),this.pageViewNodes.splice(t,1),this.resumeMutationObserver())},e.prototype.resolveScreenPosition=function(e,t){if(!this.docViewNode)throw new Error("No doc view is being observed.");for(var n=this.docViewNode.getChildren(),r=this.editor.getLayoutEngine().getDocBox().getChildren(),i=0,o=0,a=n.length;o<a;o++){var s=n[o],u=r[o],d=s.getDOMContainer().getBoundingClientRect();if(d.left<=e&&d.right>=e&&d.top<=t&&d.bottom>=t){var l=e-d.left,f=t-d.top;return i+u.resolveViewportPositionToSelectableOffset(l,f)}i+=u.getSelectableSize()}return-1},e.prototype.resumeMutationObserver=function(){var e=this;this.pageViewNodes.forEach(function(t){var n=t.getDOMContentContainer();e.mutationObserver.observe(n,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0})})},e.prototype.pauseMutationObserver=function(){this.mutationObserver.disconnect()},e.prototype.handleChildListMutation=function(e,t){var n=this;e.addedNodes.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e);var r=n.editor.getPresenter().resolveDOMNodePosition(e,0);if(r<0)console.log("offset < 0 1",e);else{var i=n.editor.convertSelectableOffsetToModelOffset(r);t.addOperation(new a.Insert(i,(e.textContent||"").split("")))}}),e.removedNodes.forEach(function(r){e instanceof HTMLElement&&e.nextSibling?e.target.insertBefore(e.nextSibling,r):e.target.appendChild(r);var i=n.editor.getPresenter().resolveDOMNodePosition(r,0);if(i<0)console.log("offset < 0 2",r);else{var o=n.editor.convertSelectableOffsetToModelOffset(i),s=n.editor.convertSelectableOffsetToModelOffset(i+(r.textContent||"").length);console.log("Delete due list change",o,s),t.addOperation(new a.Delete(o,s))}})},e.prototype.handleCharacterDataMutation=function(e,t){var n=e.oldValue||"",r=e.target.textContent||"",i=e.target;i.textContent=e.oldValue;var o=this.editor.getPresenter().resolveDOMNodePosition(i,0);if(o<0)console.log("offset < 0 3",i);else{var s=function(e,t){for(var n=0,r=e.length,i=0,o=t.length;e[n]===t[i]&&n<r&&i<o;)n++,i++;for(;e[r-1]===t[o-1]&&r>n&&o>i;)r--,o--;return[n,r,i,o]}(n,r),u=s[0],d=s[1],l=s[2],f=s[3],c=this.editor,h=c.convertSelectableOffsetToModelOffset(o+u),p=c.convertSelectableOffsetToModelOffset(o+d),g=h,v=r.slice(l,f).split("");h<p&&(console.log("Delete due to char data",h,p),t.addOperation(new a.Delete(h,p))),v.length>0&&t.addOperation(new a.Insert(g,v))}},e.prototype.syncCursorWithDOM=function(){var e=window.getSelection(),t=this.editor.getPresenter(),n=t.resolveDOMNodePosition(e.anchorNode,e.anchorOffset),r=t.resolveDOMNodePosition(e.focusNode,e.focusOffset),i=new s.default;i.addOperation(new u.MoveTo(n)),i.addOperation(new u.MoveHeadTo(r)),this.editor.getCursor().applyTransformation(i)},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.offset=e}return e.prototype.getOffset=function(){return this.offset},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.offset=e}return e.prototype.getOffset=function(){return this.offset},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(31)),a=n(32),s=i(n(33)),u={a:s.AKey,b:s.BKey,c:s.CKey,d:s.DKey,e:s.EKey,f:s.FKey,g:s.GKey,h:s.HKey,i:s.IKey,j:s.JKey,k:s.KKey,l:s.LKey,m:s.MKey,n:s.NKey,o:s.OKey,p:s.PKey,q:s.QKey,r:s.RKey,s:s.SKey,t:s.TKey,u:s.UKey,v:s.VKey,w:s.WKey,x:s.XKey,y:s.YKey,z:s.ZKey,A:s.AKey,B:s.BKey,C:s.CKey,D:s.DKey,E:s.EKey,F:s.FKey,G:s.GKey,H:s.HKey,I:s.IKey,J:s.JKey,K:s.KKey,L:s.LKey,M:s.MKey,N:s.NKey,O:s.OKey,P:s.PKey,Q:s.QKey,R:s.RKey,S:s.SKey,T:s.TKey,U:s.UKey,V:s.VKey,W:s.WKey,X:s.XKey,Y:s.YKey,Z:s.ZKey,Num1:s.Num1Key,Num2:s.Num2Key,Num3:s.Num3Key,Num4:s.Num4Key,Num5:s.Num5Key,Num6:s.Num6Key,Num7:s.Num7Key,Num8:s.Num8Key,Num9:s.Num9Key,Num0:s.Num0Key,Dash:s.DashKey,Equal:s.EqualKey,Space:s.SpaceKey,ArrowLeft:s.ArrowLeftKey,ArrowRight:s.ArrowRightKey,ArrowUp:s.ArrowUpKey,ArrowDown:s.ArrowDownKey,Backspace:s.BackspaceKey,Delete:s.DeleteKey,Enter:s.EnterKey};t.default=function(e){var t=[];e.altKey&&t.push(a.AltKey),e.ctrlKey&&t.push(a.CtrlKey),e.metaKey&&t.push(a.MetaKey),e.shiftKey&&t.push(a.ShiftKey);var n,r=(n=e.key)in u?u[n]:null;return r?new o.default(r,t):null}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(e){return function(t){var n=new o.default,r=new a.default;return r.addOperation(new s.MoveTo(e)),[n,r]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(e){return function(t){var n=new o.default,r=new a.default;return r.addOperation(new s.MoveHeadTo(e)),[n,r]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getAnchor(),u=r.getHead();if(i===u){if(u<1)return[t,n];n.addOperation(new s.MoveTo(u-1))}else i<u?n.addOperation(new s.MoveTo(i)):i>u&&n.addOperation(new s.MoveTo(u));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getAnchor(),u=r.getHead(),d=e.getLayoutEngine().getDocBox();if(i===u){if(u>=d.getSelectableSize()-1)return[t,n];n.addOperation(new s.MoveTo(u+1))}else i<u?n.addOperation(new s.MoveTo(u)):i>u&&n.addOperation(new s.MoveTo(i));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead();return i<1?[t,n]:(n.addOperation(new s.MoveHeadTo(i-1)),[t,n])}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead();return i>=e.getLayoutEngine().getDocBox().getSelectableSize()-1?[t,n]:(n.addOperation(new s.MoveHeadTo(i+1)),[t,n])}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(7));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getAtomicBoxLevel();if(d.getSelectableOffset()>0)n.addOperation(new s.MoveTo(i-d.getSelectableOffset()));else{var l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an atomic box.");var f=l.getPreviousSibling();f?n.addOperation(new s.MoveTo(i-f.getSelectableSize())):n.addOperation(new s.MoveTo(i))}return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(7));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getAtomicBoxLevel(),l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an atomic box.");if(d.getSelectableOffset()<l.getSelectableSize()-1)n.addOperation(new s.MoveTo(i-d.getSelectableOffset()+l.getSelectableSize()-1));else{var f=l.getNextSibling();f?n.addOperation(new s.MoveTo(i-d.getSelectableOffset()+l.getSelectableSize()-1+f.getSelectableSize())):n.addOperation(new s.MoveTo(i))}return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(7));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getAtomicBoxLevel();if(d.getSelectableOffset()>0)n.addOperation(new s.MoveHeadTo(i-d.getSelectableOffset()));else{var l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an atomic box.");var f=l.getPreviousSibling();f&&n.addOperation(new s.MoveHeadTo(i-f.getSelectableSize()))}return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(7));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getAtomicBoxLevel(),l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an atomic box.");if(d.getSelectableOffset()<l.getSelectableSize()-1)n.addOperation(new s.MoveHeadTo(i-d.getSelectableOffset()+l.getSelectableSize()-1));else{var f=l.getNextSibling();f&&n.addOperation(new s.MoveHeadTo(i-d.getSelectableOffset()+l.getSelectableSize()-1+f.getSelectableSize()))}return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),u=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel();return u.getSelectableOffset()>0?n.addOperation(new s.MoveTo(i-u.getSelectableOffset())):n.addOperation(new s.MoveTo(i)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel(),l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");return d.getSelectableOffset()<l.getSelectableSize()-1?n.addOperation(new s.MoveTo(i-d.getSelectableOffset()+l.getSelectableSize()-1)):n.addOperation(new s.MoveTo(i)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),u=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel();return u.getSelectableOffset()>0?n.addOperation(new s.MoveHeadTo(i-u.getSelectableOffset())):n.addOperation(new s.MoveHeadTo(i)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel(),l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");return d.getSelectableOffset()<l.getSelectableSize()-1?n.addOperation(new s.MoveHeadTo(i-d.getSelectableOffset()+l.getSelectableSize()-1)):n.addOperation(new s.MoveHeadTo(i)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=Math.min(r.getAnchor(),r.getHead()),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel(),l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");var f=l.getPreviousSibling();if(f){var c=r.getLeftAnchor();c||(c=l.resolveSelectableOffsetRangeToViewportBoundingRects(d.getSelectableOffset(),d.getSelectableOffset())[0].left),n.setLeftAnchor(c);var h=f.resolveViewportPositionToSelectableOffset(c);n.addOperation(new s.MoveTo(i-d.getSelectableOffset()-f.getSelectableSize()+h))}else n.addOperation(new s.MoveTo(i-d.getSelectableOffset()));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=Math.max(r.getAnchor(),r.getHead()),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel(),l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");var f=l.getNextSibling();if(f){var c=r.getLeftAnchor();c||(c=l.resolveSelectableOffsetRangeToViewportBoundingRects(d.getSelectableOffset(),d.getSelectableOffset())[0].left),n.setLeftAnchor(c);var h=f.resolveViewportPositionToSelectableOffset(c);n.addOperation(new s.MoveTo(i-d.getSelectableOffset()+l.getSelectableSize()+h))}else n.addOperation(new s.MoveTo(i-d.getSelectableOffset()+l.getSelectableSize()-1));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel(),l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");var f=l.getPreviousSibling();if(f){var c=r.getLeftAnchor();c||(c=l.resolveSelectableOffsetRangeToViewportBoundingRects(d.getSelectableOffset(),d.getSelectableOffset())[0].left),n.setLeftAnchor(c);var h=f.resolveViewportPositionToSelectableOffset(c);n.addOperation(new s.MoveHeadTo(i-d.getSelectableOffset()-f.getSelectableSize()+h))}else n.addOperation(new s.MoveHeadTo(i-d.getSelectableOffset()));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1)),u=r(n(6));t.default=function(){return function(e){var t=new o.default,n=new a.default,r=e.getCursor();if(!r)return[t,n];var i=r.getHead(),d=e.getLayoutEngine().getDocBox().resolvePosition(i).getLineFlowBoxLevel(),l=d.getLayoutNode();if(!(l instanceof u.default))throw new Error("Expecting position to be referencing an line box.");var f=l.getNextSibling();if(f){var c=r.getLeftAnchor();c||(c=l.resolveSelectableOffsetRangeToViewportBoundingRects(d.getSelectableOffset(),d.getSelectableOffset())[0].left),n.setLeftAnchor(c);var h=f.resolveViewportPositionToSelectableOffset(c);n.addOperation(new s.MoveHeadTo(i-d.getSelectableOffset()+l.getSelectableSize()+h))}else n.addOperation(new s.MoveHeadTo(i-d.getSelectableOffset()+l.getSelectableSize()-1));return[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default;return e.getCursor()?(n.addOperation(new s.MoveTo(0)),[t,n]):[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default;if(!e.getCursor())return[t,n];var r=e.getLayoutEngine().getDocBox();return n.addOperation(new s.MoveTo(r.getSelectableSize()-1)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default;return e.getCursor()?(n.addOperation(new s.MoveHeadTo(0)),[t,n]):[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default;if(!e.getCursor())return[t,n];var r=e.getLayoutEngine().getDocBox();return n.addOperation(new s.MoveHeadTo(r.getSelectableSize()-1)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=r(n(3)),s=i(n(1));t.default=function(){return function(e){var t=new o.default,n=new a.default;if(!e.getCursor())return[t,n];var r=e.getLayoutEngine().getDocBox();return n.addOperation(new s.MoveTo(0)),n.addOperation(new s.MoveHeadTo(r.getSelectableSize()-1)),[t,n]}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.onUpdatedSubscribers=[],n.domContainer=document.createElement("div"),n.domContainer.contentEditable="true",n.domContainer.spellcheck=!1,n.domContainer.className="tw--doc",n.domContainer.setAttribute("data-tw-id",t),n.domContainer.setAttribute("data-tw-role","doc"),n.domContainer.style.outline="none",n.domContainer.style.textAlign="left",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize()},t.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},t.prototype.onUpdated=function(){this.onUpdatedSubscribers.forEach(function(e){e()})},t.prototype.onDeleted=function(){},t.prototype.resolveSelectableOffsetToNodeOffset=function(e){for(var t=0,n=0,r=this.children.length;n<r;n++){var i=this.children[n];if(t+i.getSelectableSize()>e)return i.resolveSelectableOffsetToNodeOffset(e-t);t+=i.getSelectableSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(i(n(10)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.domContainer=document.createElement("div"),n.domContainer.className="tw--page",n.domContainer.setAttribute("data-tw-id",t),n.domContainer.setAttribute("data-tw-role","page"),n.domContainer.style.position="relative",n.domContentContainer=document.createElement("div"),n.domContentContainer.className="tw--page-content",n.domContentContainer.setAttribute("data-tw-role","page-content"),n.domContainer.appendChild(n.domContentContainer),n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.getDOMContentContainer=function(){return this.domContentContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContentContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContentContainer.childNodes.length?this.domContentContainer.appendChild(n):this.domContentContainer.insertBefore(n,this.domContentContainer.childNodes[t])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onDeleted=function(){this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer),this.children.map(function(e){e.onDeleted()})},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize(),this.domContainer.style.width=e.getWidth()+"px",this.domContainer.style.height=e.getHeight()+"px",this.domContainer.style.padding=e.getPadding()+"px"},t.prototype.resolveSelectableOffsetToNodeOffset=function(e){for(var t=0,n=0,r=this.children.length;n<r;n++){var i=this.children[n];if(t+i.getSelectableSize()>e)return i.resolveSelectableOffsetToNodeOffset(e-t);t+=i.getSelectableSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(i(n(10)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n.domContainer=document.createElement("span"),n.domContainer.className="tw--line",n.domContainer.setAttribute("data-tw-id",t),n.domContainer.setAttribute("data-tw-role","line"),n.domContainer.style.whiteSpace="pre-wrap",n.domContainer.style.width="100%",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.getDOMContentContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onDeleted=function(){this.children.map(function(e){e.onDeleted()}),this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer)},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize()},t.prototype.resolveSelectableOffsetToNodeOffset=function(e){for(var t=0,n=0,r=this.children.length;n<r;n++){var i=this.children[n];if(t+i.getSelectableSize()>e)return i.resolveSelectableOffsetToNodeOffset(e-t);t+=i.getSelectableSize()}throw new Error("Selectable offset "+e+" is out of range.")},t}(i(n(10)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(31)),a=i(n(33)),s=i(n(32)),u=n(51),d=function(){function e(e){this.editor=e,this.leftAnchor=null,this.blinkState=!1,this.blinkInterval=null,this.domCaret=document.createElement("div"),this.domCaret.className="tw--cursor-caret",this.domCaret.style.position="absolute",this.domCaret.style.userSelect="none",this.domCaret.style.pointerEvents="none",this.domCaret.style.width="2px",this.domCaret.style.marginLeft="-1px",this.domCaret.style.background="hsla(213, 100%, 50%, 1)",this.domSelections=[],this.bindKeys()}return e.prototype.onUpdated=function(e,t,n){this.updateView(e,t,n)},e.prototype.getLeftAnchor=function(){return this.leftAnchor},e.prototype.startBlinking=function(){var e=this;null===this.blinkInterval&&(this.blinkInterval=setInterval(function(){e.blinkState?e.domCaret.style.visibility="hidden":e.domCaret.style.visibility="visible",e.blinkState=!e.blinkState},500))},e.prototype.stopBlinking=function(){null!==this.blinkInterval&&(this.blinkState=!0,this.domCaret.style.visibility="visible",clearInterval(this.blinkInterval),this.blinkInterval=null)},e.prototype.updateView=function(e,t,n){for(var r=this;this.domSelections.length>0;){var i=this.domSelections[0];i.parentElement&&i.parentElement.removeChild(i),this.domSelections.splice(0,1)}var o,a,s,u,d,l=Math.min(Math.max(e.getAnchor(),0),t.getSelectableSize()-1),f=Math.min(Math.max(e.getHead(),0),t.getSelectableSize()-1),c=t.resolveSelectableOffsetRangeToViewportBoundingRects(Math.min(l,f),Math.max(l,f)),h=-1,p=-1,g=-1,v=-1;(c.forEach(function(e,t){var i=n[t].getDOMContainer();e.forEach(function(e,n){if(h<0&&(h=t,p=n),g=t,v=n,0!==e.width){var o=document.createElement("div");o.className="tw--cursor-selection",o.style.position="absolute",o.style.top=e.top+"px",o.style.left=e.left+"px",o.style.width=e.width+"px",o.style.height=e.height+"px",o.style.userSelect="none",o.style.pointerEvents="none",i.appendChild(o),r.domSelections.push(o)}})}),f<l)?(o=h,a=(d=c[h][p]).left,s=d.top,u=d.height):(o=g,a=(d=c[g][v]).left+d.width,s=d.top,u=d.height);this.domCaret.style.top=s+"px",this.domCaret.style.left=a+"px",this.domCaret.style.height=u+"px";var y=n[o].getDOMContainer();this.domCaret.parentElement&&this.domCaret.parentElement!==y&&this.domCaret.parentElement.removeChild(this.domCaret),this.domCaret.parentElement||y.appendChild(this.domCaret),this.domCaret.scrollIntoView({block:"nearest"});var _=this.editor.getPresenter().getDocViewNode(),w=_.resolveSelectableOffsetToNodeOffset(l),b=w[0],m=w[1],O=_.resolveSelectableOffsetToNodeOffset(f),C=O[0],S=O[1],P=document.createRange();l<f?(P.setStart(b,m),P.setEnd(C,S)):(P.setStart(C,S),P.setEnd(b,m));var M=window.getSelection();M.empty(),M.addRange(P),this.stopBlinking(),this.startBlinking()},e.prototype.bindKeys=function(){var e=this.editor.getConfig(),t=this.editor.getDispatcher();e.bindKey(new o.default(a.ArrowLeftKey),function(){return t.dispatchCommand(u.moveLeft())}),e.bindKey(new o.default(a.ArrowRightKey),function(){return t.dispatchCommand(u.moveRight())}),e.bindKey(new o.default(a.ArrowLeftKey,[s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadLeft())}),e.bindKey(new o.default(a.ArrowRightKey,[s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadRight())}),e.bindKey(new o.default(a.ArrowLeftKey,[s.AltKey]),function(){return t.dispatchCommand(u.moveLeftByWord())}),e.bindKey(new o.default(a.ArrowRightKey,[s.AltKey]),function(){return t.dispatchCommand(u.moveRightByWord())}),e.bindKey(new o.default(a.ArrowLeftKey,[s.AltKey,s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadLeftByWord())}),e.bindKey(new o.default(a.ArrowRightKey,[s.AltKey,s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadRightByWord())}),e.bindKey(new o.default(a.ArrowLeftKey,[s.MetaKey]),function(){return t.dispatchCommand(u.moveToLeftOfLine())}),e.bindKey(new o.default(a.ArrowRightKey,[s.MetaKey]),function(){return t.dispatchCommand(u.moveToRightOfLine())}),e.bindKey(new o.default(a.ArrowLeftKey,[s.MetaKey,s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToLeftOfLine())}),e.bindKey(new o.default(a.ArrowRightKey,[s.MetaKey,s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToRightOfLine())}),e.bindKey(new o.default(a.ArrowUpKey),function(){return t.dispatchCommand(u.moveToLineAbove())}),e.bindKey(new o.default(a.ArrowDownKey),function(){return t.dispatchCommand(u.moveToLineBelow())}),e.bindKey(new o.default(a.ArrowUpKey,[s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToLineAbove())}),e.bindKey(new o.default(a.ArrowDownKey,[s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToLineBelow())}),e.bindKey(new o.default(a.ArrowUpKey,[s.MetaKey]),function(){return t.dispatchCommand(u.moveToLeftOfDoc())}),e.bindKey(new o.default(a.ArrowDownKey,[s.MetaKey]),function(){return t.dispatchCommand(u.moveToRightOfDoc())}),e.bindKey(new o.default(a.ArrowUpKey,[s.MetaKey,s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToLeftOfDoc())}),e.bindKey(new o.default(a.ArrowDownKey,[s.MetaKey,s.ShiftKey]),function(){return t.dispatchCommand(u.moveHeadToRightOfDoc())}),e.bindKey(new o.default(a.AKey,[s.MetaKey]),function(){return t.dispatchCommand(u.selectAll())})},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.editor=e}return e.prototype.dispatchCommand=function(e){var t=this.editor.getState(),n=this.editor.getCursor(),r=e(this.editor),i=r[0],o=r[1];t.applyTransformation(i),n.applyTransformation(o)},e.prototype.dispatchKeyPress=function(e){var t=this.editor.getConfig().getKeyBindings(),n=e.getCode();if(!t.has(n))return!1;var r=t.get(n);return 0!==r.length&&(r.forEach(function(e){return e()}),!0)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.editor=e,this.extensions=[]}return e.prototype.registerExtension=function(e){this.extensions.push(e),e.$onRegistered(this.editor)},e.prototype.onMounted=function(){this.extensions.forEach(function(e){e.onMounted&&e.onMounted()})},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e){this.editor=e,this.anchor=0,this.head=0,this.leftAnchor=null,this.onUpdatedSubscribers=[]}return e.prototype.getAnchor=function(){return this.anchor},e.prototype.getHead=function(){return this.head},e.prototype.getLeftAnchor=function(){return this.leftAnchor},e.prototype.subscribeOnUpdated=function(e){this.onUpdatedSubscribers.push(e)},e.prototype.applyTransformation=function(e){var t=this;this.leftAnchor=e.getLeftAnchor();var n=e.getOperations();0!==n.length&&(n.forEach(function(e){if(e instanceof r.MoveTo){var n=e.getOffset();t.anchor=n,t.head=n}else{if(!(e instanceof r.MoveHeadTo))throw new Error("Unrecognized cursor transformation operation.");n=e.getOffset();t.head=n}}),this.onUpdatedSubscribers.forEach(function(e){return e()}))},e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(109)),o=r(n(110)),a=r(n(111)),s=r(n(112)),u=r(n(115)),d=r(n(116)),l=r(n(54)),f=r(n(118)),c=r(n(119)),h=function(){function e(){this.nodeClasses=new Map,this.renderNodeClasses=new Map,this.boxClasses=new Map,this.viewNodeClasses=new Map,this.keyBindings=new Map,this.registerElementClass("Paragraph",i.default),this.registerElementClass("Text",o.default),this.registerRenderNodeClass("Paragraph",a.default),this.registerRenderNodeClass("Text",s.default),this.registerBoxClass("ParagraphBlockRenderNode",u.default),this.registerBoxClass("TextInlineRenderNode",d.default),this.registerBoxClass("TextAtomicRenderNode",l.default),this.registerViewNodeClass("ParagraphBlockBox",f.default),this.registerViewNodeClass("TextInlineBox",c.default)}return e.prototype.registerElementClass=function(e,t){this.nodeClasses.set(e,t)},e.prototype.getElementClass=function(e){if(!this.nodeClasses.has(e))throw new Error("Element type "+e+" is not registered.");return this.nodeClasses.get(e)},e.prototype.registerRenderNodeClass=function(e,t){this.renderNodeClasses.set(e,t)},e.prototype.getRenderNodeClass=function(e){if(!this.renderNodeClasses.has(e))throw new Error("No render node class registered for element type "+e+".");return this.renderNodeClasses.get(e)},e.prototype.registerBoxClass=function(e,t){this.boxClasses.set(e,t)},e.prototype.getBoxClass=function(e){var t=this.boxClasses.get(e);if(!t)throw new Error("No box class registered for render element type "+e+".");return t},e.prototype.registerViewNodeClass=function(e,t){this.viewNodeClasses.set(e,t)},e.prototype.getViewNodeClass=function(e){var t=this.viewNodeClasses.get(e);if(!t)throw new Error("No view node class registered for box type "+e+".");return t},e.prototype.bindKey=function(e,t){var n=e.getCode();this.keyBindings.has(n)||this.keyBindings.set(n,[]),this.keyBindings.get(n).push(t)},e.prototype.getKeyBindings=function(){return this.keyBindings},e}();t.default=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"Paragraph"},t.prototype.getAttributes=function(){return{id:this.id}},t.prototype.onStateUpdated=function(e){return!1},t}(i(n(25)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"Text"},t.prototype.getAttributes=function(){return{id:this.id}},t.prototype.onStateUpdated=function(e){return!1},t}(i(n(26)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"ParagraphBlockRenderNode"},t}(i(n(27)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(16)),a=i(n(113)),s=i(n(28)),u=i(n(114)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"TextInlineRenderNode"},t.prototype.onModelUpdated=function(t){var n=this;e.prototype.onModelUpdated.call(this,t);var r=a.default(t.getContent()),i=0;r.forEach(function(e){for(var r=-1,a=i,s=n.children.length;a<s;a++){var d=n.children[a];if(d.getContent()===e.text&&d.getBreakable()===e.breakable){r=a;break}}if(r<0){var l=new u.default(t.getID()+"-"+o.default(),n,e.text,e.breakable);l.setVersion(n.version+1),n.children.splice(i,0,l)}else n.children.splice(i,r-i);i++}),i<this.children.length&&this.children.splice(i,this.children.length-i)},t}(s.default);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[" ","\n","\t"];t.default=function(e){for(var t=[],n="",i=0,o=e.length;i<o;i++){var a=e[i];n+=a,r.includes(a)&&(t.push({text:n,breakable:!0}),n="")}return n.length>0&&t.push({text:n,breakable:!1}),t}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n,r,i){var o=e.call(this,t,n)||this;return o.content=r,o.breakable=i,o}return r(t,e),t.prototype.getType=function(){return"TextAtomicRenderNode"},t.prototype.getSelectableSize=function(){return this.content.length},t.prototype.getContent=function(){return this.content},t.prototype.getBreakable=function(){return this.breakable},t}(i(n(44)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"ParagraphBlockBox"},t.prototype.splitAt=function(e){if(e>this.children.length)throw new Error("Error cleaving ParagraphBlockBox, offset "+e+" is out of range.");var n=this.children.splice(e),r=new t(this.renderNodeID);return n.forEach(function(e,t){r.insertChild(e,t)}),this.height=void 0,this.selectableSize=void 0,r},t.prototype.join=function(e){var t=this;if(e.getRenderNodeID()!==this.renderNodeID)throw new Error("Cannot join block boxes with different render node IDs.");var n=this.children.length;e.getChildren().forEach(function(e){t.insertChild(e,n),n++}),this.height=void 0,this.selectableSize=void 0},t.prototype.resolveViewportPositionToSelectableOffset=function(e,t){for(var n=0,r=0,i=0,o=this.children.length;i<o;i++){var a=this.children[i],s=a.getHeight();if(t>=r&&t<=r+s){n+=a.resolveViewportPositionToSelectableOffset(e);break}n+=a.getSelectableSize(),r+=s}return n},t.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(e,t){for(var n=this,r=[],i=0,o=0,a=function(a,u){var d=s.children[a],l=d.getHeight(),f=d.getSelectableSize(),c=Math.max(e-i,0),h=Math.min(t-i,f);c<=f&&h>=0&&d.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(e){r.push({left:e.left,right:e.right,top:o+e.top,bottom:n.getHeight()-o-l+e.bottom,width:e.width,height:l})});i+=d.getSelectableSize(),o+=l},s=this,u=0,d=this.children.length;u<d&&i<=t;u++)a(u);return r},t}(i(n(17)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return"TextInlineBox"},t.prototype.splitAt=function(e){if(e>this.children.length)throw new Error("Error cleaving TextInlineBox, offset "+e+" is out of range.");var n=this.children.splice(e),r=new t(this.renderNodeID);return n.forEach(function(e,t){r.insertChild(e,t)}),this.width=void 0,this.height=void 0,this.selectableSize=void 0,r},t.prototype.join=function(e){var t=this;if(e.getRenderNodeID()!==this.renderNodeID)throw new Error("Cannot join inline boxes with different render node IDs.");var n=this.children.length;e.getChildren().forEach(function(e){t.insertChild(e,n),n++}),this.height=void 0,this.selectableSize=void 0},t}(i(n(9)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.$iframe=document.createElement("iframe"),this.$iframe.src="about:blank",this.$iframe.style.width="0",this.$iframe.style.height="0",this.$iframe.style.border="none",document.body.appendChild(this.$iframe),this.$textContainers=new Map}return e.prototype.getTextContainerElement=function(e){var t=function(e){return JSON.stringify(e)}(e);if(!this.$textContainers.has(t)){var n=document.createElement("span");n.style.display="inline-block",n.style.whiteSpace="pre",n.style.fontFamily=e.fontFamily,n.style.fontSize=e.fontSize+"px",n.style.fontWeight=""+e.fontWeight,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=""+e.letterSpacing,this.$iframe.contentDocument.body.appendChild(n),this.$textContainers.set(t,n)}return this.$textContainers.get(t)},e.prototype.measure=function(e,t){var n=e.replace(/\n$/," "),r=this.getTextContainerElement(t);r.innerHTML!==n&&(r.innerHTML=n);var i=r.getBoundingClientRect();return{width:i.width,height:i.height}},e}();t.TextMeasurer=r;var i=new r;t.default=function(e,t){return i.measure(e,t)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.domContainer=document.createElement("div"),n.domContainer.className="tw--paragraph-block",n.domContainer.setAttribute("data-tw-id",t),n.domContainer.setAttribute("data-tw-role","block"),n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.insertChild=function(e,t){this.children.splice(t,0,e);var n=e.getDOMContainer();if(t>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+t+" is out of range.");t===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[t])},t.prototype.deleteChild=function(e){var t=this.children.indexOf(e);if(t<0)throw new Error("Cannot delete child, child not found.");e.onDeleted(),this.children.splice(t,1)},t.prototype.getChildren=function(){return this.children},t.prototype.onDeleted=function(){this.children.map(function(e){e.onDeleted()}),this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer)},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize(),this.domContainer.style.width=e.getWidth()+"px",this.domContainer.style.height=e.getHeight()+"px"},t}(i(n(52)).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(54)),a=function(e){function t(t){var n=e.call(this,t)||this;return n.domContainer=document.createElement("span"),n.domContainer.className="tw--text-inline",n.domContainer.setAttribute("data-tw-id",t),n.domContainer.setAttribute("data-tw-role","inline"),n.domContainer.style.color="transparent",n.domContainer.style.textShadow="0 0 0 black",n}return r(t,e),t.prototype.getDOMContainer=function(){return this.domContainer},t.prototype.onDeleted=function(){this.domContainer.parentElement&&this.domContainer.parentElement.removeChild(this.domContainer)},t.prototype.onLayoutUpdated=function(e){this.selectableSize=e.getSelectableSize();var t=e.getChildren().map(function(e){if(e instanceof o.default)return e.getContent();throw new Error("Invalid child AtomicBox encountered for TextInlineBox.")}).join("");this.domContainer.innerText=t},t.prototype.resolveSelectionOffset=function(e){return e},t.prototype.resolveSelectableOffsetToNodeOffset=function(e){if(!this.domContainer.firstChild)throw new Error("Text inline view is not built properly.");return[this.domContainer.firstChild,e]},t}(i(n(53)).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.$onRegistered=function(e){this.editor=e,this.onRegistered&&this.onRegistered()},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Extension has not yet been registered.");return this.editor},e}();t.default=r},,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(18),a=n.n(o),s=(n(64),n(19)),u=n(20),d=n(22),l=n(21),f=n(23),c=n(4),h=n(5),p=(n(65),n(34));function g(){var e=Object(c.a)(["\n  text-align: center;\n"]);return g=function(){return e},e}var v=h.a.div(g()),y=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(d.a)(this,Object(l.a)(t).call(this,e))).domRef=void 0,n.domRef=i.a.createRef();var r=new p.Config,o=new p.Editor(r,e.initialMarkup);return n.state={editor:o},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.domRef.current;this.state.editor.mount(e)}},{key:"render",value:function(){return i.a.createElement(v,{ref:this.domRef})}}]),t}(i.a.Component),_='\n<Doc {"id": "{{id}}"}>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Once upon a time there lived in a certain village a little country girl, the prettiest creature was ever seen. Her mother was excessively fond of her; and her grandmother doted on her still more. This good woman had made for her a little red riding-hood; which became the girl so extremely well that everybody called her Little Red Riding-Hood.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      One day her mother, having made some custards, said to her:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Go, my dear, and see how thy grandmamma does, for I hear she has been very ill; carry her a custard, and this little pot of butter."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Little Red Riding-Hood set out immediately to go to her grandmother, who lived in another village.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      As she was going through the wood, she met with Gaffer Wolf, who had a very great mind to eat her up, but he dared not, because of some faggot-makers hard by in the forest. He asked her whither she was going. The poor child, who did not know that it was dangerous to stay and hear a wolf talk, said to him:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "I am going to see my grandmamma and carry her a custard and a little pot of butter from my mamma."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Does she live far off?" said the Wolf.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Oh! ay," answered Little Red Riding-Hood; "it is beyond that mill you see there, at the first house in the village."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Well," said the Wolf, "and I\'ll go and see her too. I\'ll go this way and you go that, and we shall see who will be there soonest."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The Wolf began to run as fast as he could, taking the nearest way, and the little girl went by that farthest about, diverting herself in gathering nuts, running after butterflies, and making nosegays of such little flowers as she met with. The Wolf was not long before he got to the old woman\'s house. He knocked at the door--tap, tap.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Who\'s there?"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Your grandchild, Little Red Riding-Hood," replied the Wolf, counterfeiting her voice; "who has brought you a custard and a little pot of butter sent you by mamma."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The good grandmother, who was in bed, because she was somewhat ill, cried out\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Pull the bobbin, and the latch will go up."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The Wolf pulled the bobbin, and the door opened, and then presently he fell upon the good woman and ate her up in a moment, for it was above three days that he had not touched a bit. He then shut the door and went into the grandmother\'s bed, expecting Little Red Riding- Hood, who came some time afterward and knocked at the door--tap, tap.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Who\'s there?"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Little Red Riding-Hood, hearing the big voice of the Wolf, was at first afraid; but believing her grandmother had got a cold and was hoarse, answered:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      " \'Tis your grandchild, Little Red Riding-Hood, who has brought you a custard and a little pot of butter mamma sends you."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The Wolf cried out to her, softening his voice as much as he could:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Pull the bobbin, and the latch will go up."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Little Red Riding-Hood pulled the bobbin, and the door opened.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The Wolf, seeing her come in, said to her, hiding himself under the bed-clothes:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Put the custard and the little pot of butter upon the stool, and come and lie down with me."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Little Red Riding-Hood undressed herself and went into bed, where, being greatly amazed to see how her grandmother looked in her night-clothes, she said to her:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great arms you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "That is the better to hug thee, my dear."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great legs you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "That is to run the better, my child."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great ears you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "That is to hear the better, my child."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great eyes you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "It is to see the better, my child."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great teeth you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "That is to eat thee up."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      And, saying these words, this wicked wolf fell upon Little Red Riding-Hood, and ate her all up.\n    </>\n  </>\n</>\n'.split("\n").map(function(e){return e.trim()}).join("").replace(/([^<])<\/>/g,"$1\n</>").replace(/{{id}}/g,function(){return"".concat(Math.random().toString(36).substring(2))});function w(){var e=Object(c.a)(["\n  text-transform: uppercase;\n  font-weight: 500;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.65);\n  border-top: 1px solid rgba(0, 0, 0, 0.45);\n  padding-top: 10px;\n  cursor: default;\n"]);return w=function(){return e},e}function b(){var e=Object(c.a)(["\n  text-align: center;\n  background: rgba(0, 0, 0, 0.04);\n  padding-bottom: 30px;\n"]);return b=function(){return e},e}function m(){var e=Object(c.a)(["\n  display: inline-block;\n  padding: 15px 60px;\n  outline: none;\n  color: rgba(0, 0, 0, 0.85);\n  text-decoration: none;\n  font-size: 20px;\n  background: rgba(0, 0, 0, 0.04);\n  border-radius: 3px;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  &:hover {\n    color: rgba(0, 0, 0, 1);\n    background: rgba(0, 0, 0, 0.09);\n    border-color: rgba(0, 0, 0, 0.25);\n  }\n"]);return m=function(){return e},e}function O(){var e=Object(c.a)(["\n  margin-top: 90px;\n"]);return O=function(){return e},e}function C(){var e=Object(c.a)(["\n  font-size: 20px;\n  font-weight: 400;\n  color: rgba(0, 0, 0, 0.85);\n  margin: 30px 0 0;\n"]);return C=function(){return e},e}function S(){var e=Object(c.a)(["\n  font-size: 30px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.85);\n  margin: 90px 0 0;\n"]);return S=function(){return e},e}function P(){var e=Object(c.a)(["\n  color: rgba(0, 0, 0, 0.65);\n  font-size: 42px;\n  letter-spacing: 0.02em;\n  padding-bottom: 10px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.65);\n"]);return P=function(){return e},e}function M(){var e=Object(c.a)(["\n"]);return M=function(){return e},e}function x(){var e=Object(c.a)(["\n  text-align: center;\n  padding: 90px 60px;\n  background: rgba(0, 0, 0, 0.04);\n"]);return x=function(){return e},e}function E(){var e=Object(c.a)(["\n"]);return E=function(){return e},e}var T=h.a.div(E()),D=h.a.div(x()),N=h.a.div(M()),j=h.a.span(P()),K=h.a.h1(S()),z=h.a.h2(C()),A=h.a.div(O()),V=h.a.a(m()),k=h.a.div(b()),B=h.a.span(w()),L=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(T,null,i.a.createElement(D,null,i.a.createElement(N,null,i.a.createElement(j,null,"Taleweaver")),i.a.createElement(K,null,"Word processing in your browser."),i.a.createElement(z,null,"Open source editor delivering true word processing experience."),i.a.createElement(A,null,i.a.createElement(V,{href:"https://github.com/yuzhenmi/taleweaver"},"GitHub"))),i.a.createElement(k,null,i.a.createElement(B,null,"\u2193 Check it out \u2193")),i.a.createElement(y,{initialMarkup:_}))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[58,1,2]]]);
//# sourceMappingURL=main.af3de9a7.chunk.js.map