(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.operations=[],this.cursorHead=null,this.cursorAnchor=null,this.cursorLockLeft=null}return t.prototype.addOperation=function(t){this.operations.push(t)},t.prototype.getOperations=function(){return this.operations},t.prototype.setCursorHead=function(t){this.cursorHead=t},t.prototype.getCursorHead=function(){return this.cursorHead},t.prototype.setCursor=function(t){this.cursorAnchor=t,this.cursorHead=t},t.prototype.getCursorAnchor=function(){return this.cursorAnchor},t.prototype.setCursorLockLeft=function(t){this.cursorLockLeft=t},t.prototype.getCursorLockLeft=function(){return this.cursorLockLeft},t}();e.default=r},,,function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(90)),a=o(n(49)),s=o(n(8)),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=null,r.children=[],r.width=n,r}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){if(void 0===this.height){var t=0;this.getChildren().forEach(function(e){var n=e.getPaddingTop()+e.getHeight()+e.getPaddingBottom();n>t&&(t=n)}),this.height=t}return this.height},e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 0},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("Line box has no parent set.");return this.parent},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.clearCache()},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),t.markAsDeleted(),this.children.splice(e,1),this.clearCache()},e.prototype.getChildren=function(){return this.children},e.prototype.getPreviousSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Line box is not found in parent.");if(e>0)return t[e-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},e.prototype.getNextSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Line box is not found in parent.");if(e<t.length-1)return t[e+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var t=0;this.children.forEach(function(e){t+=e.getSelectableSize()}),this.selectableSize=t}return this.selectableSize},e.prototype.onRenderUpdated=function(){this.clearCache()},e.prototype.splitAt=function(t){if(t>this.children.length)throw new Error("Error cleaving LineFlowBox, offset "+t+" is out of range.");var n=this.children.splice(t),r=new e(this.editor,this.getWidth());return n.forEach(function(t,e){r.insertChild(t,e)}),this.clearCache(),r},e.prototype.resolvePosition=function(t,e){var n=this;return new s.default(this,e,t,function(t){for(var r=0,o=0,i=n.children.length;o<i;o++){var a=n.children[o],s=a.getSelectableSize();if(r+s>e)return a.resolvePosition(t,e-r);r+=s}throw new Error("Selectable offset "+e+" cannot be resolved to position.")})},e.prototype.resolveViewportPositionToSelectableOffset=function(t){for(var e=0,n=0,r=0,o=this.children.length;r<o;r++){var i=this.children[r],a=i.getWidth();if(t>=n&&t<=n+a){e+=i.resolveViewportPositionToSelectableOffset(t-n);break}e+=i.getSelectableSize(),n+=a}return e===this.selectableSize?e-1:e},e.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(t,e){for(var n=this,r=[],o=0,a=0,s=0,u=this.children.length;s<u&&o<=e;s++){var l=this.children[s],d=l.getWidth(),f=l.getSelectableSize(),c=Math.max(t-o,0),h=Math.min(e-o,f);if(c<=f&&h>=0&&(c!==h||h!==f))l.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(t){var e=t.width,o=t.height,i=n.getPaddingTop(),s=n.getPaddingBottom(),u=n.getPaddingLeft(),l=n.getPaddingRight(),d=a+u+t.left,f=n.getWidth()-a-t.right-l,c=i+t.top,h=s+t.bottom;r.push({width:e,height:o,left:d,right:f,top:c,bottom:h,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,paddingLeft:0,paddingRight:0})});o+=l.getSelectableSize(),a+=d}return i.default(r),r},e.prototype.clearCache=function(){t.prototype.clearCache.call(this),this.height=void 0},e}(a.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.getType=function(){throw new Error("Event does not have getType implemented.")},t.prototype.getType=function(){return this.constructor.getType()},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(8)),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.breakable=!0,e}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.isBreakable=function(){return this.breakable},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("Atomic box has no parent set.");return this.parent},e.prototype.getPreviousSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Atomic box is not found in parent.");if(e>0)return t[e-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},e.prototype.getNextSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Atomic box is not found in parent.");if(e<t.length-1)return t[e+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},e.prototype.resolvePosition=function(t,e){return new i.default(this,e,t)},e.prototype.clearCache=function(){t.prototype.clearCache.call(this),this.widthWithoutTrailingWhitespace=void 0},e}(o(n(18)).default);e.default=a},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(76));e.CursorFocusedEvent=o.default;var i=r(n(77));e.CursorBlurredEvent=i.default;var a=r(n(43));e.CursorStateUpdatedEvent=a.default;var s=r(n(78));e.LayoutStateUpdatedEvent=s.default;var u=r(n(79));e.ModelStateUpdatedEvent=u.default;var l=r(n(80));e.RenderStateUpdatedEvent=l.default;var d=r(n(81));e.TokenStateUpdatedEvent=d.default;var f=r(n(82));e.ViewStateUpdatedEvent=f.default},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(6)),i=r(n(10)),a=r(n(4)),s=function(){function t(t,e,n,r){this.layoutNode=t,this.selectableOffset=e,this.parent=n||null,this.level=n?n.getLevel()+1:0,this.child=r?r(this):null}return t.prototype.getLayoutNode=function(){return this.layoutNode},t.prototype.getSelectableOffset=function(){return this.selectableOffset},t.prototype.getLevel=function(){return this.level},t.prototype.getParent=function(){return this.parent},t.prototype.getChild=function(){return this.child},t.prototype.getAtomicBoxLevel=function(){return this.child?this.child.getAtomicBoxLevel():this},t.prototype.getLineFlowBoxLevel=function(){if(this.layoutNode instanceof a.default)return this;if(this.layoutNode instanceof o.default||this.layoutNode instanceof i.default){var t=this.getParent();if(!t)throw new Error("No parent.");return t.getLineFlowBoxLevel()}var e=this.getChild();if(!e)throw new Error("No child.");return e.getLineFlowBoxLevel()},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return Math.random().toString(36).substring(2)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(8)),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.children=[],e}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.getWidth=function(){if(void 0===this.width){var t=0;this.getChildren().forEach(function(e){t+=e.getWidth()}),this.width=t}return this.width},e.prototype.getWidthWithoutTrailingWhitespace=function(){if(void 0===this.widthWithoutTrailingWhitespace){var t=this.children[this.children.length-1];this.widthWithoutTrailingWhitespace=this.getWidth()-t.getWidth()+t.getWidthWithoutTrailingWhitespace()}return this.widthWithoutTrailingWhitespace},e.prototype.getHeight=function(){if(void 0===this.height){var t=0;this.getChildren().forEach(function(e){var n=e.getPaddingTop()+e.getHeight()+e.getPaddingBottom();n>t&&(t=n)}),this.height=t}return this.height},e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 9},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("Inline box has no parent set.");return this.parent},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.clearCache()},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),t.markAsDeleted(),this.children.splice(e,1),this.clearCache()},e.prototype.getChildren=function(){return this.children},e.prototype.getPreviousSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Inline box is not found in parent.");if(e>0)return t[e-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},e.prototype.getNextSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Inline box is not found in parent.");if(e<t.length-1)return t[e+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var t=0;this.children.forEach(function(e){t+=e.getSelectableSize()}),this.selectableSize=t}return this.selectableSize},e.prototype.onRenderUpdated=function(t){this.clearCache()},e.prototype.resolvePosition=function(t,e){var n=this;return new i.default(this,e,t,function(t){for(var r=0,o=0,i=n.children.length;o<i;o++){var a=n.children[o],s=a.getSelectableSize();if(r+s>e)return a.resolvePosition(t,e-r);r+=s}throw new Error("Selectable offset "+e+" cannot be resolved to position.")})},e.prototype.resolveViewportPositionToSelectableOffset=function(t){for(var e=0,n=0,r=0,o=this.children.length;r<o;r++){var i=this.children[r],a=i.getWidth();if(t>=n&&t<=n+a){e+=i.resolveViewportPositionToSelectableOffset(t-n);break}e+=i.getSelectableSize(),n+=a}return e},e.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(t,e){for(var n=this,r=[],o=0,i=0,a=0,s=this.children.length;a<s&&o<=e;a++){var u=this.children[a],l=u.getWidth(),d=u.getSelectableSize(),f=Math.max(t-o,0),c=Math.min(e-o,d);if(f<=d&&c>=0)u.resolveSelectableOffsetRangeToViewportBoundingRects(f,c).forEach(function(t){var e=t.width,o=t.height,a=n.getPaddingTop(),s=n.getPaddingBottom(),u=n.getPaddingLeft(),l=n.getPaddingRight(),d=i+u+t.left,f=n.getWidth()-i-t.right-l,c=a+t.top,h=s+t.bottom;r.push({width:e,height:o,left:d,right:f,top:c,bottom:h,paddingTop:a,paddingBottom:s,paddingLeft:0,paddingRight:0})});o+=u.getSelectableSize(),i+=l}return r},e.prototype.clearCache=function(){t.prototype.clearCache.call(this),this.width=void 0,this.height=void 0,this.widthWithoutTrailingWhitespace=void 0},e}(o(n(18)).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.editor=t,this.id=e}return t.prototype.getID=function(){return this.id},t.prototype.getSelectableSize=function(){if(void 0===this.selectableSize)throw new Error("View node has not yet been initialized with selectable size.");return this.selectableSize},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(44));e.Insert=o.default;var i=r(n(47));e.Delete=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){this.type=t,this.id=e,this.attributes=n}return t.prototype.getType=function(){return this.type},t.prototype.getID=function(){return this.id},t.prototype.getAttributes=function(){return this.attributes},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){}}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.syncNodes=function(t,e){if(!this.updateNode(e,t))return!1;for(var n=this.getSrcNodeChildren(t),r=this.getDstNodeChildren(e),o=0,i=0,a=n.length;i<a;i++){var s=n[i],u=this.findSrcNodeInDstNodes(s,r);if(u<o){var l=this.insertNode(e,s,o);r.splice(o,0,l),this.syncNodes(s,l),o++}else{for(var d=o;d<u;d++){var f=r[o];this.deleteNode(e,f),r.splice(o,1)}var c=r[o];this.syncNodes(s,c),o++}}for(i=o,a=r.length;i<a;i++){c=r[o];this.deleteNode(e,c),r.splice(o,1)}},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.editor=t,this.id=e,this.version=0}return t.prototype.getID=function(){return this.id},t.prototype.getVersion=function(){return this.version},t.prototype.clearCache=function(){this.selectableSize=void 0,this.modelSize=void 0},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(8)),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t)},e.prototype.getWidth=function(){return 0},e.prototype.getHeight=function(){return 0},e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 0},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.clearCache()},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),t.markAsDeleted(),this.children.splice(e,1),this.clearCache()},e.prototype.getChildren=function(){return this.children},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var t=0;this.children.forEach(function(e){t+=e.getSelectableSize()}),this.selectableSize=t}return this.selectableSize},e.prototype.onRenderUpdated=function(t){this.clearCache()},e.prototype.resolvePosition=function(t){var e=this;return new i.default(this,t,void 0,function(n){for(var r=0,o=0,i=e.children.length;o<i;o++){var a=e.children[o],s=a.getSelectableSize();if(r+s>t)return a.resolvePosition(n,t-r);r+=s}throw new Error("Selectable offset "+t+" cannot be resolved to position.")})},e.prototype.resolveViewportPositionToSelectableOffset=function(t,e,n){if(t>=this.children.length)throw new Error("Page offset "+t+" is out of range.");for(var r=0,o=0;o<t;o++)r+=this.children[o].getSelectableSize();return r+this.children[t].resolveViewportPositionToSelectableOffset(e,n)},e.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(t,e){var n=[];this.children.forEach(function(){n.push([])});for(var r=0,o=function(o,a){var s=i.children[o],u=s.getSelectableSize(),l=Math.max(t-r,0),d=Math.min(e-r,u);l<=u&&d>=0&&s.resolveSelectableOffsetRangeToViewportBoundingRects(l,d).forEach(function(t){n[o].push(t)});r+=s.getSelectableSize()},i=this,a=0,s=this.children.length;a<s&&r<=e;a++)o(a);return n},e}(o(n(18)).default);e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(48)),a=o(n(9)),s=function(t){function e(e,n){var r=this,o=n+"-"+a.default();return(r=t.call(this,e,o)||this).renderNodeID=n,r}return r(e,t),e.prototype.getRenderNodeID=function(){return this.renderNodeID},e}(i.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(8)),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.children=[],e}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.getWidth=function(){return this.getParent().getInnerWidth()},e.prototype.getHeight=function(){if(void 0===this.height){var t=this.getPaddingTop()+this.getPaddingBottom();this.children.forEach(function(e){t+=e.getHeight()}),this.height=t}return this.height},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("Block box has no parent set.");return this.parent},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.clearCache()},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),t.markAsDeleted(),this.children.splice(e,1),this.clearCache()},e.prototype.getChildren=function(){return this.children},e.prototype.getPreviousSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Block box is not found in parent.");if(e>0)return t[e-1];var n=this.getParent().getPreviousSibling();if(!n)return null;var r=n.getChildren();return r[r.length-1]},e.prototype.getNextSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Block box is not found in parent.");if(e<t.length-1)return t[e+1];var n=this.getParent().getNextSibling();return n?n.getChildren()[0]:null},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var t=0;this.children.forEach(function(e){t+=e.getSelectableSize()}),this.selectableSize=t}return this.selectableSize},e.prototype.onRenderUpdated=function(t){this.clearCache(),this.width=void 0,this.height=void 0},e.prototype.resolvePosition=function(t,e){var n=this;return new i.default(this,e,t,function(t){for(var r=0,o=0,i=n.children.length;o<i;o++){var a=n.children[o],s=a.getSelectableSize();if(r+s>e)return a.resolvePosition(t,e-r);r+=s}throw new Error("Selectable offset "+e+" cannot be resolved to position.")})},e}(o(n(18)).default);e.default=a},,,,,,,function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(27)),s={},u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return r(e,t),e.prototype.getType=function(){return"Doc"},e.prototype.setVersion=function(t){this.version<t&&(this.version=t)},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.clearCache()},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),this.children.splice(e,1),this.clearCache()},e.prototype.getChildren=function(){return this.children},e.prototype.getSize=function(){if(void 0===this.size){var t=2;this.children.forEach(function(e){t+=e.getSize()}),this.size=t}return this.size},e.prototype.onStateUpdated=function(t){t=o({},s,t);return!1},e.prototype.getAttributes=function(){return{id:this.id}},e.prototype.toHTML=function(t,e){for(var n=document.createElement("div"),r=1,o=0,i=this.children.length;o<i&&r<e;o++){var a=this.children[o],s=a.getSize(),u=Math.max(0,t-r),l=Math.min(u+s,e-r);if(!(t>l||e<u)){var d=a.toHTML(u,l);n.appendChild(d),r+=s}}return n},e}(a.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.version=0,this.editor=t}return t.prototype.setID=function(t){this.id=t},t.prototype.getID=function(){if(!this.id)throw new Error("No ID has been set.");return this.id},t.prototype.getVersion=function(){return this.version},t.prototype.clearCache=function(){this.size=void 0},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.children=[],e}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.clearCache()},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),this.children.splice(e,1),this.clearCache()},e.prototype.getChildren=function(){return this.children},e.prototype.getSize=function(){if(void 0===this.size){var t=2;this.children.forEach(function(e){t+=e.getSize()}),this.size=t}return this.size},e}(o(n(27)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.content="",e}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},e.prototype.setContent=function(t){this.content=t,this.clearCache()},e.prototype.getContent=function(){return this.content},e.prototype.getSize=function(){return void 0===this.size&&(this.size=2+this.content.length),this.size},e}(o(n(27)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.children=[],r}return r(e,t),e.prototype.getType=function(){return"DocRenderNode"},e.prototype.setVersion=function(t){this.version<t&&(this.version=t)},e.prototype.getVersion=function(){return this.version},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.clearCache()},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),this.children.splice(e,1),this.clearCache()},e.prototype.getChildren=function(){return this.children},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var t=0;this.children.forEach(function(e){t+=e.getSelectableSize()}),this.selectableSize=t}return this.selectableSize},e.prototype.getModelSize=function(){if(void 0===this.modelSize){var t=2;this.children.forEach(function(e){t+=e.getModelSize()}),this.modelSize=t}return this.modelSize},e.prototype.convertSelectableOffsetToModelOffset=function(t){for(var e=0,n=1,r=0,o=this.children.length;r<o;r++){var i=this.children[r],a=i.getSelectableSize();if(e+a>t)return n+i.convertSelectableOffsetToModelOffset(t-e);e+=a,n+=i.getModelSize()}throw new Error("Selectable offset "+t+" is out of range.")},e.prototype.onModelUpdated=function(t){this.id=t.getID(),this.clearCache()},e}(o(n(16)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.children=[],e}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.getVersion=function(){return this.version},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},e.prototype.getChildren=function(){return this.children},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.selectableSize=void 0,this.modelSize=void 0},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),this.children.splice(e,1),this.selectableSize=void 0,this.modelSize=void 0},e.prototype.onModelUpdated=function(t){this.selectableSize=void 0,this.modelSize=void 0},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var t=0;this.children.forEach(function(e){t+=e.getSelectableSize()}),this.selectableSize=t}return this.selectableSize},e.prototype.getModelSize=function(){if(void 0===this.modelSize){var t=2;this.children.forEach(function(e){t+=e.getModelSize()}),this.modelSize=t}return this.modelSize},e.prototype.convertSelectableOffsetToModelOffset=function(t){for(var e=0,n=1,r=0,o=this.children.length;r<o;r++){var i=this.children[r],a=i.getSelectableSize();if(e+a>t)return n+i.convertSelectableOffsetToModelOffset(t-e);e+=a,n+=i.getModelSize()}throw new Error("Selectable offset "+t+" is out of range.")},e}(o(n(16)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.children=[],e}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.getVersion=function(){return this.version},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var t=0;this.children.forEach(function(e){t+=e.getSelectableSize()}),this.selectableSize=t}return this.selectableSize},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},e.prototype.getChildren=function(){return this.children},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.clearCache()},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),this.children.splice(e,1),this.clearCache()},e.prototype.onModelUpdated=function(t){this.clearCache()},e.prototype.getModelSize=function(){if(void 0===this.modelSize){var t=2;this.children.forEach(function(e){t+=e.getModelSize()}),this.modelSize=t}return this.modelSize},e.prototype.convertSelectableOffsetToModelOffset=function(t){for(var e=0,n=1,r=0,o=this.children.length;r<o;r++){var i=this.children[r],a=i.getSelectableSize();if(e+a>t)return n+i.convertSelectableOffsetToModelOffset(t-e);e+=a,n+=i.getModelSize()}throw new Error("Selectable offset "+t+" is out of range.")},e}(o(n(16)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(8)),a=function(t){function e(e){var n=t.call(this,e)||this;n.parent=null,n.children=[];var r=e.getConfig().getPageConfig();return n.width=r.getPageWidth(),n.height=r.getPageHeight(),n.paddingTop=r.getPagePaddingTop(),n.paddingBottom=r.getPagePaddingBottom(),n.paddingLeft=r.getPagePaddingLeft(),n.paddingRight=r.getPagePaddingRight(),n}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getPaddingTop=function(){return this.paddingTop},e.prototype.getPaddingBottom=function(){return this.paddingBottom},e.prototype.getPaddingLeft=function(){return this.paddingLeft},e.prototype.getPaddingRight=function(){return this.paddingRight},e.prototype.getInnerWidth=function(){return this.width-this.paddingLeft-this.paddingRight},e.prototype.getInnerHeight=function(){return this.height-this.paddingTop-this.paddingBottom},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("Page flow box has no parent set.");return this.parent},e.prototype.insertChild=function(t,e){void 0===e&&(e=null),t.setParent(this),null===e?this.children.push(t):this.children.splice(e,0,t),this.clearCache()},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.setParent(null),t.markAsDeleted(),this.children.splice(e,1),this.clearCache()},e.prototype.getChildren=function(){return this.children},e.prototype.getPreviousSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Page flow box is not found in parent.");return e>0?t[e-1]:null},e.prototype.getNextSibling=function(){var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Page flow box is not found in parent.");return e<t.length-1?t[e+1]:null},e.prototype.getSelectableSize=function(){if(void 0===this.selectableSize){var t=0;this.children.forEach(function(e){t+=e.getSelectableSize()}),this.selectableSize=t}return this.selectableSize},e.prototype.onRenderUpdated=function(){this.clearCache()},e.prototype.splitAt=function(t){if(t>this.children.length)throw new Error("Error cleaving PageFlowBox, offset "+t+" is out of range.");var n=this.children.splice(t),r=new e(this.editor);return n.forEach(function(t,e){r.insertChild(t,e)}),this.clearCache(),r},e.prototype.resolvePosition=function(t,e){var n=this;return new i.default(this,e,t,function(t){for(var r=0,o=0,i=n.children.length;o<i;o++){var a=n.children[o],s=a.getSelectableSize();if(r+s>e)return a.resolvePosition(t,e-r);r+=s}throw new Error("Selectable offset "+e+" cannot be resolved to position.")})},e.prototype.resolveViewportPositionToSelectableOffset=function(t,e){for(var n=0,r=0,o=Math.min(Math.max(t-this.getPaddingLeft(),0),this.getWidth()-this.getPaddingRight()),i=Math.min(Math.max(e-this.getPaddingTop(),0),this.getHeight()-this.getPaddingBottom()),a=0,s=this.children.length;a<s;a++){var u=this.children[a],l=u.getHeight();if(i>=r&&i<=r+l){n+=u.resolveViewportPositionToSelectableOffset(o,i-r);break}n+=u.getSelectableSize(),r+=l}if(n===this.getSelectableSize()){var d=this.children[this.children.length-1];n-=d.getSelectableSize(),n+=d.resolveViewportPositionToSelectableOffset(o,d.getHeight())}return n},e.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(t,e){for(var n=this,r=[],o=0,i=0,a=function(a,u){var l=s.children[a],d=l.getHeight(),f=l.getSelectableSize(),c=Math.max(t-o,0),h=Math.min(e-o,f);c<=f&&h>=0&&l.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(t){var e=t.width,o=t.height,a=n.getPaddingTop(),s=n.getPaddingBottom(),u=n.getPaddingLeft(),l=n.getPaddingRight(),f=u+t.left,c=l+t.right,h=i+a+t.top,p=n.getHeight()-i-d-t.bottom-s;r.push({width:e,height:o,left:f,right:c,top:h,bottom:p,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,paddingLeft:t.paddingLeft,paddingRight:t.paddingRight})});o+=l.getSelectableSize(),i+=d},s=this,u=0,l=this.children.length;u<l&&o<=e;u++)a(u);return r},e}(o(n(49)).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){void 0===e&&(e=[]),this.key=t,this.modifierKeys=e}return t.prototype.getCode=function(){var t=this.modifierKeys.map(function(t){return t.getCode()}).sort(),e=this.key.getCode();return t.concat([e]).join("-")},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(54)),i=new o.default("A");e.AKey=i;var a=new o.default("B");e.BKey=a;var s=new o.default("C");e.CKey=s;var u=new o.default("D");e.DKey=u;var l=new o.default("E");e.EKey=l;var d=new o.default("F");e.FKey=d;var f=new o.default("G");e.GKey=f;var c=new o.default("H");e.HKey=c;var h=new o.default("I");e.IKey=h;var p=new o.default("J");e.JKey=p;var g=new o.default("K");e.KKey=g;var y=new o.default("L");e.LKey=y;var v=new o.default("M");e.MKey=v;var _=new o.default("N");e.NKey=_;var w=new o.default("O");e.OKey=w;var b=new o.default("P");e.PKey=b;var m=new o.default("Q");e.QKey=m;var C=new o.default("R");e.RKey=C;var O=new o.default("S");e.SKey=O;var S=new o.default("T");e.TKey=S;var P=new o.default("U");e.UKey=P;var M=new o.default("V");e.VKey=M;var x=new o.default("W");e.WKey=x;var T=new o.default("X");e.XKey=T;var E=new o.default("Y");e.YKey=E;var D=new o.default("Z");e.ZKey=D;var k=new o.default("Num1");e.Num1Key=k;var N=new o.default("Num2");e.Num2Key=N;var B=new o.default("Num3");e.Num3Key=B;var j=new o.default("Num4");e.Num4Key=j;var L=new o.default("Num5");e.Num5Key=L;var A=new o.default("Num6");e.Num6Key=A;var K=new o.default("Num7");e.Num7Key=K;var V=new o.default("Num8");e.Num8Key=V;var R=new o.default("Num9");e.Num9Key=R;var z=new o.default("Num0");e.Num0Key=z;var I=new o.default("Dash");e.DashKey=I;var H=new o.default("Equal");e.EqualKey=H;var W=new o.default("Space");e.SpaceKey=W;var U=new o.default("ArrowLeft");e.ArrowLeftKey=U;var F=new o.default("ArrowRight");e.ArrowRightKey=F;var $=new o.default("ArrowUp");e.ArrowUpKey=$;var G=new o.default("ArrowDown");e.ArrowDownKey=G;var J=new o.default("Backspace");e.BackspaceKey=J;var Z=new o.default("Delete");e.DeleteKey=Z;var Y=new o.default("Enter");e.EnterKey=Y},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(56)),i=new o.default("Alt");e.AltKey=i;var a=new o.default("Ctrl");e.CtrlKey=a;var s=new o.default("Meta");e.MetaKey=s;var u=new o.default("Shift");e.ShiftKey=u},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(98));e.deleteBackward=o.default;var i=r(n(99));e.deleteForward=i.default;var a=r(n(100));e.insert=a.default;var s=r(n(101));e.moveCursorTo=s.default;var u=r(n(102));e.moveCursorHeadTo=u.default;var l=r(n(103));e.moveCursorLeft=l.default;var d=r(n(104));e.moveCursorRight=d.default;var f=r(n(105));e.moveCursorHeadLeft=f.default;var c=r(n(106));e.moveCursorHeadRight=c.default;var h=r(n(107));e.moveCursorLeftByWord=h.default;var p=r(n(108));e.moveCursorRightByWord=p.default;var g=r(n(109));e.moveCursorHeadLeftByWord=g.default;var y=r(n(110));e.moveCursorHeadRightByWord=y.default;var v=r(n(111));e.moveCursorToLeftOfLine=v.default;var _=r(n(112));e.moveCursorToRightOfLine=_.default;var w=r(n(113));e.moveCursorHeadToLeftOfLine=w.default;var b=r(n(114));e.moveCursorHeadToRightOfLine=b.default;var m=r(n(115));e.moveCursorToLineAbove=m.default;var C=r(n(116));e.moveCursorToLineBelow=C.default;var O=r(n(117));e.moveCursorHeadToLineAbove=O.default;var S=r(n(118));e.moveCursorHeadToLineBelow=S.default;var P=r(n(119));e.moveCursorToLeftOfDoc=P.default;var M=r(n(120));e.moveCursorToRightOfDoc=M.default;var x=r(n(121));e.moveCursorHeadToLeftOfDoc=x.default;var T=r(n(122));e.moveCursorHeadToRightOfDoc=T.default;var E=r(n(123));e.selectAll=E.default;var D=r(n(124));e.split=D.default},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(69));e.Editor=i.default;var a=r(n(129));e.Config=a.default;var s=r(n(13));e.OpenTagToken=s.default;var u=r(n(14));e.CloseTagToken=u.default;var l=r(n(1));e.Transformation=l.default;var d=o(n(12));e.operations=d;var f=o(n(37));e.commands=f;var c=r(n(17));e.DocBox=c.default;var h=r(n(33));e.PageFlowBox=h.default;var p=r(n(19));e.BlockBox=p.default;var g=r(n(4));e.LineFlowBox=g.default;var y=r(n(10));e.InlineBox=y.default;var v=r(n(6));e.AtomicBox=v.default;var _=r(n(54));e.Key=_.default;var w=r(n(56));e.ModifierKey=w.default;var b=r(n(34));e.KeySignature=b.default;var m=o(n(35));e.keys=m;var C=o(n(36));e.modifierKeys=C;var O=r(n(145));e.Extension=O.default;var S=r(n(9));e.generateID=S.default},,,,,function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getType=function(){return"CursorStateUpdated"},e}(o(n(5)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(45)),a=o(n(46)),s=function(t){function e(e,n){var r=t.call(this)||this;return r.at=e,r.tokens=n,r}return r(e,t),e.prototype.getOffsetAdjustment=function(){return{at:this.at,delta:this.tokens.length}},e.prototype.adjustOffset=function(t){var n=this.at;return t.forEach(function(t){n>=t.at&&(n+=t.delta)}),new e(n,this.tokens)},e.prototype.getAt=function(){return this.at},e.prototype.getTokens=function(){return this.tokens},e}(i.default),u=function(t){function e(e,n){var r=t.call(this)||this;return r.at=e,r.tokens=n,r}return r(e,t),e.prototype.getAt=function(){return this.at},e.prototype.getTokens=function(){return this.tokens},e}(a.default);e.AppliedInsert=u,e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){}}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){}}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(45)),a=o(n(46)),s=function(t){function e(e,n){var r=t.call(this)||this;return r.from=e,r.to=n,r}return r(e,t),e.prototype.getOffsetAdjustment=function(){return{at:this.to,delta:this.from-this.to}},e.prototype.adjustOffset=function(t){var n=this.from,r=this.to;return t.forEach(function(t){n>=t.at&&(n+=t.delta),r>=t.at&&(r+=t.delta)}),new e(n,r)},e.prototype.getFrom=function(){return this.from},e.prototype.getTo=function(){return this.to},e}(i.default),u=function(t){function e(e,n){var r=t.call(this)||this;return r.at=e,r.tokens=n,r}return r(e,t),e.prototype.getAt=function(){return this.at},e.prototype.getTokens=function(){return this.tokens},e}(a.default);e.AppliedDelete=u,e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.deleted=!1,this.editor=t,this.id=e,this.version=0}return t.prototype.getID=function(){return this.id},t.prototype.getVersion=function(){return this.version},t.prototype.markAsDeleted=function(){this.deleted=!0},t.prototype.isDeleted=function(){return this.deleted},t.prototype.clearCache=function(){this.selectableSize=void 0},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(48)),a=o(n(9)),s=function(t){function e(e){var n=a.default();return t.call(this,e,n)||this}return r(e,t),e}(i.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e}return r(e,t),e.prototype.setVersion=function(t){this.version<t&&(this.version=t,this.parent&&this.parent.setVersion(t))},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},e.prototype.getModelSize=function(){return this.getSelectableSize()},e.prototype.convertSelectableOffsetToModelOffset=function(t){return t},e}(o(n(16)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.children=[],r.domContainer=document.createElement("div"),r.domContainer.className="tw--doc",r.domContainer.setAttribute("data-tw-id",n),r.domContainer.setAttribute("data-tw-role","doc"),r.domContainer.style.textAlign="left",r.domContainer.style.cursor="text",r.domContainer.style.userSelect="none",r}return r(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.insertChild=function(t,e){void 0===e&&(e=null);var n=t.getDOMContainer();if(t.setParent(this),null===e)this.children.push(t),this.domContainer.appendChild(n);else{if(this.children.splice(e,0,t),e>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+e+" is out of range.");e===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[e])}},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");var n=t.getDOMContainer();this.domContainer.removeChild(n),t.onDeleted(),t.setParent(null),this.children.splice(e,1)},e.prototype.getChildren=function(){return this.children},e.prototype.onLayoutUpdated=function(t){this.selectableSize=t.getSelectableSize()},e.prototype.onDeleted=function(){},e.prototype.resolveSelectableOffsetToNodeOffset=function(t){for(var e=0,n=0,r=this.children.length;n<r;n++){var o=this.children[n];if(e+o.getSelectableSize()>t)return o.resolveSelectableOffsetToNodeOffset(t-e);e+=o.getSelectableSize()}throw new Error("Selectable offset "+t+" is out of range.")},e}(o(n(11)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.children=[],e}return r(e,t),e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},e.prototype.resolveSelectableOffsetToNodeOffset=function(t){for(var e=0,n=0,r=this.children.length;n<r;n++){var o=this.children[n];if(e+o.getSelectableSize()>t)return o.resolveSelectableOffsetToNodeOffset(t-e);e+=o.getSelectableSize()}throw new Error("Selectable offset "+t+" is out of range.")},e}(o(n(11)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e}return r(e,t),e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},e}(o(n(11)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(o(n(55)).default);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.code=t}return t.prototype.getCode=function(){return this.code},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(o(n(55)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(6)),a=o(n(139)),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content="",e.textStyle={fontFamily:"sans-serif",fontSize:18,fontWeight:400,letterSpacing:0},e}return r(e,t),e.prototype.getWidth=function(){if(void 0===this.width||void 0===this.height){var t=a.default(this.content,this.textStyle);this.width=t.width,this.height=t.height}return this.width},e.prototype.getWidthWithoutTrailingWhitespace=function(){if(void 0===this.widthWithoutTrailingWhitespace)if(this.breakable){var t=a.default(this.content.substring(0,this.content.length-1),this.textStyle);this.widthWithoutTrailingWhitespace=t.width}else this.widthWithoutTrailingWhitespace=this.getWidth();return this.widthWithoutTrailingWhitespace},e.prototype.getHeight=function(){if(void 0===this.width||void 0===this.height){var t=a.default(this.content,this.textStyle);this.width=t.width,this.height=t.height}return this.height},e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 0},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.setContent=function(t){this.content=t,this.clearCache()},e.prototype.getContent=function(){return this.content},e.prototype.getSelectableSize=function(){return this.content.length},e.prototype.onRenderUpdated=function(t){this.content=t.getContent(),this.breakable=t.getBreakable(),this.clearCache()},e.prototype.splitAtWidth=function(t){for(var n=0,r=this.content.length;r-n>1;){var o=Math.floor((r+n)/2),i=this.content.substring(0,o);a.default(i,this.textStyle).width>t?r=o:n=o}var s=n,u=new e(this.editor,this.renderNodeID);return u.setContent(this.content.substring(s)),this.content=this.content.substring(0,s),this.clearCache(),u},e.prototype.join=function(t){if(t.getRenderNodeID()!==this.renderNodeID)throw new Error("Cannot join atomic boxes with different render node IDs.");this.content+=t.getContent(),this.clearCache()},e.prototype.resolveViewportPositionToSelectableOffset=function(t){for(var e=0,n=0,r=this.content.length;n<r;n++){var o=a.default(this.content.substring(0,n),this.textStyle).width;if(!(o<t))return t-e<o-t?n-1:n;e=o}return t-e<this.getWidth()-t?this.content.length-1:this.content.length},e.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(t,e){if(0===t&&e===this.getSelectableSize())return[{left:0,right:0,top:0,bottom:0,width:this.getWidth(),height:this.getHeight(),paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}];var n=a.default(this.content.substring(0,t),this.textStyle),r=a.default(this.content.substring(0,e),this.textStyle),o=r.width-n.width,i=this.getHeight(),s=this.getPaddingTop(),u=this.getPaddingBottom(),l=this.getPaddingLeft(),d=this.getPaddingRight();return[{width:o,height:i,left:l+n.width,right:d+(this.getWidth()-r.width),top:s,bottom:u,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}]},e.prototype.clearCache=function(){t.prototype.clearCache.call(this),this.width=void 0,this.height=void 0},e}(i.default);e.default=s},,,,function(t,e,n){t.exports=n(151)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(70)),i=r(n(71)),a=r(n(73)),s=r(n(74)),u=r(n(85)),l=r(n(87)),d=r(n(89)),f=r(n(92)),c=r(n(128)),h=function(){function t(t,e,n){var r=this;this.config=t,this.dispatcher=new o.default(this),this.transformer=new i.default(this),this.cursor=new a.default(this),this.tokenManager=new s.default(this,e),this.modelManager=new u.default(this),this.renderManager=new l.default(this),this.layoutManager=new d.default(this),this.viewManager=new f.default(this,n),this.extensionProvider=new c.default(this),setTimeout(function(){return r.getViewManager().focus()})}return t.prototype.getConfig=function(){return this.config},t.prototype.getDispatcher=function(){return this.dispatcher},t.prototype.getTransformer=function(){return this.transformer},t.prototype.getCursor=function(){return this.cursor},t.prototype.getTokenManager=function(){return this.tokenManager},t.prototype.getModelManager=function(){return this.modelManager},t.prototype.getRenderManager=function(){return this.renderManager},t.prototype.getLayoutManager=function(){return this.layoutManager},t.prototype.getViewManager=function(){return this.viewManager},t.prototype.registerExtension=function(t){this.extensionProvider.registerExtension(t)},t}();e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.editor=t,this.subscribers=new Map}return t.prototype.dispatch=function(t){var e=t.getType();this.subscribers.has(e)&&this.subscribers.get(e).forEach(function(e){return e(t)})},t.prototype.on=function(t,e){var n,r=t.getType();this.subscribers.has(r)?n=this.subscribers.get(r):(n=[],this.subscribers.set(r,n)),n.push(e)},t.prototype.dispatchCommand=function(t){var e=t(this.editor);this.editor.getTransformer().applyTransformation(e)},t.prototype.dispatchUndo=function(){this.editor.getTransformer().undo()},t.prototype.dispatchRedo=function(){this.editor.getTransformer().redo()},t.prototype.dispatchKeyPress=function(t){var e=this.editor.getConfig().getKeyBindingConfig().getKeyBindings(),n=t.getCode();if(!e.has(n))return!1;var r=e.get(n);return 0!==r.length&&(r.forEach(function(t){return t()}),!0)},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(72)),i=function(){function t(t){this.editor=t,this.history=new o.default(t)}return t.prototype.applyTransformation=function(t){var e=this;this.applyTransformationsWithoutHistory([t]).forEach(function(t){e.history.recordAppliedTransformation(t)})},t.prototype.undo=function(){var t=this.history.undo();if(t){var e=this.editor.getTokenManager(),n=t.getAppliedTransformations();e.unapplyTransformations(n);var r=this.editor.getCursor(),o=n[0];r.set(o.getOriginalCursorAnchor(),o.getOriginalCursorHead(),o.getOriginalCursorLockLeft())}},t.prototype.redo=function(){var t=this.history.redo();if(t){var e=t.getAppliedTransformations().map(function(t){return t.getOriginalTransformation()});this.applyTransformationsWithoutHistory(e)}},t.prototype.applyTransformationsWithoutHistory=function(t){var e=this.editor.getTokenManager(),n=this.editor.getCursor(),r=e.applyTransformations(t),o=t[t.length-1],i=n.getAnchor(),a=n.getHead();return t.forEach(function(t){var e=t.getCursorAnchor(),n=t.getCursorHead();null!==e&&(i=e),null!==n&&(a=n)}),n.set(i,a,o.getCursorLockLeft()),r},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.appliedTransformations=[],this.timestamp=Date.now(),this.lastTimestamp=this.timestamp}return t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.getLastTimestamp=function(){return this.lastTimestamp},t.prototype.addAppliedTransformation=function(t){this.appliedTransformations.push(t),this.lastTimestamp=Date.now()},t.prototype.getAppliedTransformations=function(){return this.appliedTransformations},t}(),o=function(){function t(t){this.items=[],this.pointer=-1,this.editor=t}return t.prototype.recordAppliedTransformation=function(t){if(0!==t.getOperations().length)if(this.pointer<this.items.length-1&&this.items.splice(this.pointer+1,this.items.length-1-this.pointer),this.pointer<0)this.recordAppliedTransformationToNewItem(t);else{var e=this.items[this.pointer],n=Date.now();n-e.getTimestamp()<2e3&&n-e.getLastTimestamp()<500?this.recordAppliedTransformationToLastItem(t):this.recordAppliedTransformationToNewItem(t)}},t.prototype.undo=function(){if(this.pointer<0)return null;var t=this.items[this.pointer];return this.pointer-=1,t},t.prototype.redo=function(){return this.pointer>this.items.length-2?null:(this.pointer+=1,this.items[this.pointer])},t.prototype.recordAppliedTransformationToNewItem=function(t){var e=new r;e.addAppliedTransformation(t),this.items.push(e),this.pointer++},t.prototype.recordAppliedTransformationToLastItem=function(t){var e=this.items[this.pointer];if(!e)throw new Error("Error recording applied transformation, history is empty.");e.addAppliedTransformation(t)},t}();e.default=o},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(43)),i=function(){function t(t){this.anchor=0,this.head=0,this.leftLock=null,this.editor=t}return t.prototype.set=function(t,e,n){this.anchor=t,this.head=e,this.leftLock=n,this.editor.getDispatcher().dispatch(new o.default)},t.prototype.getAnchor=function(){return this.anchor},t.prototype.getHead=function(){return this.head},t.prototype.getLeftLock=function(){return this.leftLock},t}();e.default=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(75)),i=r(n(84)),a=function(){function t(t,e){this.editor=t;var n=new i.default(e).getTokens();this.tokenState=new o.default(t,n)}return t.prototype.getTokenState=function(){return this.tokenState},t.prototype.applyTransformations=function(t){return this.tokenState.applyTransformations(t)},t.prototype.unapplyTransformations=function(t){this.tokenState.unapplyTransformations(t)},t}();e.default=a},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),a=r(n(83)),s=o(n(44)),u=o(n(47)),l=function(){function t(t,e){this.editor=t,this.tokens=e}return t.prototype.getTokens=function(){return this.tokens},t.prototype.applyTransformations=function(t){var e=this,n=t.map(function(t){return e.applyTransformation(t)});return this.editor.getDispatcher().dispatch(new i.TokenStateUpdatedEvent),n},t.prototype.unapplyTransformations=function(t){var e=this;t.slice().reverse().forEach(function(t){return e.unapplyTransformation(t)}),this.editor.getDispatcher().dispatch(new i.TokenStateUpdatedEvent)},t.prototype.applyTransformation=function(t){var e=this,n=this.editor.getCursor(),r=new a.default(t,n.getAnchor(),n.getHead(),n.getLeftLock()),o=t.getOperations();if(0===o.length)return r;var i=[];return o.forEach(function(t){var n,o=t.adjustOffset(i);if(o instanceof s.default){(n=e.tokens).splice.apply(n,[o.getAt(),0].concat(o.getTokens()));var a=new s.AppliedInsert(o.getAt(),o.getTokens());r.addOperation(a)}else{if(!(o instanceof u.default))throw new Error("Unknown transformation operation encountered.");var l=e.tokens.splice(o.getFrom(),o.getTo()-o.getFrom());a=new u.AppliedDelete(o.getFrom(),l);r.addOperation(a)}i.push(o.getOffsetAdjustment())}),r},t.prototype.unapplyTransformation=function(t){var e=this;t.getOperations().slice().reverse().forEach(function(t){var n;if(t instanceof s.AppliedInsert)e.tokens.splice(t.getAt(),t.getTokens().length);else{if(!(t instanceof u.AppliedDelete))throw new Error("Unknown applied transformation operation encountered.");(n=e.tokens).splice.apply(n,[t.getAt(),0].concat(t.getTokens()))}})},t}();e.default=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getType=function(){return"CursorFocused"},e}(o(n(5)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getType=function(){return"CursorBlurred"},e}(o(n(5)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getType=function(){return"LayoutStateUpdated"},e}(o(n(5)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getType=function(){return"ModelStateUpdated"},e}(o(n(5)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getType=function(){return"RenderStateUpdated"},e}(o(n(5)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getType=function(){return"TokenStateUpdated"},e}(o(n(5)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getType=function(){return"ViewStateUpdated"},e}(o(n(5)).default);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r){this.operations=[],this.originalTransformation=t,this.originalCursorHead=e,this.originalCursorAnchor=n,this.originalCursorLockLeft=r}return t.prototype.addOperation=function(t){this.operations.push(t)},t.prototype.getOperations=function(){return this.operations},t.prototype.getOriginalTransformation=function(){return this.originalTransformation},t.prototype.getOriginalCursorHead=function(){return this.originalCursorHead},t.prototype.getOriginalCursorAnchor=function(){return this.originalCursorAnchor},t.prototype.getOriginalCursorLockLeft=function(){return this.originalCursorLockLeft},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,i=r(n(13)),a=r(n(14));!function(t){t[t.NewToken=0]="NewToken",t[t.NewTag=1]="NewTag",t[t.Tag=2]="Tag",t[t.TagAttributes=3]="TagAttributes",t[t.TagAttributesString=4]="TagAttributesString",t[t.TagAttributesStringEscape=5]="TagAttributesStringEscape",t[t.CloseTag=6]="CloseTag"}(o||(o={}));var s=function(){function t(t){this.markup=t,this.tokenizerState=o.NewToken,this.tokens=[],this.tagBuffer="",this.attributesBuffer="",this.ran=!1}return t.prototype.getTokens=function(){return this.tokenize(),this.tokens},t.prototype.tokenize=function(){for(var t,e=this.markup,n=0,r=e.length;n<r;n++)switch(t=e[n],this.tokenizerState){case o.NewToken:if(/</.test(t)){this.newTag(t);break}this.appendChar(t);break;case o.NewTag:if(/A-Z/.test(t)){this.appendCharToTag(t);break}if(/\//.test(t)){this.closeTag(t);break}case o.Tag:if(/[A-Za-z]/.test(t)){this.appendCharToTag(t);break}if(/{/.test(t)){this.newAttributes(t);break}case o.TagAttributes:if(/"/.test(t)){this.newAttributesString(t);break}if(/>/.test(t)){this.endTag(t);break}this.appendCharToAttributes(t);break;case o.TagAttributesString:if(/"/.test(t)){this.endAttributesString(t);break}if(/\\/.test(t)){this.escapeNextAttributesStringChar(t);break}this.appendCharToAttributes(t);break;case o.TagAttributesStringEscape:this.appendCharToAttributes(t);break;case o.CloseTag:if(/>/.test(t)){this.endCloseTag(t);break}default:throw new Error("Unexpected character "+t+" at offset "+n+".")}this.ran=!0},t.prototype.newTag=function(t){this.tokenizerState=o.NewTag},t.prototype.appendChar=function(t){this.tokens.push(t)},t.prototype.appendCharToTag=function(t){this.tagBuffer+=t,this.tokenizerState=o.Tag},t.prototype.newAttributes=function(t){this.attributesBuffer+=t,this.tokenizerState=o.TagAttributes},t.prototype.appendCharToAttributes=function(t){this.attributesBuffer+=t,this.tokenizerState===o.TagAttributesStringEscape&&(this.tokenizerState=o.TagAttributesString)},t.prototype.newAttributesString=function(t){this.attributesBuffer+=t,this.tokenizerState=o.TagAttributesString},t.prototype.endTag=function(t){var e,n,r;try{n=(e=JSON.parse(this.attributesBuffer)).id,r=e.attributes}catch(s){throw new Error("Invalid attributes JSON: "+this.attributesBuffer+".")}if(!n)throw new Error("Missing id in attributes JSON: "+this.attributesBuffer+".");if(!this.tagBuffer)throw new Error("Open tag type cannot be empty.");var a=new i.default(this.tagBuffer,n,r);this.tokens.push(a),this.attributesBuffer="",this.tagBuffer="",this.tokenizerState=o.NewToken},t.prototype.endAttributesString=function(t){this.attributesBuffer+=t,this.tokenizerState=o.TagAttributes},t.prototype.escapeNextAttributesStringChar=function(t){this.tokenizerState=o.TagAttributesStringEscape},t.prototype.closeTag=function(t){this.tokenizerState=o.CloseTag},t.prototype.endCloseTag=function(t){var e=new a.default;this.tokens.push(e),this.tokenizerState=o.NewToken},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(26)),i=r(n(86)),a=function(){function t(t){this.editor=t,this.doc=new o.default(t),this.parser=new i.default(t,this.doc)}return t.prototype.getDoc=function(){return this.doc},t.prototype.toHTML=function(t,e){return this.doc.toHTML(t,e).outerHTML},t}();e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(n(15)),s=n(7),u=o(n(13)),l=o(n(14)),d=o(n(26)),f=o(n(28)),c=o(n(29)),h=function(t){function e(e,n){var r=t.call(this)||this;return r.editor=e,r.lastVersion=n,r}return r(e,t),e.prototype.getSrcNodeChildren=function(t){return t instanceof d.default?t.getChildren():t instanceof f.default?t.getChildren():[]},e.prototype.getDstNodeChildren=function(t){return t instanceof d.default?t.getChildren().slice():t instanceof f.default?t.getChildren().slice():[]},e.prototype.findSrcNodeInDstNodes=function(t,e){var n=t.getID();return e.findIndex(function(t){return t.getID()===n})},e.prototype.insertNode=function(t,e,n){var r=this.editor.getConfig().getElementConfig();if(t instanceof d.default&&e instanceof f.default){if(!((o=new(r.getElementClass(e.getType()))(this.editor))instanceof f.default))throw new Error("Error inserting element, expecting block element.");return o.setID(e.getID()),t.insertChild(o,n),this.updateElementVersion(o),o}if(t instanceof f.default&&e instanceof c.default){var o;if(!((o=new(r.getElementClass(e.getType()))(this.editor))instanceof c.default))throw new Error("Error inserting element, expecting inline element.");return o.setID(e.getID()),t.insertChild(o,n),this.updateElementVersion(o),o}throw new Error("Error inserting element, type mismatch.")},e.prototype.deleteNode=function(t,e){if(t instanceof d.default&&e instanceof f.default)return t.deleteChild(e),void this.updateElementVersion(t);if(t instanceof f.default&&e instanceof c.default)return t.deleteChild(e),void this.updateElementVersion(t);throw new Error("Error deleting element, type mismatch.")},e.prototype.updateNode=function(t,e){if(t instanceof d.default&&e instanceof d.default){var n=e.getAttributes();return t.onStateUpdated(n)&&this.updateElementVersion(t),!0}if(t instanceof f.default&&e instanceof f.default){n=e.getAttributes();return t.onStateUpdated(n)&&this.updateElementVersion(t),!0}if(t instanceof c.default&&e instanceof c.default){n=e.getAttributes();var r=!1;t.onStateUpdated(n)&&(r=!0);var o=e.getContent();return t.getContent()!==o&&(t.setContent(o),r=!0),r&&this.updateElementVersion(t),!0}throw new Error("Error updating render node, type mismatch.")},e.prototype.updateElementVersion=function(t){t.setVersion(this.lastVersion+1),t instanceof c.default?this.updateElementVersion(t.getParent()):t instanceof f.default&&this.updateElementVersion(t.getParent())},e}(a.default);!function(t){t[t.NewDoc=0]="NewDoc",t[t.NewElement=1]="NewElement",t[t.InlineElement=2]="InlineElement"}(i||(i={}));var p=function(){function t(){this.elements=[]}return t.prototype.push=function(t){this.elements.push(t)},t.prototype.pop=function(){return this.elements.pop()},t.prototype.peek=function(){return this.elements[this.elements.length-1]},t}(),g=function(){function t(t,e){var n=this;this.editor=t,this.doc=e,this.parserState=i.NewDoc,this.stack=new p,this.contentBuffer="",this.version=0,t.getDispatcher().on(s.TokenStateUpdatedEvent,function(t){return n.sync()}),this.sync()}return t.prototype.sync=function(){this.parserState=i.NewDoc;var t=this.parse(),e=new h(this.editor,this.version);this.doc.setID(t.getID()),e.syncNodes(t,this.doc),this.version=this.doc.getVersion(),this.editor.getDispatcher().dispatch(new s.ModelStateUpdatedEvent)},t.prototype.parse=function(){var t=new d.default(this.editor);this.stack=new p,this.stack.push(t);for(var e,n=this.editor.getTokenManager().getTokenState().getTokens(),r=0,o=n.length;r<o;r++)switch(e=n[r],this.parserState){case i.NewDoc:if(e instanceof u.default&&"Doc"===e.getType()){this.newDoc(e);break}case i.NewElement:if(e instanceof u.default){this.newElement(e);break}if("string"===typeof e){this.appendToContent(e);break}if(e instanceof l.default){this.closeNode(e);break}this.appendToContent(e);break;case i.InlineElement:if("string"===typeof e){this.appendToContent(e);break}if(e instanceof l.default){this.closeNode(e);break}default:throw new Error("Unexpected token at offset "+r+".")}return t},t.prototype.newDoc=function(t){var e=this.stack.peek();if(!(e instanceof d.default))throw new Error("Expected doc.");var n=t.getAttributes();e.setID(t.getID()),e.onStateUpdated(n),this.parserState=i.NewElement},t.prototype.newElement=function(t){var e=this.editor.getConfig().getElementConfig(),n=this.stack.peek();if(!n)throw new Error("Unexpected end of doc encountered.");var r=new(e.getElementClass(t.getType()))(this.editor),o=t.getAttributes();if(r.setID(t.getID()),r.onStateUpdated(o),n instanceof d.default){if(!(r instanceof f.default))throw new Error("Unexpected child element for doc.");n.insertChild(r)}else if(n instanceof f.default){if(!(r instanceof c.default))throw new Error("Unexpected child element for block element.");n.insertChild(r)}this.stack.push(r)},t.prototype.appendToContent=function(t){this.contentBuffer+=t,this.parserState=i.InlineElement},t.prototype.closeNode=function(t){var e=this.stack.pop();if(void 0===e)throw new Error("Unexpected end of doc encountered.");e instanceof c.default&&e.setContent(this.contentBuffer),this.contentBuffer="",this.parserState=i.NewElement},t}();e.default=g},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(30)),i=r(n(88)),a=function(){function t(t){this.editor=t;var e=t.getModelManager().getDoc();this.docRenderNode=new o.default(t,e.getID()),this.renderEngine=new i.default(t,this.docRenderNode)}return t.prototype.getDocRenderNode=function(){return this.docRenderNode},t.prototype.convertSelectableOffsetToModelOffset=function(t){return this.docRenderNode.convertSelectableOffsetToModelOffset(t)},t}();e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(15)),a=n(7),s=o(n(26)),u=o(n(28)),l=o(n(29)),d=o(n(30)),f=o(n(31)),c=o(n(32)),h=function(t){function e(e,n){var r=t.call(this)||this;return r.editor=e,r.lastVersion=n,r}return r(e,t),e.prototype.getSrcNodeChildren=function(t){return t instanceof s.default?t.getChildren():t instanceof u.default?t.getChildren():[]},e.prototype.getDstNodeChildren=function(t){return t instanceof d.default?t.getChildren().slice():t instanceof f.default?t.getChildren().slice():[]},e.prototype.findSrcNodeInDstNodes=function(t,e){var n=t.getID();return e.findIndex(function(t){return t.getID()===n})},e.prototype.insertNode=function(t,e,n){var r=this.editor.getConfig().getElementConfig();if(t instanceof d.default&&e instanceof u.default){var o=new(r.getBlockRenderNodeClass(e.getType()))(this.editor,e.getID());if(!(o instanceof f.default))throw new Error("Error inserting render node, expecting block render node.");return o.setVersion(e.getVersion()),t.insertChild(o,n),o}if(t instanceof f.default&&e instanceof l.default){var i=new(r.getInlineRenderNodeClass(e.getType()))(this.editor,e.getID());if(!(i instanceof c.default))throw new Error("Error inserting render node, expecting inline render node.");return i.setVersion(e.getVersion()),t.insertChild(i,n),i}throw new Error("Error inserting render node, type mismatch.")},e.prototype.deleteNode=function(t,e){if(t instanceof d.default&&e instanceof f.default)t.deleteChild(e);else{if(!(t instanceof f.default&&e instanceof c.default))throw new Error("Error deleting render node, type mismatch.");t.deleteChild(e)}},e.prototype.updateNode=function(t,e){if(t instanceof d.default&&e instanceof s.default)return!(e.getVersion()<=this.lastVersion)&&(t.onModelUpdated(e),t.setVersion(e.getVersion()),!0);if(t instanceof f.default&&e instanceof u.default)return!(e.getVersion()<=this.lastVersion)&&(t.onModelUpdated(e),t.setVersion(e.getVersion()),!0);if(t instanceof c.default&&e instanceof l.default)return!(e.getVersion()<=this.lastVersion)&&(t.onModelUpdated(e),t.setVersion(e.getVersion()),!0);throw new Error("Error updating render node, type mismatch.")},e}(i.default),p=function(){function t(t,e){var n=this;this.editor=t,this.docRenderNode=e,this.version=-1,t.getDispatcher().on(a.ModelStateUpdatedEvent,function(t){return n.sync()}),this.sync()}return t.prototype.sync=function(){var t=this.editor.getModelManager().getDoc();new h(this.editor,this.version).syncNodes(t,this.docRenderNode),this.version=t.getVersion(),this.editor.getDispatcher().dispatch(new a.RenderStateUpdatedEvent)},t.prototype.getNextVersion=function(){return this.docRenderNode.getVersion()+1},t}();e.default=p},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(17)),i=r(n(91)),a=function(){function t(t){this.editor=t;var e=t.getRenderManager().getDocRenderNode();this.docBox=new o.default(t,e.getID()),this.layoutEngine=new i.default(t,this.docBox)}return t.prototype.getDocBox=function(){return this.docBox},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(0!==e){var r=t[e-1];n.top===r.top&&n.height===r.height&&n.left===r.left+r.width&&(r.width+=n.width,r.right=n.right,t.splice(e,1),e-=1)}}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(15)),a=n(7),s=o(n(30)),u=o(n(31)),l=o(n(32)),d=o(n(50)),f=o(n(17)),c=o(n(33)),h=o(n(19)),p=o(n(4)),g=o(n(10)),y=o(n(6));function v(t,e){t.setVersion(e),t.getChildren().forEach(function(t){t.setVersion(e),t.getChildren().forEach(function(t){t.setVersion(e),t.getChildren().forEach(function(t){t.setVersion(e)})})})}var _=function(t){function e(e,n){var r=t.call(this)||this;return r.editor=e,r.lastVersion=n,r.updatedPageFlowBoxes=[],r.updatedLineFlowBoxes=[],r}return r(e,t),e.prototype.getUpdatedPageFlowBoxes=function(){return Array.from(this.updatedPageFlowBoxes)},e.prototype.getUpdatedLineFlowBoxes=function(){return Array.from(this.updatedLineFlowBoxes)},e.prototype.getSrcNodeChildren=function(t){return t instanceof s.default?t.getChildren():t instanceof u.default?t.getChildren():t instanceof l.default?t.getChildren():[]},e.prototype.getDstNodeChildren=function(t){if(t instanceof f.default){var e=[];return t.getChildren().map(function(t){e.push.apply(e,t.getChildren())}),e}if(t instanceof h.default){var n=[];return t.getChildren().map(function(t){n.push.apply(n,t.getChildren())}),n}return t instanceof g.default?t.getChildren().slice():[]},e.prototype.findSrcNodeInDstNodes=function(t,e){var n=t.getID();return e.findIndex(function(t){return t.getRenderNodeID()===n})},e.prototype.insertNode=function(t,e,n){var r=this.editor.getConfig().getElementConfig();if(t instanceof f.default&&e instanceof u.default){var o=new(r.getBlockBoxClass(e.getType()))(this.editor,e.getID());if(!(o instanceof h.default))throw new Error("Error inserting box, expecting block box.");o.setVersion(e.getVersion());for(var i=t.getChildren(),a=0,s=!1,v=0,_=i.length;v<_;v++){if(a+(w=i[v]).getChildren().length>=n){w.insertChild(o,n-a),this.updatedPageFlowBoxes.push(w),s=!0;break}a+=w.getChildren().length}if(!s){var w=new c.default(this.editor);t.insertChild(w,i.length),w.insertChild(o,0),this.updatedPageFlowBoxes.push(w)}return o}if(t instanceof h.default&&e instanceof l.default){var b=new(r.getInlineBoxClass(e.getType()))(this.editor,e.getID());if(!(b instanceof g.default))throw new Error("Error inserting box, expecting inline box.");b.setVersion(e.getVersion());var m=t.getChildren();for(a=0,s=!1,v=0,_=m.length;v<_;v++){if(a+(C=m[v]).getChildren().length>=n){C.insertChild(b,n-a),this.updatedLineFlowBoxes.push(C),s=!0;break}a+=C.getChildren().length}if(!s){var C=new p.default(this.editor,t.getWidth());t.insertChild(C,m.length),C.insertChild(b,0),this.updatedLineFlowBoxes.push(C)}return b}if(t instanceof g.default&&e instanceof d.default){var O=new(r.getAtomicBoxClass(e.getType()))(this.editor,e.getID());if(!(O instanceof y.default))throw new Error("Error inserting box, expecting atomic box.");return O.setVersion(e.getVersion()),t.insertChild(O,n),O}throw new Error("Error inserting box, type mismatch.")},e.prototype.deleteNode=function(t,e){if(t instanceof f.default&&e instanceof h.default)for(var n=t.getChildren(),r=0,o=n.length;r<o;r++){var i=n[r];if(i.getChildren().indexOf(e)>=0){i.deleteChild(e),0===i.getChildren().length?t.deleteChild(i):this.updatedPageFlowBoxes.push(i);break}}else if(t instanceof h.default&&e instanceof g.default){var a=t.getChildren();for(r=0,o=a.length;r<o;r++){var s=a[r];if(s.getChildren().indexOf(e)>=0){s.deleteChild(e),0===s.getChildren().length?t.deleteChild(s):this.updatedLineFlowBoxes.push(s);break}}}else{if(!(t instanceof g.default&&e instanceof y.default))throw new Error("Error deleting box, type mismatch.");t.deleteChild(e)}},e.prototype.updateNode=function(t,e){if(t instanceof f.default&&e instanceof s.default){if(e.getVersion()<=this.lastVersion)return!1;for(var n=void 0,r=0;r<t.getChildren().length;r++){for(var o=t.getChildren()[r],i=0;i<o.getChildren().length;i++){var a=o.getChildren()[i];n&&a.getRenderNodeID()===n.getRenderNodeID()?(n.join(a),v(n,e.getVersion()),o.deleteChild(a),i--):n=a}0===o.getChildren().length?(t.deleteChild(o),r--):this.updatedPageFlowBoxes.push(o)}return t.onRenderUpdated(e),t.setVersion(e.getVersion()),!0}if(t instanceof h.default&&e instanceof u.default){if(e.getVersion()<=this.lastVersion)return!1;for(n=void 0,r=0;r<t.getChildren().length;r++){var c=t.getChildren()[r];for(i=0;i<c.getChildren().length;i++){var p=c.getChildren()[i];n&&p.getRenderNodeID()===n.getRenderNodeID()?(n.join(p),c.deleteChild(p),i--):n=p}0===c.getChildren().length?(t.deleteChild(c),r--):this.updatedLineFlowBoxes.push(c)}return t.onRenderUpdated(e),t.setVersion(e.getVersion()),(w=t.getParent()).getVersion()<e.getVersion()&&w.setVersion(e.getVersion()),this.updatedPageFlowBoxes.push(w),!0}if(t instanceof g.default&&e instanceof l.default){if(e.getVersion()<=this.lastVersion)return!1;for(n=void 0,r=0;r<t.getChildren().length;r++){var _=t.getChildren()[r];n&&_.getRenderNodeID()===n.getRenderNodeID()?(n.join(_),t.deleteChild(_),r--):n=_}var w;return t.onRenderUpdated(e),t.setVersion(e.getVersion()),(w=t.getParent()).getVersion()<e.getVersion()&&w.setVersion(e.getVersion()),this.updatedLineFlowBoxes.push(w),!0}if(t instanceof y.default&&e instanceof d.default)return!(e.getVersion()<=this.lastVersion)&&(t.onRenderUpdated(e),t.setVersion(e.getVersion()),!0);throw new Error("Error updating box, type mismatch.")},e}(i.default),w=function(){function t(t,e){var n=this;this.editor=t,this.docBox=e,this.version=-1,t.getDispatcher().on(a.RenderStateUpdatedEvent,function(t){return n.sync()}),this.sync()}return t.prototype.sync=function(){var t=this,e=this.editor.getRenderManager().getDocRenderNode(),n=new _(this.editor,this.version);n.syncNodes(e,this.docBox);var r=e.getVersion(),o=n.getUpdatedLineFlowBoxes(),i=void 0;o.forEach(function(e){i&&i===e||(t.reflowLineFlowBox(e,r),i=e)});var s=n.getUpdatedPageFlowBoxes(),u=void 0;s.forEach(function(e){u&&u===e||(t.reflowPageFlowBox(e,r),u=e)}),this.version=r,this.editor.getDispatcher().dispatch(new a.LayoutStateUpdatedEvent)},t.prototype.reflowLineFlowBox=function(t,e){if(!t.isDeleted()){t.onRenderUpdated(),t.setVersion(e);var n=t,r=n.getParent();if(!(r.getChildren().indexOf(n)<0))for(var o=n.getWidth(),i=0,a=0;;){for(var s=n.getChildren()[a];i+s.getWidthWithoutTrailingWhitespace()>o;)for(var u=0;u<s.getChildren().length;u++){for(var l=s.getChildren()[u];l.getWidthWithoutTrailingWhitespace()>o;){if(i>0){var d=n.splitAt(a+1);n.setVersion(e),d.setVersion(e),r.insertChild(d,r.getChildren().indexOf(n)+1),n=d,a=0;var f=s.splitAt(u);0===s.getChildren().length?s.getParent().deleteChild(s):s.setVersion(e),f.setVersion(e),n.insertChild(f,n.getChildren().indexOf(s)+1),s=f,u=0}var c=n.splitAt(a+1);n.setVersion(e),c.setVersion(e),r.insertChild(c,r.getChildren().indexOf(n)+1),n=c,a=0;var h=s.splitAt(u+1);0===s.getChildren().length?s.getParent().deleteChild(s):s.setVersion(e),h.setVersion(e),n.insertChild(h,n.getChildren().indexOf(s)+1),s=h,u=0;var p=l.splitAtWidth(o);l.setVersion(e),p.setVersion(e),s.insertChild(p,s.getChildren().indexOf(l)+1),l=p,i=0}if(i+l.getWidthWithoutTrailingWhitespace()>o){c=n.splitAt(a+1);n.setVersion(e),c.setVersion(e),r.insertChild(c,r.getChildren().indexOf(n)+1),n=c,a=0;h=s.splitAt(u);0===s.getChildren().length?s.getParent().deleteChild(s):s.setVersion(e),h.setVersion(e),n.insertChild(h,n.getChildren().indexOf(s)+1),s=h,u=0,i=0;break}i+=l.getWidth()}if(i+=s.getWidth(),++a===n.getChildren().length){var g=r.getChildren().indexOf(n)+1;if(g>=r.getChildren().length)break;var y=r.getChildren()[g];if(!(i+y.getChildren()[0].getChildren()[0].getWidth()<=n.getWidth()))break;y.getChildren().forEach(function(t){n.insertChild(t,n.getChildren().length),t.setVersion(e)}),r.deleteChild(y)}}}},t.prototype.reflowPageFlowBox=function(t,e){if(!t.isDeleted()){t.onRenderUpdated(),t.setVersion(e);var n=t,r=n.getParent();if(!(r.getChildren().indexOf(n)<0))for(var o=n.getInnerHeight(),i=0,a=0;;){for(var s=n.getChildren()[a];i+s.getHeight()>o;)for(var u=0;u<s.getChildren().length;u++){var l=s.getChildren()[u];if(i+l.getHeight()>o){var d=n.splitAt(a+1);n.setVersion(e),d.setVersion(e),r.insertChild(d,r.getChildren().indexOf(n)+1),n=d,a=0;var f=s.splitAt(u);0===s.getChildren().length?s.getParent().deleteChild(s):s.setVersion(e),v(f,e),n.insertChild(f,n.getChildren().indexOf(s)+1),s=f,u=0,i=0;break}i+=l.getHeight()}if(i+=s.getHeight(),++a===n.getChildren().length){var c=r.getChildren().indexOf(n)+1;if(c>=r.getChildren().length)break;var h=r.getChildren()[c];if(!(i+h.getChildren()[0].getChildren()[0].getHeight()<=n.getInnerHeight()))break;h.getChildren().forEach(function(t){n.insertChild(t,n.getChildren().length),v(t,e)}),r.deleteChild(h)}}}},t}();e.default=w},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(51)),i=r(n(93)),a=r(n(94)),s=r(n(125)),u=function(){function t(t,e){this.editor=t;var n=t.getLayoutManager().getDocBox();this.docViewNode=new o.default(t,n.getID()),this.presenter=new a.default(t,this.docViewNode,e),this.domObserver=new s.default(t),this.domObserver.connect(this.docViewNode),this.cursorView=new i.default(t)}return t.prototype.getDocViewNode=function(){return this.docViewNode},t.prototype.getCursorView=function(){return this.cursorView},t.prototype.getPageViewNodes=function(){return this.docViewNode.getChildren()},t.prototype.getIsFocused=function(){return this.domObserver.getIsFocused()},t.prototype.focus=function(){this.domObserver.focus()},t.prototype.blur=function(){this.domObserver.blur()},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=function(){function t(t){var e=this;this.editor=t,this.leftAnchor=null,this.blinkState=!1,this.blinkInterval=null,this.domCaret=document.createElement("div"),this.domCaret.className="tw--cursor-caret",this.domCaret.style.position="absolute",this.domCaret.style.userSelect="none",this.domCaret.style.pointerEvents="none",this.domCaret.style.width="2px",this.domCaret.style.marginLeft="-1px",this.domSelections=[],t.getDispatcher().on(r.CursorStateUpdatedEvent,function(t){return e.updateView()}),t.getDispatcher().on(r.ViewStateUpdatedEvent,function(t){return e.updateView()}),t.getDispatcher().on(r.CursorFocusedEvent,function(t){return e.updateView()}),t.getDispatcher().on(r.CursorBlurredEvent,function(t){return e.updateView()})}return t.prototype.getLeftAnchor=function(){return this.leftAnchor},t.prototype.startBlinking=function(){var t=this;null===this.blinkInterval&&(this.blinkInterval=setInterval(function(){t.blinkState?t.domCaret.style.visibility="hidden":t.domCaret.style.visibility="visible",t.blinkState=!t.blinkState},500))},t.prototype.stopBlinking=function(){null!==this.blinkInterval&&(this.blinkState=!0,this.domCaret.style.visibility="visible",clearInterval(this.blinkInterval),this.blinkInterval=null)},t.prototype.updateView=function(){for(var t=this,e=this.editor.getCursor(),n=this.editor.getViewManager().getIsFocused(),r=this.editor.getLayoutManager().getDocBox(),o=this.editor.getViewManager().getPageViewNodes();this.domSelections.length>0;){var i=this.domSelections[0];i.parentElement&&i.parentElement.removeChild(i),this.domSelections.splice(0,1)}var a,s,u,l,d,f=Math.min(Math.max(e.getAnchor(),0),r.getSelectableSize()-1),c=Math.min(Math.max(e.getHead(),0),r.getSelectableSize()-1),h=r.resolveSelectableOffsetRangeToViewportBoundingRects(Math.min(f,c),Math.max(f,c)),p=-1,g=-1,y=-1,v=-1;(h.forEach(function(e,r){var i=o[r].getDOMContainer();e.forEach(function(e,o){if(p<0&&(p=r,g=o),y=r,v=o,0!==e.width){var a=document.createElement("div");a.className="tw--cursor-selection",a.style.position="absolute",a.style.top=e.top+"px",a.style.left=e.left+"px",a.style.width=e.paddingLeft+e.width+e.paddingRight+"px",a.style.height=e.paddingTop+e.height+e.paddingBottom+"px",a.style.userSelect="none",a.style.pointerEvents="none",a.style.background=n?"hsla(213, 100%, 50%, 0.2)":"hsla(0, 0%, 0%, 0.08)",i.appendChild(a),t.domSelections.push(a)}})}),c<f)?(a=p,s=(d=h[p][g]).left,u=d.top,l=d.height):(a=y,s=(d=h[y][v]).left+d.width,u=d.top,l=d.height);if(c===f){this.domCaret.style.display="block",this.domCaret.style.top=u+"px",this.domCaret.style.left=s+"px",this.domCaret.style.height=l+"px",this.domCaret.style.background=n?"hsla(213, 100%, 50%, 1)":"hsla(0, 0%, 0%, 0.5)";var _=o[a].getDOMContainer();this.domCaret.parentElement&&this.domCaret.parentElement!==_&&this.domCaret.parentElement.removeChild(this.domCaret),this.domCaret.parentElement||_.appendChild(this.domCaret),this.stopBlinking(),n&&this.startBlinking()}else this.domCaret.style.display="none";n&&setTimeout(function(){t.domCaret.scrollIntoView({block:"nearest"})})},t}();e.default=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),a=o(n(17)),s=o(n(33)),u=o(n(19)),l=o(n(4)),d=o(n(10)),f=o(n(51)),c=o(n(52)),h=o(n(95)),p=o(n(96)),g=o(n(53)),y=o(n(15)),v=o(n(97)),_=function(t){function e(e,n,r){var o=t.call(this)||this;return o.editor=e,o.lastVersion=n,o.idMap=r,o}return r(e,t),e.prototype.getSrcNodeChildren=function(t){return t instanceof a.default?t.getChildren():t instanceof s.default?t.getChildren():t instanceof u.default?t.getChildren():t instanceof l.default?t.getChildren():[]},e.prototype.getDstNodeChildren=function(t){return t instanceof f.default?t.getChildren().slice():t instanceof h.default?t.getChildren().slice():t instanceof c.default?t.getChildren().slice():t instanceof p.default?t.getChildren().slice():[]},e.prototype.findSrcNodeInDstNodes=function(t,e){var n=t.getID();return e.findIndex(function(t){return t.getID()===n})},e.prototype.insertNode=function(t,e,n){var r=this.editor.getConfig().getElementConfig();if(t instanceof f.default&&e instanceof s.default){var o=new h.default(this.editor,e.getID());return t.insertChild(o,n),this.idMap.set(e.getID(),[e,o]),o}if(t instanceof h.default&&e instanceof u.default){var i=new(r.getBlockViewNodeClass(e.getType()))(this.editor,e.getID());if(!(i instanceof c.default))throw new Error("Error inserting view node, expected block view to be built from block box.");return t.insertChild(i,n),this.idMap.set(e.getID(),[e,i]),i}if(t instanceof c.default&&e instanceof l.default){var a=new p.default(this.editor,e.getID());return t.insertChild(a,n),this.idMap.set(e.getID(),[e,a]),a}if(t instanceof p.default&&e instanceof d.default){var y=new(r.getInlineViewNodeClass(e.getType()))(this.editor,e.getID());if(!(y instanceof g.default))throw new Error("Error inserting view node, expected inline view to be built from inline box.");return t.insertChild(y,n),this.idMap.set(e.getID(),[e,y]),y}throw new Error("Error inserting view node, type mismatch.")},e.prototype.deleteNode=function(t,e){if(t instanceof f.default&&e instanceof h.default)return t.deleteChild(e),void this.idMap.delete(e.getID());if(t instanceof h.default&&e instanceof c.default)return t.deleteChild(e),void this.idMap.delete(e.getID());if(t instanceof c.default&&e instanceof p.default)return t.deleteChild(e),void this.idMap.delete(e.getID());if(t instanceof p.default&&e instanceof g.default)return t.deleteChild(e),void this.idMap.delete(e.getID());throw new Error("Error deleting view node, type mismatch.")},e.prototype.updateNode=function(t,e){if(t instanceof f.default&&e instanceof a.default)return!(e.getVersion()<=this.lastVersion)&&(t.onLayoutUpdated(e),!0);if(t instanceof h.default&&e instanceof s.default)return!(e.getVersion()<=this.lastVersion)&&(t.onLayoutUpdated(e),!0);if(t instanceof c.default&&e instanceof u.default)return!(e.getVersion()<=this.lastVersion)&&(t.onLayoutUpdated(e),!0);if(t instanceof p.default&&e instanceof l.default)return!(e.getVersion()<=this.lastVersion)&&(t.onLayoutUpdated(e),!0);if(t instanceof g.default&&e instanceof d.default)return!(e.getVersion()<=this.lastVersion)&&(t.onLayoutUpdated(e),!0);throw new Error("Error updating view node, type mismatch.")},e}(y.default),w=function(){function t(t,e,n){var r=this;this.editor=t,this.docViewNode=e,this.domWrapper=n,n.appendChild(this.docViewNode.getDOMContainer()),this.version=-1,this.idMap=new Map,v.default(t),t.getDispatcher().on(i.LayoutStateUpdatedEvent,function(t){return r.sync()}),this.sync()}return t.prototype.getPageDOMContentContainer=function(t){var e=this.docViewNode.getChildren();if(t<0||t>=e.length)throw new Error("Page offset "+t+" is out of range.");return e[t].getDOMContentContainer()},t.prototype.sync=function(){var t=this.editor.getLayoutManager().getDocBox();new _(this.editor,this.version,this.idMap).syncNodes(t,this.docViewNode),this.version=t.getVersion(),this.editor.getDispatcher().dispatch(new i.ViewStateUpdatedEvent)},t}();e.default=w},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.parent=null,r.children=[],r.domContainer=document.createElement("div"),r.domContainer.className="tw--page",r.domContainer.setAttribute("data-tw-id",n),r.domContainer.setAttribute("data-tw-role","page"),r.domContainer.style.position="relative",r.domContentContainer=document.createElement("div"),r.domContentContainer.className="tw--page-content",r.domContentContainer.setAttribute("data-tw-role","page-content"),r.domContainer.appendChild(r.domContentContainer),r}return r(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.getDOMContentContainer=function(){return this.domContentContainer},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},e.prototype.insertChild=function(t,e){void 0===e&&(e=null);var n=t.getDOMContainer();if(t.setParent(this),null===e)this.children.push(t),this.domContentContainer.appendChild(n);else{if(this.children.splice(e,0,t),e>this.domContentContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+e+" is out of range.");e===this.domContentContainer.childNodes.length?this.domContentContainer.appendChild(n):this.domContentContainer.insertBefore(n,this.domContentContainer.childNodes[e])}},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.onDeleted();var n=t.getDOMContainer();this.domContentContainer.removeChild(n),t.setParent(null),this.children.splice(e,1)},e.prototype.getChildren=function(){return this.children},e.prototype.onDeleted=function(){this.children.map(function(t){t.onDeleted()})},e.prototype.onLayoutUpdated=function(t){this.selectableSize=t.getSelectableSize(),this.domContainer.style.width=t.getWidth()+"px",this.domContainer.style.height=t.getHeight()+"px",this.domContainer.style.paddingTop=t.getPaddingTop()+"px",this.domContainer.style.paddingBottom=t.getPaddingBottom()+"px",this.domContainer.style.paddingLeft=t.getPaddingLeft()+"px",this.domContainer.style.paddingRight=t.getPaddingRight()+"px"},e.prototype.resolveSelectableOffsetToNodeOffset=function(t){for(var e=0,n=0,r=this.children.length;n<r;n++){var o=this.children[n];if(e+o.getSelectableSize()>t)return o.resolveSelectableOffsetToNodeOffset(t-e);e+=o.getSelectableSize()}throw new Error("Selectable offset "+t+" is out of range.")},e}(o(n(11)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.parent=null,r.children=[],r.domContainer=document.createElement("div"),r.domContainer.className="tw--line",r.domContainer.setAttribute("data-tw-id",n),r.domContainer.setAttribute("data-tw-role","line"),r.domContainer.style.whiteSpace="pre-wrap",r}return r(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.getDOMContentContainer=function(){return this.domContainer},e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){if(!this.parent)throw new Error("No parent has been set.");return this.parent},e.prototype.insertChild=function(t,e){void 0===e&&(e=null);var n=t.getDOMContainer();if(t.setParent(this),null===e)this.children.push(t),this.domContainer.appendChild(n);else{if(this.children.splice(e,0,t),e>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+e+" is out of range.");e===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[e])}},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.onDeleted();var n=t.getDOMContainer();this.domContainer.removeChild(n),this.children.splice(e,1)},e.prototype.getChildren=function(){return this.children},e.prototype.onDeleted=function(){this.children.map(function(t){t.onDeleted()})},e.prototype.onLayoutUpdated=function(t){this.selectableSize=t.getSelectableSize()},e.prototype.resolveSelectableOffsetToNodeOffset=function(t){for(var e=0,n=0,r=this.children.length;n<r;n++){var o=this.children[n];if(e+o.getSelectableSize()>t)return o.resolveSelectableOffsetToNodeOffset(t-e);e+=o.getSelectableSize()}throw new Error("Selectable offset "+t+" is out of range.")},e}(o(n(11)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(34)),a=o(n(35)),s=o(n(36)),u=n(37);e.default=function(t){var e=t.getConfig().getKeyBindingConfig(),n=t.getDispatcher();e.bindKey(new i.default(a.ArrowLeftKey),function(){return n.dispatchCommand(u.moveCursorLeft())}),e.bindKey(new i.default(a.ArrowRightKey),function(){return n.dispatchCommand(u.moveCursorRight())}),e.bindKey(new i.default(a.ArrowLeftKey,[s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadLeft())}),e.bindKey(new i.default(a.ArrowRightKey,[s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadRight())}),e.bindKey(new i.default(a.ArrowLeftKey,[s.AltKey]),function(){return n.dispatchCommand(u.moveCursorLeftByWord())}),e.bindKey(new i.default(a.ArrowRightKey,[s.AltKey]),function(){return n.dispatchCommand(u.moveCursorRightByWord())}),e.bindKey(new i.default(a.ArrowLeftKey,[s.AltKey,s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadLeftByWord())}),e.bindKey(new i.default(a.ArrowRightKey,[s.AltKey,s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadRightByWord())}),e.bindKey(new i.default(a.ArrowLeftKey,[s.MetaKey]),function(){return n.dispatchCommand(u.moveCursorToLeftOfLine())}),e.bindKey(new i.default(a.ArrowRightKey,[s.MetaKey]),function(){return n.dispatchCommand(u.moveCursorToRightOfLine())}),e.bindKey(new i.default(a.ArrowLeftKey,[s.MetaKey,s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadToLeftOfLine())}),e.bindKey(new i.default(a.ArrowRightKey,[s.MetaKey,s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadToRightOfLine())}),e.bindKey(new i.default(a.ArrowUpKey),function(){return n.dispatchCommand(u.moveCursorToLineAbove())}),e.bindKey(new i.default(a.ArrowDownKey),function(){return n.dispatchCommand(u.moveCursorToLineBelow())}),e.bindKey(new i.default(a.ArrowUpKey,[s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadToLineAbove())}),e.bindKey(new i.default(a.ArrowDownKey,[s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadToLineBelow())}),e.bindKey(new i.default(a.ArrowUpKey,[s.MetaKey]),function(){return n.dispatchCommand(u.moveCursorToLeftOfDoc())}),e.bindKey(new i.default(a.ArrowDownKey,[s.MetaKey]),function(){return n.dispatchCommand(u.moveCursorToRightOfDoc())}),e.bindKey(new i.default(a.ArrowUpKey,[s.MetaKey,s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadToLeftOfDoc())}),e.bindKey(new i.default(a.ArrowDownKey,[s.MetaKey,s.ShiftKey]),function(){return n.dispatchCommand(u.moveCursorHeadToRightOfDoc())}),e.bindKey(new i.default(a.AKey,[s.MetaKey]),function(){return n.dispatchCommand(u.selectAll())}),e.bindKey(new i.default(a.BackspaceKey),function(){return n.dispatchCommand(u.deleteBackward())}),e.bindKey(new i.default(a.DeleteKey),function(){return n.dispatchCommand(u.deleteForward())}),e.bindKey(new i.default(a.EnterKey),function(){return n.dispatchCommand(u.split())}),e.bindKey(new i.default(a.ZKey,[s.MetaKey]),function(){return n.dispatchUndo()}),e.bindKey(new i.default(a.ZKey,[s.MetaKey,s.ShiftKey]),function(){return n.dispatchRedo()})}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=n(12);e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getAnchor(),a=n.getHead();if(r===a){if(a<1)return e;e.addOperation(new i.Delete(t.getRenderManager().convertSelectableOffsetToModelOffset(a-1),t.getRenderManager().convertSelectableOffsetToModelOffset(a))),e.setCursor(a-1)}else r<a?(e.addOperation(new i.Delete(t.getRenderManager().convertSelectableOffsetToModelOffset(r),t.getRenderManager().convertSelectableOffsetToModelOffset(a))),e.setCursor(r)):r>a&&(e.addOperation(new i.Delete(t.getRenderManager().convertSelectableOffsetToModelOffset(a),t.getRenderManager().convertSelectableOffsetToModelOffset(r))),e.setCursor(a));return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=n(12);e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getAnchor(),a=n.getHead(),s=t.getLayoutManager().getDocBox();if(r===a){if(a>=s.getSelectableSize()-1)return e;e.addOperation(new i.Delete(t.getRenderManager().convertSelectableOffsetToModelOffset(a),t.getRenderManager().convertSelectableOffsetToModelOffset(a+1)))}else r<a?(e.addOperation(new i.Delete(t.getRenderManager().convertSelectableOffsetToModelOffset(r),t.getRenderManager().convertSelectableOffsetToModelOffset(a))),e.setCursor(r)):r>a&&(e.addOperation(new i.Delete(t.getRenderManager().convertSelectableOffsetToModelOffset(a),t.getRenderManager().convertSelectableOffsetToModelOffset(r))),e.setCursor(a));return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=n(12);e.default=function(t){return function(e){var n=new o.default,r=e.getCursor();if(!r)return n;var a=r.getAnchor(),s=r.getHead(),u=a;return a<s?n.addOperation(new i.Delete(e.getRenderManager().convertSelectableOffsetToModelOffset(a),e.getRenderManager().convertSelectableOffsetToModelOffset(s))):a>s&&(n.addOperation(new i.Delete(e.getRenderManager().convertSelectableOffsetToModelOffset(s),e.getRenderManager().convertSelectableOffsetToModelOffset(a))),u=s),n.addOperation(new i.Insert(e.getRenderManager().convertSelectableOffsetToModelOffset(u),t)),n.setCursor(u+t.filter(function(t){return"string"===typeof t}).length),n}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(t){return function(e){var n=new o.default;return n.setCursor(t),n}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(t){return function(e){var n=new o.default;return n.setCursorHead(t),n}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getAnchor(),i=n.getHead();if(r===i){if(i<1)return e;e.setCursor(i-1)}else r<i?e.setCursor(r):r>i&&e.setCursor(i);return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getAnchor(),i=n.getHead(),a=t.getLayoutManager().getDocBox();if(r===i){if(i>=a.getSelectableSize()-1)return e;e.setCursor(i+1)}else r<i?e.setCursor(i):r>i&&e.setCursor(r);return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead();return r<1?e:(e.setCursorHead(r-1),e)}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead();return r>=t.getLayoutManager().getDocBox().getSelectableSize()-1?e:(e.setCursorHead(r+1),e)}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(6));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),a=t.getLayoutManager().getDocBox().resolvePosition(r).getAtomicBoxLevel();if(a.getSelectableOffset()>0)e.setCursor(r-a.getSelectableOffset());else{var s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an atomic box.");var u=s.getPreviousSibling();u?e.setCursor(r-u.getSelectableSize()):e.setCursor(r)}return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(6));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),a=t.getLayoutManager().getDocBox().resolvePosition(r).getAtomicBoxLevel(),s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an atomic box.");if(a.getSelectableOffset()<s.getSelectableSize()-1)e.setCursor(r-a.getSelectableOffset()+s.getSelectableSize()-1);else{var u=s.getNextSibling();u?e.setCursor(r-a.getSelectableOffset()+s.getSelectableSize()-1+u.getSelectableSize()):e.setCursor(r)}return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(6));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),a=t.getLayoutManager().getDocBox().resolvePosition(r).getAtomicBoxLevel();if(a.getSelectableOffset()>0)e.setCursorHead(r-a.getSelectableOffset());else{var s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an atomic box.");var u=s.getPreviousSibling();u&&e.setCursorHead(r-u.getSelectableSize())}return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(6));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),a=t.getLayoutManager().getDocBox().resolvePosition(r).getAtomicBoxLevel(),s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an atomic box.");if(a.getSelectableOffset()<s.getSelectableSize()-1)e.setCursorHead(r-a.getSelectableOffset()+s.getSelectableSize()-1);else{var u=s.getNextSibling();u&&e.setCursorHead(r-a.getSelectableOffset()+s.getSelectableSize()-1+u.getSelectableSize())}return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),i=t.getLayoutManager().getDocBox().resolvePosition(r).getLineFlowBoxLevel();return i.getSelectableOffset()>0?e.setCursor(r-i.getSelectableOffset()):e.setCursor(r),e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(4));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),a=t.getLayoutManager().getDocBox().resolvePosition(r).getLineFlowBoxLevel(),s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an line box.");return a.getSelectableOffset()<s.getSelectableSize()-1?e.setCursor(r-a.getSelectableOffset()+s.getSelectableSize()-1):e.setCursor(r),e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),i=t.getLayoutManager().getDocBox().resolvePosition(r).getLineFlowBoxLevel();return i.getSelectableOffset()>0?e.setCursorHead(r-i.getSelectableOffset()):e.setCursorHead(r),e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(4));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),a=t.getLayoutManager().getDocBox().resolvePosition(r).getLineFlowBoxLevel(),s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an line box.");return a.getSelectableOffset()<s.getSelectableSize()-1?e.setCursorHead(r-a.getSelectableOffset()+s.getSelectableSize()-1):e.setCursorHead(r),e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(4));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=Math.min(n.getAnchor(),n.getHead()),a=t.getLayoutManager().getDocBox().resolvePosition(r).getLineFlowBoxLevel(),s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an line box.");var u=s.getPreviousSibling();if(u){var l=n.getLeftLock();null===l&&(l=s.resolveSelectableOffsetRangeToViewportBoundingRects(a.getSelectableOffset(),a.getSelectableOffset())[0].left),e.setCursorLockLeft(l);var d=u.resolveViewportPositionToSelectableOffset(l);e.setCursor(r-a.getSelectableOffset()-u.getSelectableSize()+d)}else e.setCursor(r-a.getSelectableOffset());return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(4));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=Math.max(n.getAnchor(),n.getHead()),a=t.getLayoutManager().getDocBox().resolvePosition(r).getLineFlowBoxLevel(),s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an line box.");var u=s.getNextSibling();if(u){var l=n.getLeftLock();null===l&&(l=s.resolveSelectableOffsetRangeToViewportBoundingRects(a.getSelectableOffset(),a.getSelectableOffset())[0].left),e.setCursorLockLeft(l);var d=u.resolveViewportPositionToSelectableOffset(l);e.setCursor(r-a.getSelectableOffset()+s.getSelectableSize()+d)}else e.setCursor(r-a.getSelectableOffset()+s.getSelectableSize()-1);return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(4));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),a=t.getLayoutManager().getDocBox().resolvePosition(r).getLineFlowBoxLevel(),s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an line box.");var u=s.getPreviousSibling();if(u){var l=n.getLeftLock();null===l&&(l=s.resolveSelectableOffsetRangeToViewportBoundingRects(a.getSelectableOffset(),a.getSelectableOffset())[0].left),e.setCursorLockLeft(l);var d=u.resolveViewportPositionToSelectableOffset(l);e.setCursorHead(r-a.getSelectableOffset()-u.getSelectableSize()+d)}else e.setCursorHead(r-a.getSelectableOffset());return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1)),i=r(n(4));e.default=function(){return function(t){var e=new o.default,n=t.getCursor();if(!n)return e;var r=n.getHead(),a=t.getLayoutManager().getDocBox().resolvePosition(r).getLineFlowBoxLevel(),s=a.getLayoutNode();if(!(s instanceof i.default))throw new Error("Expecting position to be referencing an line box.");var u=s.getNextSibling();if(u){var l=n.getLeftLock();null===l&&(l=s.resolveSelectableOffsetRangeToViewportBoundingRects(a.getSelectableOffset(),a.getSelectableOffset())[0].left),e.setCursorLockLeft(l);var d=u.resolveViewportPositionToSelectableOffset(l);e.setCursorHead(r-a.getSelectableOffset()+s.getSelectableSize()+d)}else e.setCursorHead(r-a.getSelectableOffset()+s.getSelectableSize()-1);return e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default;return t.getCursor()?(e.setCursor(0),e):e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default;if(!t.getCursor())return e;var n=t.getLayoutManager().getDocBox();return e.setCursor(n.getSelectableSize()-1),e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default;return t.getCursor()?(e.setCursorHead(0),e):e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default;if(!t.getCursor())return e;var n=t.getLayoutManager().getDocBox();return e.setCursorHead(n.getSelectableSize()-1),e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1));e.default=function(){return function(t){var e=new o.default;if(!t.getCursor())return e;var n=t.getLayoutManager().getDocBox();return e.setCursor(0),e.setCursorHead(n.getSelectableSize()-1),e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(9)),i=r(n(1)),a=n(12),s=r(n(13)),u=r(n(14));e.default=function(){return function(t){var e=new i.default,n=t.getCursor();if(!n)return e;var r=n.getAnchor(),l=n.getHead(),d=r;r<l?e.addOperation(new a.Delete(t.getRenderManager().convertSelectableOffsetToModelOffset(r),t.getRenderManager().convertSelectableOffsetToModelOffset(l))):r>l&&(e.addOperation(new a.Delete(t.getRenderManager().convertSelectableOffsetToModelOffset(l),t.getRenderManager().convertSelectableOffsetToModelOffset(r))),d=l);for(var f,c=t.getRenderManager().convertSelectableOffsetToModelOffset(d),h=t.getTokenManager().getTokenState().getTokens(),p=null,g=null,y=c;y>0;y--)(f=h[y])instanceof s.default&&(null===p?p=f:null===g&&(g=f));if(null===p||null===g)throw new Error("State is corrupted, cannot perform split.");return e.addOperation(new a.Insert(t.getRenderManager().convertSelectableOffsetToModelOffset(d),["\n",new u.default,new u.default,new s.default(g.getType(),o.default(),g.getAttributes()),new s.default(p.getType(),o.default(),p.getAttributes())])),e.setCursor(d+1),e}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),a=r(n(126)),s=o(n(37)),u=r(n(127));var l=function(){function t(t){var e=this;this.isComposing=!1,this.isFocused=!1,this.isMouseDown=!1,this.onMouseDown=function(t){if(t.target instanceof HTMLElement){for(var n=!1,r=t.target;r;){if("page"===r.getAttribute("data-tw-role")){n=!0;break}r=r.parentElement}if(n)if(t.preventDefault(),e.isFocused){e.isMouseDown=!0;var o=e.resolveScreenPosition(t.clientX,t.clientY);o<0||e.editor.getDispatcher().dispatchCommand(s.moveCursorTo(o))}else e.focus();else e.isFocused&&e.blur()}},this.onMouseMove=function(t){if(e.isMouseDown){var n=e.resolveScreenPosition(t.clientX,t.clientY);n<0||e.editor.getDispatcher().dispatchCommand(s.moveCursorHeadTo(n))}},this.onMouseUp=function(t){e.isMouseDown=!1},this.onKeyDown=function(t){var n=a.default(t);n&&(e.editor.getDispatcher().dispatchKeyPress(n)&&t.preventDefault())},this.onInput=function(){setTimeout(function(){if(!e.isComposing){var t=e.parseContentEditableValue();if(e.$contentEditable.innerHTML="",0!==t.length)e.editor.getDispatcher().dispatchCommand(s.insert(t))}})},this.onCompositionStart=function(){e.isComposing=!0},this.onCompositionEnd=function(){e.isComposing=!1},this.onFocused=function(){e.isFocused=!0,e.editor.getDispatcher().dispatch(new i.CursorFocusedEvent)},this.onBlurred=function(){e.isFocused=!1,e.editor.getDispatcher().dispatch(new i.CursorBlurredEvent)},this.onCopy=function(t){t.preventDefault(),u.default(e.editor)},this.editor=t,this.$iframe=document.createElement("iframe"),this.$iframe.scrolling="no",this.$iframe.src="about:blank",this.$iframe.style.width="0",this.$iframe.style.height="0",this.$iframe.style.border="none",this.$iframe.style.position="fixed",this.$iframe.style.zIndex="-1",this.$iframe.style.opacity="0",this.$iframe.style.overflow="hidden",this.$iframe.style.left="0",this.$iframe.style.top="0",this.$contentEditable=document.createElement("div"),this.$contentEditable.contentEditable="true",this.$contentEditable.style.whiteSpace="pre",this.mutationObserver=new MutationObserver(this.onInput)}return t.prototype.connect=function(t){var e=this;this.docViewNode=t,window.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),document.body.appendChild(this.$iframe),setTimeout(function(){e.initContentEditable()})},t.prototype.focus=function(){this.$contentEditable.focus()},t.prototype.blur=function(){this.$contentEditable.blur()},t.prototype.getIsFocused=function(){return this.isFocused},t.prototype.resolveScreenPosition=function(t,e){if(!this.docViewNode)throw new Error("No doc view is being observed.");for(var n=this.docViewNode.getChildren(),r=this.editor.getLayoutManager().getDocBox().getChildren(),o=0,i=0,a=n.length;i<a;i++){var s=n[i],u=r[i],l=s.getDOMContainer().getBoundingClientRect();if(l.left<=t&&l.right>=t&&l.top<=e&&l.bottom>=e){var d=t-l.left,f=e-l.top;return o+u.resolveViewportPositionToSelectableOffset(d,f)}o+=u.getSelectableSize()}return-1},t.prototype.parseContentEditableValue=function(){var t=[];return this.$contentEditable.childNodes.forEach(function(e){t.push.apply(t,function t(e){if(e.nodeValue)return e.nodeValue.split("");var n=[];return e.childNodes.forEach(function(e){n.push.apply(n,t(e))}),n}(e))}),t},t.prototype.initContentEditable=function(){this.$contentEditable.parentElement||(this.$iframe.contentDocument.body.appendChild(this.$contentEditable),this.$contentEditable.addEventListener("keydown",this.onKeyDown),this.$contentEditable.addEventListener("compositionstart",this.onCompositionStart),this.$contentEditable.addEventListener("compositionend",this.onCompositionEnd),this.$contentEditable.addEventListener("focus",this.onFocused),this.$contentEditable.addEventListener("blur",this.onBlurred),this.$contentEditable.addEventListener("copy",this.onCopy),this.mutationObserver.observe(this.$contentEditable,{subtree:!0,characterData:!0,childList:!0}))},t}();e.default=l},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(34)),a=n(36),s=o(n(35)),u={a:s.AKey,b:s.BKey,c:s.CKey,d:s.DKey,e:s.EKey,f:s.FKey,g:s.GKey,h:s.HKey,i:s.IKey,j:s.JKey,k:s.KKey,l:s.LKey,m:s.MKey,n:s.NKey,o:s.OKey,p:s.PKey,q:s.QKey,r:s.RKey,s:s.SKey,t:s.TKey,u:s.UKey,v:s.VKey,w:s.WKey,x:s.XKey,y:s.YKey,z:s.ZKey,A:s.AKey,B:s.BKey,C:s.CKey,D:s.DKey,E:s.EKey,F:s.FKey,G:s.GKey,H:s.HKey,I:s.IKey,J:s.JKey,K:s.KKey,L:s.LKey,M:s.MKey,N:s.NKey,O:s.OKey,P:s.PKey,Q:s.QKey,R:s.RKey,S:s.SKey,T:s.TKey,U:s.UKey,V:s.VKey,W:s.WKey,X:s.XKey,Y:s.YKey,Z:s.ZKey,Num1:s.Num1Key,Num2:s.Num2Key,Num3:s.Num3Key,Num4:s.Num4Key,Num5:s.Num5Key,Num6:s.Num6Key,Num7:s.Num7Key,Num8:s.Num8Key,Num9:s.Num9Key,Num0:s.Num0Key,Dash:s.DashKey,Equal:s.EqualKey,Space:s.SpaceKey,ArrowLeft:s.ArrowLeftKey,ArrowRight:s.ArrowRightKey,ArrowUp:s.ArrowUpKey,ArrowDown:s.ArrowDownKey,Backspace:s.BackspaceKey,Delete:s.DeleteKey,Enter:s.EnterKey};e.default=function(t){var e=[];t.altKey&&e.push(a.AltKey),t.ctrlKey&&e.push(a.CtrlKey),t.metaKey&&e.push(a.MetaKey),t.shiftKey&&e.push(a.ShiftKey);var n,r=(n=t.key)in u?u[n]:null;return r?new i.default(r,e):null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=document.createElement("iframe");r.scrolling="no",r.src="about:blank",r.style.width="0",r.style.height="0",r.style.border="none",r.style.position="fixed",r.style.zIndex="-1",r.style.opacity="0",r.style.overflow="hidden",r.style.left="0",r.style.top="0",r.contentEditable="true",document.body.appendChild(r),e.default=function(t){var e=t.getCursor(),n=e.getAnchor(),o=e.getHead();if(n!==o){var i=t.getRenderManager(),a=i.convertSelectableOffsetToModelOffset(Math.min(n,o)),s=i.convertSelectableOffsetToModelOffset(Math.max(n,o)),u=t.getModelManager().toHTML(a,s);r.contentDocument.body.innerHTML=u,r.contentDocument.execCommand("selectAll"),r.contentDocument.execCommand("copy")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.editor=t,this.extensions=[]}return t.prototype.registerExtension=function(t){this.extensions.push(t),t.$onRegistered(this.editor)},t.prototype.onMounted=function(){this.extensions.forEach(function(t){t.onMounted&&t.onMounted()})},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(130)),i=r(n(142)),a=r(n(143)),s=r(n(144)),u=function(){function t(){this.elementConfig=new o.default,this.keyBindingConfig=new i.default,this.pageConfig=new a.default,this.fontConfig=new s.default}return t.prototype.getElementConfig=function(){return this.elementConfig},t.prototype.getKeyBindingConfig=function(){return this.keyBindingConfig},t.prototype.getPageConfig=function(){return this.pageConfig},t.prototype.getFontConfig=function(){return this.fontConfig},t}();e.default=u},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(131)),i=r(n(132)),a=r(n(133)),s=r(n(134)),u=r(n(137)),l=r(n(138)),d=r(n(57)),f=r(n(140)),c=r(n(141)),h=function(){function t(){this.elementClasses=new Map,this.blockRenderNodeClasses=new Map,this.inlineRenderNodeClasses=new Map,this.blockBoxClasses=new Map,this.inlineBoxClasses=new Map,this.atomicBoxClasses=new Map,this.blockViewNodeClasses=new Map,this.inlineViewNodeClasses=new Map,this.registerElementClass("Paragraph",o.default),this.registerElementClass("Text",i.default),this.registerBlockRenderNodeClass("Paragraph",a.default),this.registerInlineRenderNodeClass("Text",s.default),this.registerBlockBoxClass("ParagraphBlockRenderNode",u.default),this.registerInlineBoxClass("TextInlineRenderNode",l.default),this.registerAtomicBoxClass("TextAtomicRenderNode",d.default),this.registerBlockViewNodeClass("ParagraphBlockBox",f.default),this.registerInlineViewNodeClass("TextInlineBox",c.default)}return t.prototype.registerElementClass=function(t,e){this.elementClasses.set(t,e)},t.prototype.getElementClass=function(t){if(!this.elementClasses.has(t))throw new Error("Element type "+t+" is not registered.");return this.elementClasses.get(t)},t.prototype.registerBlockRenderNodeClass=function(t,e){this.blockRenderNodeClasses.set(t,e)},t.prototype.getBlockRenderNodeClass=function(t){if(!this.blockRenderNodeClasses.has(t))throw new Error("Block render node for element type "+t+" is not registered.");return this.blockRenderNodeClasses.get(t)},t.prototype.registerInlineRenderNodeClass=function(t,e){this.inlineRenderNodeClasses.set(t,e)},t.prototype.getInlineRenderNodeClass=function(t){if(!this.inlineRenderNodeClasses.has(t))throw new Error("Inline render node for element type "+t+" is not registered.");return this.inlineRenderNodeClasses.get(t)},t.prototype.registerBlockBoxClass=function(t,e){this.blockBoxClasses.set(t,e)},t.prototype.getBlockBoxClass=function(t){if(!this.blockBoxClasses.has(t))throw new Error("Block box for render node type "+t+" is not registered.");return this.blockBoxClasses.get(t)},t.prototype.registerInlineBoxClass=function(t,e){this.inlineBoxClasses.set(t,e)},t.prototype.getInlineBoxClass=function(t){if(!this.inlineBoxClasses.has(t))throw new Error("Inline box for render node type "+t+" is not registered.");return this.inlineBoxClasses.get(t)},t.prototype.registerAtomicBoxClass=function(t,e){this.atomicBoxClasses.set(t,e)},t.prototype.getAtomicBoxClass=function(t){if(!this.atomicBoxClasses.has(t))throw new Error("Atomic box for render node type "+t+" is not registered.");return this.atomicBoxClasses.get(t)},t.prototype.registerBlockViewNodeClass=function(t,e){this.blockViewNodeClasses.set(t,e)},t.prototype.getBlockViewNodeClass=function(t){if(!this.blockViewNodeClasses.has(t))throw new Error("Block view node for box type "+t+" is not registered.");return this.blockViewNodeClasses.get(t)},t.prototype.registerInlineViewNodeClass=function(t,e){this.inlineViewNodeClasses.set(t,e)},t.prototype.getInlineViewNodeClass=function(t){if(!this.inlineViewNodeClasses.has(t))throw new Error("Inline view node for box type "+t+" is not registered.");return this.inlineViewNodeClasses.get(t)},t}();e.default=h},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getType=function(){return"Paragraph"},e.prototype.getAttributes=function(){return{id:this.id}},e.prototype.toHTML=function(t,e){for(var n=document.createElement("p"),r=1,o=0,i=this.children.length;o<i&&r<e;o++){var a=this.children[o],s=a.getSize(),u=Math.max(0,t-r),l=Math.min(u+s,e-r);if(!(t>l||e<u)){var d=a.toHTML(u,l);n.appendChild(d),r+=s}}return n},e.prototype.onStateUpdated=function(t){return!1},e}(o(n(28)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getType=function(){return"Text"},e.prototype.getAttributes=function(){return{id:this.id}},e.prototype.toHTML=function(t,e){var n=document.createElement("span");return n.innerText=this.content.substring(t-1,e-1).replace("\n",""),n},e.prototype.onStateUpdated=function(t){return!1},e}(o(n(29)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getType=function(){return"ParagraphBlockRenderNode"},e}(o(n(31)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(9)),a=o(n(135)),s=o(n(32)),u=o(n(136)),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getType=function(){return"TextInlineRenderNode"},e.prototype.onModelUpdated=function(e){var n=this;t.prototype.onModelUpdated.call(this,e);var r=a.default(e.getContent()),o=0;r.forEach(function(t){for(var r=-1,a=o,s=n.children.length;a<s;a++){var l=n.children[a];if(l.getContent()===t.text&&l.getBreakable()===t.breakable){r=a;break}}if(r<0){var d=new u.default(n.editor,e.getID()+"-"+i.default(),t.text,t.breakable);d.setVersion(e.getVersion()),n.insertChild(d,o)}else for(a=o;a<r;a++)n.deleteChild(n.children[o]);o++});for(var s=o,l=this.children.length;s<l;s++)this.deleteChild(this.children[o])},e}(s.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=[" ","\n","\t"];e.default=function(t){for(var e=[],n="",o=0,i=t.length;o<i;o++){var a=t[o];n+=a,r.includes(a)&&(e.push({text:n,breakable:!0}),n="")}return n.length>0&&e.push({text:n,breakable:!1}),e}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i.content=r,i.breakable=o,i}return r(e,t),e.prototype.getType=function(){return"TextAtomicRenderNode"},e.prototype.getSelectableSize=function(){return this.content.length},e.prototype.getContent=function(){return this.content},e.prototype.getBreakable=function(){return this.breakable},e}(o(n(50)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 12},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.getType=function(){return"ParagraphBlockBox"},e.prototype.splitAt=function(t){if(t>this.children.length)throw new Error("Error cleaving ParagraphBlockBox, offset "+t+" is out of range.");var n=this.children.splice(t),r=new e(this.editor,this.renderNodeID);return n.forEach(function(t,e){r.insertChild(t,e)}),this.clearCache(),r},e.prototype.join=function(t){var e=this;if(t.getRenderNodeID()!==this.renderNodeID)throw new Error("Cannot join block boxes with different render node IDs.");var n=this.children.length;t.getChildren().forEach(function(t){e.insertChild(t,n),n++}),this.clearCache()},e.prototype.resolveViewportPositionToSelectableOffset=function(t,e){for(var n=0,r=0,o=0,i=this.children.length;o<i;o++){var a=this.children[o],s=a.getHeight();if(e>=r&&e<=r+s){n+=a.resolveViewportPositionToSelectableOffset(t);break}n+=a.getSelectableSize(),r+=s}return n},e.prototype.resolveSelectableOffsetRangeToViewportBoundingRects=function(t,e){for(var n=this,r=[],o=0,i=0,a=function(a,u){var l=s.children[a],d=l.getHeight(),f=l.getSelectableSize(),c=Math.max(t-o,0),h=Math.min(e-o,f);c<=f&&h>=0&&l.resolveSelectableOffsetRangeToViewportBoundingRects(c,h).forEach(function(t){var e=t.width,o=t.height,a=n.getPaddingTop(),s=n.getPaddingBottom(),u=n.getPaddingLeft(),l=n.getPaddingRight(),f=u+t.left,c=l+t.right,h=i+a+t.top,p=n.getHeight()-i-d-t.bottom-s;r.push({width:e,height:o,left:f,right:c,top:h,bottom:p,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,paddingLeft:t.paddingLeft,paddingRight:t.paddingRight})});o+=l.getSelectableSize(),i+=d},s=this,u=0,l=this.children.length;u<l&&o<=e;u++)a(u);return r},e}(o(n(19)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getType=function(){return"TextInlineBox"},e.prototype.splitAt=function(t){if(t>this.children.length)throw new Error("Error cleaving TextInlineBox, offset "+t+" is out of range.");var n=this.children.splice(t),r=new e(this.editor,this.renderNodeID);return n.forEach(function(t,e){r.insertChild(t,e)}),this.clearCache(),r},e.prototype.join=function(t){var e=this;if(t.getRenderNodeID()!==this.renderNodeID)throw new Error("Cannot join inline boxes with different render node IDs.");var n=this.children.length;t.getChildren().forEach(function(t){e.insertChild(t,n),n++}),this.clearCache()},e}(o(n(10)).default);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var t=this;this.$iframe=document.createElement("iframe"),this.$iframe.src="about:blank",this.$iframe.style.width="0",this.$iframe.style.height="0",this.$iframe.style.border="none",document.body.appendChild(this.$iframe),this.$textContainers=new Map,setTimeout(function(){t.$textContainers.clear()})}return t.prototype.getTextContainerElement=function(t){var e=function(t){return JSON.stringify(t)}(t);if(!this.$textContainers.has(e)){var n=document.createElement("span");n.style.display="inline-block",n.style.whiteSpace="pre",n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize+"px",n.style.fontWeight=""+t.fontWeight,n.style.lineHeight="1.5em",n.style.letterSpacing=""+t.letterSpacing,this.$iframe.contentDocument.body.appendChild(n),this.$textContainers.set(e,n)}return this.$textContainers.get(e)},t.prototype.measure=function(t,e){var n=t.replace(/\n$/," "),r=this.getTextContainerElement(e);r.innerText!==n&&(r.innerText=n);var o=r.getBoundingClientRect();return{width:o.width,height:o.height}},t}();e.TextMeasurer=r;var o=new r;e.default=function(t,e){return o.measure(t,e)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.domContainer=document.createElement("div"),r.domContainer.className="tw--paragraph-block",r.domContainer.setAttribute("data-tw-id",n),r.domContainer.setAttribute("data-tw-role","block"),r}return r(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.insertChild=function(t,e){void 0===e&&(e=null);var n=t.getDOMContainer();if(t.setParent(this),null===e)this.children.push(t),this.domContainer.appendChild(n);else{if(this.children.splice(e,0,t),e>this.domContainer.childNodes.length)throw new Error("Error inserting child to view, offset "+e+" is out of range.");e===this.domContainer.childNodes.length?this.domContainer.appendChild(n):this.domContainer.insertBefore(n,this.domContainer.childNodes[e])}},e.prototype.deleteChild=function(t){var e=this.children.indexOf(t);if(e<0)throw new Error("Cannot delete child, child not found.");t.onDeleted();var n=t.getDOMContainer();this.domContainer.removeChild(n),t.setParent(null),this.children.splice(e,1)},e.prototype.getChildren=function(){return this.children},e.prototype.onDeleted=function(){this.children.map(function(t){t.onDeleted()})},e.prototype.onLayoutUpdated=function(t){this.selectableSize=t.getSelectableSize(),this.domContainer.style.width=t.getWidth()+"px",this.domContainer.style.height=t.getHeight()+"px",this.domContainer.style.paddingTop=t.getPaddingTop()+"px",this.domContainer.style.paddingBottom=t.getPaddingBottom()+"px",this.domContainer.style.paddingLeft=t.getPaddingLeft()+"px",this.domContainer.style.paddingRight=t.getPaddingRight()+"px"},e}(o(n(52)).default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(57)),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.domContainer=document.createElement("span"),r.domContainer.className="tw--text-inline",r.domContainer.setAttribute("data-tw-id",n),r.domContainer.setAttribute("data-tw-role","inline"),r.domContainer.style.display="inline-block",r.domContainer.style.color="black",r.domContainer.style.fontSize="18px",r.domContainer.style.lineHeight="1.5em",r.domContainer.style.paddingTop="0px",r.domContainer.style.paddingBottom="0px",r}return r(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.onDeleted=function(){},e.prototype.onLayoutUpdated=function(t){this.selectableSize=t.getSelectableSize();var e=t.getChildren().map(function(t){if(t instanceof i.default)return t.getContent();throw new Error("Invalid child AtomicBox encountered for TextInlineBox.")}).join("");this.domContainer.innerText=e,this.domContainer.style.paddingTop=t.getPaddingTop()+"px",this.domContainer.style.paddingBottom=t.getPaddingBottom()+"px"},e.prototype.resolveSelectionOffset=function(t){return t},e.prototype.resolveSelectableOffsetToNodeOffset=function(t){if(!this.domContainer.firstChild)throw new Error("Text inline view is not built properly.");return[this.domContainer.firstChild,t]},e}(o(n(53)).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.keyBindings=new Map}return t.prototype.bindKey=function(t,e){var n=t.getCode();this.keyBindings.has(n)||this.keyBindings.set(n,[]),this.keyBindings.get(n).push(e)},t.prototype.getKeyBindings=function(){return this.keyBindings},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.pageWidth=816,this.pageHeight=1056,this.pagePaddingTop=40,this.pagePaddingBottom=40,this.pagePaddingLeft=40,this.pagePaddingRight=40}return t.prototype.setPageWidth=function(t){this.pageWidth=t},t.prototype.getPageWidth=function(){return this.pageWidth},t.prototype.setPageHeight=function(t){this.pageHeight=t},t.prototype.getPageHeight=function(){return this.pageHeight},t.prototype.setPagePaddingTop=function(t){this.pagePaddingTop=t},t.prototype.getPagePaddingTop=function(){return this.pagePaddingTop},t.prototype.setPagePaddingBottom=function(t){this.pagePaddingBottom=t},t.prototype.getPagePaddingBottom=function(){return this.pagePaddingBottom},t.prototype.setPagePaddingLeft=function(t){this.pagePaddingLeft=t},t.prototype.getPagePaddingLeft=function(){return this.pagePaddingLeft},t.prototype.setPagePaddingRight=function(t){this.pagePaddingRight=t},t.prototype.getPagePaddingRight=function(){return this.pagePaddingRight},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.fonts=new Map,this.defaultFont=null,this.registerFont("serif",null),this.registerFont("sans-serif",null,!0),this.registerFont("monospace",null),this.registerFont("cursive",null),this.registerFont("fantasy",null)}return t.prototype.registerFont=function(t,e,n){void 0===n&&(n=!1);var r={name:t,src:e};this.fonts.set(t,r),n&&(this.defaultFont=r)},t.prototype.getFont=function(t){if(!this.fonts.has(t))throw new Error("Font "+t+" is not registered.");return this.fonts.get(t)},t.prototype.getDefaultFont=function(){if(!this.defaultFont)throw new Error("There is no default font configured.");return this.defaultFont},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.$onRegistered=function(t){this.editor=t,this.onRegistered&&this.onRegistered()},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Extension has not yet been registered.");return this.editor},t}();e.default=r},,,,,,function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(20),a=n.n(i),s=(n(67),n(21)),u=n(22),l=n(24),d=n(23),f=n(25),c=n(2),h=n(3),p=(n(68),n(38));function g(){var t=Object(c.a)(["\n  text-align: center;\n"]);return g=function(){return t},t}var y=h.a.div(g()),v=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(d.a)(e).call(this,t))).domRef=void 0,n.domRef=o.a.createRef(),n.state={editor:null},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.initialMarkup,e=this.domRef.current,n=new p.Config,r=new p.Editor(n,t,e);this.setState({editor:r})}},{key:"render",value:function(){return o.a.createElement(y,{ref:this.domRef})}}]),e}(o.a.Component),_='\n<Doc {"id": "{{id}}"}>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Once upon a time there lived in a certain village a little country girl, the prettiest creature was ever seen. Her mother was excessively fond of her; and her grandmother doted on her still more. This good woman had made for her a little red riding-hood; which became the girl so extremely well that everybody called her Little Red Riding-Hood.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      One day her mother, having made some custards, said to her:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Go, my dear, and see how thy grandmamma does, for I hear she has been very ill; carry her a custard, and this little pot of butter."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Little Red Riding-Hood set out immediately to go to her grandmother, who lived in another village.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      As she was going through the wood, she met with Gaffer Wolf, who had a very great mind to eat her up, but he dared not, because of some faggot-makers hard by in the forest. He asked her whither she was going. The poor child, who did not know that it was dangerous to stay and hear a wolf talk, said to him:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "I am going to see my grandmamma and carry her a custard and a little pot of butter from my mamma."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Does she live far off?" said the Wolf.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Oh! ay," answered Little Red Riding-Hood; "it is beyond that mill you see there, at the first house in the village."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Well," said the Wolf, "and I\'ll go and see her too. I\'ll go this way and you go that, and we shall see who will be there soonest."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The Wolf began to run as fast as he could, taking the nearest way, and the little girl went by that farthest about, diverting herself in gathering nuts, running after butterflies, and making nosegays of such little flowers as she met with. The Wolf was not long before he got to the old woman\'s house. He knocked at the door--tap, tap.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Who\'s there?"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Your grandchild, Little Red Riding-Hood," replied the Wolf, counterfeiting her voice; "who has brought you a custard and a little pot of butter sent you by mamma."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The good grandmother, who was in bed, because she was somewhat ill, cried out\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Pull the bobbin, and the latch will go up."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The Wolf pulled the bobbin, and the door opened, and then presently he fell upon the good woman and ate her up in a moment, for it was above three days that he had not touched a bit. He then shut the door and went into the grandmother\'s bed, expecting Little Red Riding- Hood, who came some time afterward and knocked at the door--tap, tap.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Who\'s there?"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Little Red Riding-Hood, hearing the big voice of the Wolf, was at first afraid; but believing her grandmother had got a cold and was hoarse, answered:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      " \'Tis your grandchild, Little Red Riding-Hood, who has brought you a custard and a little pot of butter mamma sends you."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The Wolf cried out to her, softening his voice as much as he could:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Pull the bobbin, and the latch will go up."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Little Red Riding-Hood pulled the bobbin, and the door opened.\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      The Wolf, seeing her come in, said to her, hiding himself under the bed-clothes:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Put the custard and the little pot of butter upon the stool, and come and lie down with me."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      Little Red Riding-Hood undressed herself and went into bed, where, being greatly amazed to see how her grandmother looked in her night-clothes, she said to her:\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great arms you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "That is the better to hug thee, my dear."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great legs you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "That is to run the better, my child."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great ears you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "That is to hear the better, my child."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great eyes you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "It is to see the better, my child."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "Grandmamma, what great teeth you have got!"\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      "That is to eat thee up."\n    </>\n  </>\n  <Paragraph {"id": "{{id}}"}>\n    <Text {"id": "{{id}}"}>\n      And, saying these words, this wicked wolf fell upon Little Red Riding-Hood, and ate her all up.\n    </>\n  </>\n</>\n'.split("\n").map(function(t){return t.trim()}).join("").replace(/([^>])<\/>/g,"$1\n</>").replace(/{{id}}/g,function(){return"".concat(Math.random().toString(36).substring(2))});function w(){var t=Object(c.a)(["\n  text-transform: uppercase;\n  font-weight: 500;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.65);\n  border-top: 1px solid rgba(0, 0, 0, 0.45);\n  padding-top: 10px;\n  cursor: default;\n"]);return w=function(){return t},t}function b(){var t=Object(c.a)(["\n  text-align: center;\n  background: rgba(0, 0, 0, 0.04);\n  padding-bottom: 30px;\n"]);return b=function(){return t},t}function m(){var t=Object(c.a)(["\n  display: inline-block;\n  padding: 15px 60px;\n  outline: none;\n  color: rgba(0, 0, 0, 0.85);\n  text-decoration: none;\n  font-size: 20px;\n  background: rgba(0, 0, 0, 0.04);\n  border-radius: 3px;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  &:hover {\n    color: rgba(0, 0, 0, 1);\n    background: rgba(0, 0, 0, 0.09);\n    border-color: rgba(0, 0, 0, 0.25);\n  }\n"]);return m=function(){return t},t}function C(){var t=Object(c.a)(["\n  margin-top: 90px;\n"]);return C=function(){return t},t}function O(){var t=Object(c.a)(["\n  font-size: 20px;\n  font-weight: 400;\n  color: rgba(0, 0, 0, 0.85);\n  margin: 30px 0 0;\n"]);return O=function(){return t},t}function S(){var t=Object(c.a)(["\n  font-size: 30px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.85);\n  margin: 90px 0 0;\n"]);return S=function(){return t},t}function P(){var t=Object(c.a)(["\n  color: rgba(0, 0, 0, 0.65);\n  font-size: 42px;\n  letter-spacing: 0.02em;\n  padding-bottom: 10px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.65);\n"]);return P=function(){return t},t}function M(){var t=Object(c.a)(["\n"]);return M=function(){return t},t}function x(){var t=Object(c.a)(["\n  text-align: center;\n  padding: 90px 60px;\n  background: rgba(0, 0, 0, 0.04);\n"]);return x=function(){return t},t}function T(){var t=Object(c.a)(["\n"]);return T=function(){return t},t}var E=h.a.div(T()),D=h.a.div(x()),k=h.a.div(M()),N=h.a.span(P()),B=h.a.h1(S()),j=h.a.h2(O()),L=h.a.div(C()),A=h.a.a(m()),K=h.a.div(b()),V=h.a.span(w()),R=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return o.a.createElement(E,null,o.a.createElement(D,null,o.a.createElement(k,null,o.a.createElement(N,null,"Taleweaver")),o.a.createElement(B,null,"Word processing in your browser."),o.a.createElement(j,null,"Open source editor delivering true word processing experience."),o.a.createElement(L,null,o.a.createElement(A,{href:"https://github.com/yuzhenmi/taleweaver"},"GitHub"))),o.a.createElement(K,null,o.a.createElement(V,null,"\u2193 Check it out \u2193")),o.a.createElement(v,{initialMarkup:_}))}}]),e}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[61,1,2]]]);
//# sourceMappingURL=main.b7289b49.chunk.js.map